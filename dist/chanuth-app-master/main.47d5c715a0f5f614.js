"use strict";(self.webpackChunkchanuth_app_master=self.webpackChunkchanuth_app_master||[]).push([[179],{58:(zi,Sn,Ve)=>{Ve.d(Sn,{BH:()=>At,G6:()=>Ii,L:()=>Qe,LL:()=>U,Pz:()=>mt,Sg:()=>dr,UG:()=>Z,ZB:()=>Ie,ZR:()=>Y,aH:()=>Mt,b$:()=>fn,eu:()=>F,hl:()=>k,jU:()=>$t,m9:()=>Ho,ne:()=>Wi,pd:()=>Ga,r3:()=>er,ru:()=>Ot,tV:()=>Q,uI:()=>vn,vZ:()=>Gi,w1:()=>vi,xO:()=>za,xb:()=>Pr,z$:()=>He,zd:()=>ai});const Ne=function(C){const T=[];let A=0;for(let G=0;G<C.length;G++){let x=C.charCodeAt(G);x<128?T[A++]=x:x<2048?(T[A++]=x>>6|192,T[A++]=63&x|128):55296==(64512&x)&&G+1<C.length&&56320==(64512&C.charCodeAt(G+1))?(x=65536+((1023&x)<<10)+(1023&C.charCodeAt(++G)),T[A++]=x>>18|240,T[A++]=x>>12&63|128,T[A++]=x>>6&63|128,T[A++]=63&x|128):(T[A++]=x>>12|224,T[A++]=x>>6&63|128,T[A++]=63&x|128)}return T},jt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(C,T){if(!Array.isArray(C))throw Error("encodeByteArray takes an array as a parameter");this.init_();const A=T?this.byteToCharMapWebSafe_:this.byteToCharMap_,G=[];for(let x=0;x<C.length;x+=3){const $=C[x],Me=x+1<C.length,qe=Me?C[x+1]:0,ut=x+2<C.length,qt=ut?C[x+2]:0;let Mn=(15&qe)<<2|qt>>6,wt=63&qt;ut||(wt=64,Me||(Mn=64)),G.push(A[$>>2],A[(3&$)<<4|qe>>4],A[Mn],A[wt])}return G.join("")},encodeString(C,T){return this.HAS_NATIVE_SUPPORT&&!T?btoa(C):this.encodeByteArray(Ne(C),T)},decodeString(C,T){return this.HAS_NATIVE_SUPPORT&&!T?atob(C):function(C){const T=[];let A=0,G=0;for(;A<C.length;){const x=C[A++];if(x<128)T[G++]=String.fromCharCode(x);else if(x>191&&x<224){const $=C[A++];T[G++]=String.fromCharCode((31&x)<<6|63&$)}else if(x>239&&x<365){const ut=((7&x)<<18|(63&C[A++])<<12|(63&C[A++])<<6|63&C[A++])-65536;T[G++]=String.fromCharCode(55296+(ut>>10)),T[G++]=String.fromCharCode(56320+(1023&ut))}else{const $=C[A++],Me=C[A++];T[G++]=String.fromCharCode((15&x)<<12|(63&$)<<6|63&Me)}}return T.join("")}(this.decodeStringToByteArray(C,T))},decodeStringToByteArray(C,T){this.init_();const A=T?this.charToByteMapWebSafe_:this.charToByteMap_,G=[];for(let x=0;x<C.length;){const $=A[C.charAt(x++)],qe=x<C.length?A[C.charAt(x)]:0;++x;const qt=x<C.length?A[C.charAt(x)]:64;++x;const ge=x<C.length?A[C.charAt(x)]:64;if(++x,null==$||null==qe||null==qt||null==ge)throw new Yt;G.push($<<2|qe>>4),64!==qt&&(G.push(qe<<4&240|qt>>2),64!==ge&&G.push(qt<<6&192|ge))}return G},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let C=0;C<this.ENCODED_VALS.length;C++)this.byteToCharMap_[C]=this.ENCODED_VALS.charAt(C),this.charToByteMap_[this.byteToCharMap_[C]]=C,this.byteToCharMapWebSafe_[C]=this.ENCODED_VALS_WEBSAFE.charAt(C),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[C]]=C,C>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(C)]=C,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(C)]=C)}}};class Yt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Qe=function(C){return function(C){const T=Ne(C);return jt.encodeByteArray(T,!0)}(C).replace(/\./g,"")},Q=function(C){try{return jt.decodeString(C,!0)}catch(T){console.error("base64Decode failed: ",T)}return null};function Ie(C,T){if(!(T instanceof Object))return T;switch(T.constructor){case Date:return new Date(T.getTime());case Object:void 0===C&&(C={});break;case Array:C=[];break;default:return T}for(const A in T)!T.hasOwnProperty(A)||!Ze(A)||(C[A]=Ie(C[A],T[A]));return C}function Ze(C){return"__proto__"!==C}const $e=()=>{try{return function ht(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const C=process.env.__FIREBASE_DEFAULTS__;return C?JSON.parse(C):void 0})()||(()=>{if(typeof document>"u")return;let C;try{C=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const T=C&&Q(C[1]);return T&&JSON.parse(T)})()}catch(C){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${C}`)}},Mt=()=>{var C;return null===(C=$e())||void 0===C?void 0:C.config},mt=C=>{var T;return null===(T=$e())||void 0===T?void 0:T[`_${C}`]};class At{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((T,A)=>{this.resolve=T,this.reject=A})}wrapCallback(T){return(A,G)=>{A?this.reject(A):this.resolve(G),"function"==typeof T&&(this.promise.catch(()=>{}),1===T.length?T(A):T(A,G))}}}function dr(C,T){if(C.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const G=T||"demo-project",x=C.iat||0,$=C.sub||C.user_id;if(!$)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Me=Object.assign({iss:`https://securetoken.google.com/${G}`,aud:G,iat:x,exp:x+3600,auth_time:x,sub:$,user_id:$,firebase:{sign_in_provider:"custom",identities:{}}},C);return[Qe(JSON.stringify({alg:"none",type:"JWT"})),Qe(JSON.stringify(Me)),""].join(".")}function He(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function vn(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(He())}function Z(){var C;const T=null===(C=$e())||void 0===C?void 0:C.forceEnvironment;if("node"===T)return!0;if("browser"===T)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function $t(){return"object"==typeof self&&self.self===self}function Ot(){const C="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof C&&void 0!==C.id}function fn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function vi(){const C=He();return C.indexOf("MSIE ")>=0||C.indexOf("Trident/")>=0}function Ii(){return!Z()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function k(){try{return"object"==typeof indexedDB}catch{return!1}}function F(){return new Promise((C,T)=>{try{let A=!0;const G="validate-browser-context-for-indexeddb-analytics-module",x=self.indexedDB.open(G);x.onsuccess=()=>{x.result.close(),A||self.indexedDB.deleteDatabase(G),C(!0)},x.onupgradeneeded=()=>{A=!1},x.onerror=()=>{var $;T((null===($=x.error)||void 0===$?void 0:$.message)||"")}}catch(A){T(A)}})}class Y extends Error{constructor(T,A,G){super(A),this.code=T,this.customData=G,this.name="FirebaseError",Object.setPrototypeOf(this,Y.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,U.prototype.create)}}class U{constructor(T,A,G){this.service=T,this.serviceName=A,this.errors=G}create(T,...A){const G=A[0]||{},x=`${this.service}/${T}`,$=this.errors[T],Me=$?function de(C,T){return C.replace(nt,(A,G)=>{const x=T[G];return null!=x?String(x):`<${G}?>`})}($,G):"Error";return new Y(x,`${this.serviceName}: ${Me} (${x}).`,G)}}const nt=/\{\$([^}]+)}/g;function er(C,T){return Object.prototype.hasOwnProperty.call(C,T)}function Pr(C){for(const T in C)if(Object.prototype.hasOwnProperty.call(C,T))return!1;return!0}function Gi(C,T){if(C===T)return!0;const A=Object.keys(C),G=Object.keys(T);for(const x of A){if(!G.includes(x))return!1;const $=C[x],Me=T[x];if(En($)&&En(Me)){if(!Gi($,Me))return!1}else if($!==Me)return!1}for(const x of G)if(!A.includes(x))return!1;return!0}function En(C){return null!==C&&"object"==typeof C}function za(C){const T=[];for(const[A,G]of Object.entries(C))Array.isArray(G)?G.forEach(x=>{T.push(encodeURIComponent(A)+"="+encodeURIComponent(x))}):T.push(encodeURIComponent(A)+"="+encodeURIComponent(G));return T.length?"&"+T.join("&"):""}function ai(C){const T={};return C.replace(/^\?/,"").split("&").forEach(G=>{if(G){const[x,$]=G.split("=");T[decodeURIComponent(x)]=decodeURIComponent($)}}),T}function Ga(C){const T=C.indexOf("?");if(!T)return"";const A=C.indexOf("#",T);return C.substring(T,A>0?A:void 0)}function Wi(C,T){const A=new hs(C,T);return A.subscribe.bind(A)}class hs{constructor(T,A){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=A,this.task.then(()=>{T(this)}).catch(G=>{this.error(G)})}next(T){this.forEachObserver(A=>{A.next(T)})}error(T){this.forEachObserver(A=>{A.error(T)}),this.close(T)}complete(){this.forEachObserver(T=>{T.complete()}),this.close()}subscribe(T,A,G){let x;if(void 0===T&&void 0===A&&void 0===G)throw new Error("Missing Observer.");x=function to(C,T){if("object"!=typeof C||null===C)return!1;for(const A of T)if(A in C&&"function"==typeof C[A])return!0;return!1}(T,["next","error","complete"])?T:{next:T,error:A,complete:G},void 0===x.next&&(x.next=kt),void 0===x.error&&(x.error=kt),void 0===x.complete&&(x.complete=kt);const $=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?x.error(this.finalError):x.complete()}catch{}}),this.observers.push(x),$}unsubscribeOne(T){void 0===this.observers||void 0===this.observers[T]||(delete this.observers[T],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(T){if(!this.finalized)for(let A=0;A<this.observers.length;A++)this.sendOne(A,T)}sendOne(T,A){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[T])try{A(this.observers[T])}catch(G){typeof console<"u"&&console.error&&console.error(G)}})}close(T){this.finalized||(this.finalized=!0,void 0!==T&&(this.finalError=T),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function kt(){}function Ho(C){return C&&C._delegate?C._delegate:C}},784:(zi,Sn,Ve)=>{function I(t){return"function"==typeof t}function xe(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const B=xe(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function Ne(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class dt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const s of n)s.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(I(r))try{r()}catch(s){e=s instanceof B?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{Rn(s)}catch(o){e=e??[],o instanceof B?e=[...e,...o.errors]:e.push(o)}}if(e)throw new B(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Rn(e);else{if(e instanceof dt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Ne(n,e)}remove(e){const{_finalizers:n}=this;n&&Ne(n,e),e instanceof dt&&e._removeParent(this)}}dt.EMPTY=(()=>{const t=new dt;return t.closed=!0,t})();const jt=dt.EMPTY;function Yt(t){return t instanceof dt||t&&"closed"in t&&I(t.remove)&&I(t.add)&&I(t.unsubscribe)}function Rn(t){I(t)?t():t.unsubscribe()}const Qe={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Q={setTimeout(t,e,...n){const{delegate:r}=Q;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=Q;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function ne(t){Q.setTimeout(()=>{const{onUnhandledError:e}=Qe;if(!e)throw t;e(t)})}function Ie(){}const Ze=gt("C",void 0,void 0);function gt(t,e,n){return{kind:t,value:e,error:n}}let ke=null;function $e(t){if(Qe.useDeprecatedSynchronousErrorHandling){const e=!ke;if(e&&(ke={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=ke;if(ke=null,n)throw r}}else t()}class Nn extends dt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Yt(e)&&e.add(this)):this.destination=$t}static create(e,n,r){return new dr(e,n,r)}next(e){this.isStopped?Z(function Pn(t){return gt("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Z(function ht(t){return gt("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Z(Ze,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Mt=Function.prototype.bind;function mt(t,e){return Mt.call(t,e)}class At{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){He(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){He(r)}else He(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){He(n)}}}class dr extends Nn{constructor(e,n,r){let i;if(super(),I(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Qe.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&mt(e.next,s),error:e.error&&mt(e.error,s),complete:e.complete&&mt(e.complete,s)}):i=e}this.destination=new At(i)}}function He(t){Qe.useDeprecatedSynchronousErrorHandling?function xn(t){Qe.useDeprecatedSynchronousErrorHandling&&ke&&(ke.errorThrown=!0,ke.error=t)}(t):ne(t)}function Z(t,e){const{onStoppedNotification:n}=Qe;n&&Q.setTimeout(()=>n(t,e))}const $t={closed:!0,next:Ie,error:function vn(t){throw t},complete:Ie},Ot="function"==typeof Symbol&&Symbol.observable||"@@observable";function fn(t){return t}function vi(t){return 0===t.length?fn:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}let st=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const s=function k(t){return t&&t instanceof Nn||function Ii(t){return t&&I(t.next)&&I(t.error)&&I(t.complete)}(t)&&Yt(t)}(n)?n:new dr(n,r,i);return $e(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=eo(r))((i,s)=>{const o=new dr({next:a=>{try{n(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[Ot](){return this}pipe(...n){return vi(n)(this)}toPromise(n){return new(n=eo(n))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function eo(t){var e;return null!==(e=t??Qe.Promise)&&void 0!==e?e:Promise}const F=xe(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let j=(()=>{class t extends st{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new H(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new F}next(n){$e(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){$e(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){$e(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:s}=this;return r||i?jt:(this.currentObservers=null,s.push(n),new dt(()=>{this.currentObservers=null,Ne(s,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){const n=new st;return n.source=this,n}}return t.create=(e,n)=>new H(e,n),t})();class H extends j{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:jt}}function Y(t){return I(t?.lift)}function U(t){return e=>{if(Y(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function de(t,e,n,r,i){return new nt(t,e,n,r,i)}class nt extends Nn{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function ve(t,e){return U((n,r)=>{let i=0;n.subscribe(de(r,s=>{r.next(t.call(e,s,i++))}))})}var Ee=Ve(582);const at=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function Ht(t){return I(t?.then)}function Pt(t){return I(t[Ot])}function qn(t){return Symbol.asyncIterator&&I(t?.[Symbol.asyncIterator])}function In(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const hr=function er(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Pr(t){return I(t?.[hr])}function qa(t){return(0,Ee.FC)(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:i}=yield(0,Ee.qq)(n.read());if(i)return yield(0,Ee.qq)(void 0);yield yield(0,Ee.qq)(r)}}finally{n.releaseLock()}})}function Gi(t){return I(t?.getReader)}function En(t){if(t instanceof st)return t;if(null!=t){if(Pt(t))return function Uo(t){return new st(e=>{const n=t[Ot]();if(I(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(at(t))return function za(t){return new st(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(Ht(t))return function ai(t){return new st(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,ne)})}(t);if(qn(t))return fr(t);if(Pr(t))return function Ga(t){return new st(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(Gi(t))return function Wi(t){return fr(qa(t))}(t)}throw In(t)}function fr(t){return new st(e=>{(function hs(t,e){var n,r,i,s;return(0,Ee.mG)(this,void 0,void 0,function*(){try{for(n=(0,Ee.KL)(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function zn(t,e,n,r=0,i=!1){const s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function kt(t,e,n=1/0){return I(e)?kt((r,i)=>ve((s,o)=>e(r,s,i,o))(En(t(r,i))),n):("number"==typeof e&&(n=e),U((r,i)=>function to(t,e,n,r,i,s,o,a){const u=[];let d=0,f=0,g=!1;const _=()=>{g&&!u.length&&!d&&e.complete()},y=D=>d<r?E(D):u.push(D),E=D=>{s&&e.next(D),d++;let b=!1;En(n(D,f++)).subscribe(de(e,M=>{i?.(M),s?y(M):e.next(M)},()=>{b=!0},void 0,()=>{if(b)try{for(d--;u.length&&d<r;){const M=u.shift();o?zn(e,o,()=>E(M)):E(M)}_()}catch(M){e.error(M)}}))};return t.subscribe(de(e,y,()=>{g=!0,_()})),()=>{a?.()}}(r,i,t,n)))}function ui(t=1/0){return kt(fn,t)}const wn=new st(t=>t.complete());function fs(t){return t[t.length-1]}function ps(t){return function Yr(t){return t&&I(t.schedule)}(fs(t))?t.pop():void 0}function Gn(t,e=0){return U((n,r)=>{n.subscribe(de(r,i=>zn(r,t,()=>r.next(i),e),()=>zn(r,t,()=>r.complete(),e),i=>zn(r,t,()=>r.error(i),e)))})}function pr(t,e=0){return U((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Ho(t,e){if(!t)throw new Error("Iterable cannot be null");return new st(n=>{zn(n,e,()=>{const r=t[Symbol.asyncIterator]();zn(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function A(t,e){return e?function T(t,e){if(null!=t){if(Pt(t))return function gs(t,e){return En(t).pipe(pr(e),Gn(e))}(t,e);if(at(t))return function mc(t,e){return new st(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(Ht(t))return function $o(t,e){return En(t).pipe(pr(e),Gn(e))}(t,e);if(qn(t))return Ho(t,e);if(Pr(t))return function Za(t,e){return new st(n=>{let r;return zn(n,e,()=>{r=t[hr](),zn(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void n.error(o)}s?n.complete():n.next(i)},0,!0)}),()=>I(r?.return)&&r.return()})}(t,e);if(Gi(t))return function C(t,e){return Ho(qa(t),e)}(t,e)}throw In(t)}(t,e):En(t)}function G(...t){const e=ps(t),n=function jo(t,e){return"number"==typeof fs(t)?t.pop():e}(t,1/0),r=t;return r.length?1===r.length?En(r[0]):ui(n)(A(r,e)):wn}class x extends j{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function $(...t){return A(t,ps(t))}function Me(t={}){const{connector:e=(()=>new j),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return s=>{let o,a,u,d=0,f=!1,g=!1;const _=()=>{a?.unsubscribe(),a=void 0},y=()=>{_(),o=u=void 0,f=g=!1},E=()=>{const D=o;y(),D?.unsubscribe()};return U((D,b)=>{d++,!g&&!f&&_();const M=u=u??e();b.add(()=>{d--,0===d&&!g&&!f&&(a=qe(E,i))}),M.subscribe(b),!o&&d>0&&(o=new dr({next:R=>M.next(R),error:R=>{g=!0,_(),a=qe(y,n,R),M.error(R)},complete:()=>{f=!0,_(),a=qe(y,r),M.complete()}}),En(D).subscribe(o))})(s)}}function qe(t,e,...n){if(!0===e)return void t();if(!1===e)return;const r=new dr({next:()=>{r.unsubscribe(),t()}});return En(e(...n)).subscribe(r)}function ut(t,e){return U((n,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();n.subscribe(de(r,u=>{i?.unsubscribe();let d=0;const f=s++;En(t(u,f)).subscribe(i=de(r,g=>r.next(e?e(u,g,f,d++):g),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function qt(t,e=fn){return t=t??Tn,U((n,r)=>{let i,s=!0;n.subscribe(de(r,o=>{const a=e(o);(s||!t(i,a))&&(s=!1,i=a,r.next(o))}))})}function Tn(t,e){return t===e}function ge(t){for(let e in t)if(t[e]===ge)return e;throw Error("Could not find renamed property on target object.")}function wt(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(wt).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function Ei(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const _c=ge({__forward_ref__:ge});function V(t){return t.__forward_ref__=V,t.toString=function(){return wt(this())},t}function S(t){return ee(t)?t():t}function ee(t){return"function"==typeof t&&t.hasOwnProperty(_c)&&t.__forward_ref__===V}function me(t){return t&&!!t.\u0275providers}const Ye="https://g.co/ng/security#xss";class W extends Error{constructor(e,n){super(function Jt(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}function _e(t){return"string"==typeof t?t:null==t?"":String(t)}function Ka(t,e){throw new W(-201,!1)}function gr(t,e){null==t&&function Se(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}(e,t,null,"!=")}function De(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function mr(t){return{providers:t.providers||[],imports:t.imports||[]}}function Qa(t){return qd(t,Ya)||qd(t,Ig)}function qd(t,e){return t.hasOwnProperty(e)?t[e]:null}function Zi(t){return t&&(t.hasOwnProperty(Ja)||t.hasOwnProperty(zd))?t[Ja]:null}const Ya=ge({\u0275prov:ge}),Ja=ge({\u0275inj:ge}),Ig=ge({ngInjectableDef:ge}),zd=ge({ngInjectorDef:ge});var Je=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Je||{});let Xa;function Wn(t){const e=Xa;return Xa=t,e}function wg(t,e,n){const r=Qa(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&Je.Optional?null:void 0!==e?e:void Ka(wt(t))}const _t=globalThis;class ce{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=De({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Nr={},ru="__NG_DI_FLAG__",vc="ngTempTokenPath",rI=/\n/gm,Sg="__source";let _s;function Ti(t){const e=_s;return _s=t,e}function sI(t,e=Je.Default){if(void 0===_s)throw new W(-203,!1);return null===_s?wg(t,void 0,e):_s.get(t,e&Je.Optional?null:void 0,e)}function re(t,e=Je.Default){return(function Eg(){return Xa}()||sI)(S(t),e)}function he(t,e=Je.Default){return re(t,Ec(e))}function Ec(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Zd(t){const e=[];for(let n=0;n<t.length;n++){const r=S(t[n]);if(Array.isArray(r)){if(0===r.length)throw new W(900,!1);let i,s=Je.Default;for(let o=0;o<r.length;o++){const a=r[o],u=WA(a);"number"==typeof u?-1===u?i=a.token:s|=u:i=a}e.push(re(i,s))}else e.push(re(r))}return e}function Ki(t,e){return t[ru]=e,t.prototype[ru]=e,t}function WA(t){return t[ru]}function _r(t){return{toString:t}.toString()}var Yi=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Yi||{}),Jr=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Jr||{});const ci={},ct=[],wc=ge({\u0275cmp:ge}),ys=ge({\u0275dir:ge}),Qd=ge({\u0275pipe:ge}),iu=ge({\u0275mod:ge}),Di=ge({\u0275fac:ge}),zo=ge({__NG_ELEMENT_ID__:ge}),Tc=ge({__NG_ENV_ID__:ge});function Mr(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function Dc(t,e,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{const s=i,o=n[++r];Cc(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function Rg(t){return 3===t||4===t||6===t}function Cc(t){return 64===t.charCodeAt(0)}function vs(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Yd(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Yd(t,e,n,r,i){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const a=t[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<t.length;){const a=t[s];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(t[s+1]=i));if(r===t[s+1])return void(t[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==r&&t.splice(s++,0,r),null!==i&&t.splice(s++,0,i)}const Jd="ng-template";function oI(t,e,n){let r=0,i=!0;for(;r<t.length;){let s=t[r++];if("string"==typeof s&&i){const o=t[r++];if(n&&"class"===s&&-1!==Mr(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<t.length&&"string"==typeof(s=t[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function Ac(t){return 4===t.type&&t.value!==Jd}function Xd(t,e,n){return e===(4!==t.type||n?t.value:Jd)}function eh(t,e,n){let r=4;const i=t.attrs||[],s=function Pg(t){for(let e=0;e<t.length;e++)if(Rg(t[e]))return e;return t.length}(i);let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!Xd(t,u,n)||""===u&&1===e.length){if(yr(r))return!1;o=!0}}else{const d=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!oI(t.attrs,d,n)){if(yr(r))return!1;o=!0}continue}const g=th(8&r?"class":u,i,Ac(t),n);if(-1===g){if(yr(r))return!1;o=!0;continue}if(""!==d){let _;_=g>s?"":i[g+1].toLowerCase();const y=8&r?_:null;if(y&&-1!==Mr(y,d,0)||2&r&&d!==_){if(yr(r))return!1;o=!0}}}}else{if(!o&&!yr(r)&&!yr(u))return!1;if(o&&yr(u))continue;o=!1,r=u|1&r}}return yr(r)||o}function yr(t){return 0==(1&t)}function th(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){const o=e[i];if(o===t)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function ih(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function nh(t,e,n=!1){for(let r=0;r<e.length;r++)if(eh(t,e[r],n))return!0;return!1}function Sc(t,e){return t?":not("+e.trim()+")":e}function xg(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!yr(o)&&(e+=Sc(s,i),i=""),r=o,s=s||!yr(r);n++}return""!==i&&(e+=Sc(s,i)),e}function Zn(t){return _r(()=>{const e=Pc(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Yi.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Jr.Emulated,styles:t.styles||ct,_:null,schemas:t.schemas||null,tView:null,id:""};Mg(n);const r=t.dependencies;return n.directiveDefs=Go(r,!1),n.pipeDefs=Go(r,!0),n.id=function ah(t){let e=0;const n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(n),n})}function oh(t){return et(t)||pn(t)}function uI(t){return null!==t}function vr(t){return _r(()=>({type:t.type,bootstrap:t.bootstrap||ct,declarations:t.declarations||ct,imports:t.imports||ct,exports:t.exports||ct,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Rc(t,e){if(null==t)return ci;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,e&&(e[i]=s)}return n}function On(t){return _r(()=>{const e=Pc(t);return Mg(e),e})}function kn(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function et(t){return t[wc]||null}function pn(t){return t[ys]||null}function tr(t){return t[Qd]||null}function Or(t,e){const n=t[iu]||null;if(!n&&!0===e)throw new Error(`Type ${wt(t)} does not have '\u0275mod' property.`);return n}function Pc(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||ci,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||ct,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Rc(t.inputs,e),outputs:Rc(t.outputs)}}function Mg(t){t.features?.forEach(e=>e(t))}function Go(t,e){if(!t)return null;const n=e?tr:oh;return()=>("function"==typeof t?t():t).map(r=>n(r)).filter(uI)}const Xt=0,ue=1,Ue=2,bt=3,li=4,ou=5,Dn=6,Wo=7,sn=8,Ci=9,Zo=10,Oe=11,au=12,xc=13,Ko=14,zt=15,uu=16,Es=17,Ai=18,no=19,kg=20,bi=21,Ji=22,cu=23,Qo=24,We=25,ws=1,uh=2,Si=7,Yo=9,Ln=11;function kr(t){return Array.isArray(t)&&"object"==typeof t[ws]}function Ir(t){return Array.isArray(t)&&!0===t[ws]}function du(t){return 0!=(4&t.flags)}function ro(t){return t.componentOffset>-1}function Mc(t){return 1==(1&t.flags)}function Ri(t){return!!t.template}function Lg(t){return 0!=(512&t[Ue])}function Pi(t,e){return t.hasOwnProperty(Di)?t[Di]:null}let Fn=null,Ts=!1;function Xr(t){const e=Fn;return Fn=t,e}const on={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Oc(t){if(!Cs(t)||t.dirty){if(!t.producerMustRecompute(t)&&!qg(t))return void(t.dirty=!1);t.producerRecomputeValue(t),t.dirty=!1}}function Hg(t){t.dirty=!0,function $g(t){if(void 0===t.liveConsumerNode)return;const e=Ts;Ts=!0;try{for(const n of t.liveConsumerNode)n.dirty||Hg(n)}finally{Ts=e}}(t),t.consumerMarkedDirty?.(t)}function hh(t){return t&&(t.nextProducerIndex=0),Xr(t)}function kc(t,e){if(Xr(e),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(Cs(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Ds(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function qg(t){Xo(t);for(let e=0;e<t.producerNode.length;e++){const n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(Oc(n),r!==n.version))return!0}return!1}function fu(t){if(Xo(t),Cs(t))for(let e=0;e<t.producerNode.length;e++)Ds(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Ds(t,e){if(function Lc(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),Xo(t),1===t.liveConsumerNode.length)for(let r=0;r<t.producerNode.length;r++)Ds(t.producerNode[r],t.producerIndexOfThis[r]);const n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){const r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Xo(i),i.producerIndexOfThis[r]=e}}function Cs(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Xo(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let Wg=null;const Qg=()=>{},gI=(()=>({...on,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule(t.ref)},hasRun:!1,cleanupFn:Qg}))();class mI{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function As(){return Yg}function Yg(t){return t.type.prototype.ngOnChanges&&(t.setInput=yI),_I}function _I(){const t=Jg(this),e=t?.current;if(e){const n=t.previous;if(n===ci)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function yI(t,e,n,r){const i=this.declaredInputs[n],s=Jg(t)||function mh(t,e){return t[Vc]=e}(t,{previous:ci,current:null}),o=s.current||(s.current={}),a=s.previous,u=a[i];o[i]=new mI(u&&u.currentValue,e,a===ci),t[r]=e}As.ngInherit=!0;const Vc="__ngSimpleChanges__";function Jg(t){return t[Vc]||null}const xi=function(t,e,n){};function Et(t){for(;Array.isArray(t);)t=t[Xt];return t}function Cn(t,e){return Et(e[t.index])}function Bc(t,e){return t.data[e]}function Lr(t,e){const n=e[t];return kr(n)?n:n[Xt]}function bs(t,e){return null==e?null:t[e]}function em(t){t[Es]=0}function Eh(t){1024&t[Ue]||(t[Ue]|=1024,jc(t,1))}function tm(t){1024&t[Ue]&&(t[Ue]&=-1025,jc(t,-1))}function jc(t,e){let n=t[bt];if(null===n)return;n[ou]+=e;let r=n;for(n=n[bt];null!==n&&(1===e&&1===r[ou]||-1===e&&0===r[ou]);)n[ou]+=e,r=n,n=n[bt]}const Pe={lFrame:um(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Hc(){return Pe.bindingsEnabled}function J(){return Pe.lFrame.lView}function tt(){return Pe.lFrame.tView}function gn(){let t=om();for(;null!==t&&64===t.type;)t=t.parent;return t}function om(){return Pe.lFrame.currentTNode}function ei(t,e){const n=Pe.lFrame;n.currentTNode=t,n.isParent=e}function Ch(){return Pe.lFrame.isParent}function Vn(){const t=Pe.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function ao(){return Pe.lFrame.bindingIndex++}function Rh(t,e){const n=Pe.lFrame;n.bindingIndex=n.bindingRootIndex=t,Ph(e)}function Ph(t){Pe.lFrame.currentDirectiveIndex=t}function Nh(t){Pe.lFrame.currentQueryIndex=t}function SI(t){const e=t[ue];return 2===e.type?e.declTNode:1===e.type?t[Dn]:null}function Mh(t,e,n){if(n&Je.SkipSelf){let i=e,s=t;for(;!(i=i.parent,null!==i||n&Je.Host||(i=SI(s),null===i||(s=s[Ko],10&i.type))););if(null===i)return!1;e=i,t=s}const r=Pe.lFrame=yu();return r.currentTNode=e,r.lView=t,!0}function Oh(t){const e=yu(),n=t[ue];Pe.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function yu(){const t=Pe.lFrame,e=null===t?null:t.child;return null===e?um(t):e}function um(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function cm(){const t=Pe.lFrame;return Pe.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const lm=cm;function kh(){const t=cm();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function nr(){return Pe.lFrame.selectedIndex}function uo(t){Pe.lFrame.selectedIndex=t}function xt(){const t=Pe.lFrame;return Bc(t.tView,t.selectedIndex)}let Lh=!0;function Gc(){return Lh}function Rs(t){Lh=t}function Wc(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:d,ngOnDestroy:f}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),d&&((t.viewHooks??=[]).push(n,d),(t.viewCheckHooks??=[]).push(n,d)),null!=f&&(t.destroyHooks??=[]).push(n,f)}}function Zc(t,e,n){hm(t,e,3,n)}function ra(t,e,n,r){(3&t[Ue])===n&&hm(t,e,n,r)}function vu(t,e){let n=t[Ue];(3&n)===e&&(n&=8191,n+=1,t[Ue]=n)}function hm(t,e,n,r){const s=r??-1,o=e.length-1;let a=0;for(let u=void 0!==r?65535&t[Es]:0;u<o;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(t[Es]+=65536),(a<s||-1==s)&&(LI(t,n,e,u),t[Es]=(4294901760&t[Es])+u+2),u++}function Kc(t,e){xi(4,t,e);const n=Xr(null);try{e.call(t)}finally{Xr(n),xi(5,t,e)}}function LI(t,e,n,r){const i=n[r]<0,s=n[r+1],a=t[i?-n[r]:n[r]];i?t[Ue]>>13<t[Es]>>16&&(3&t[Ue])===e&&(t[Ue]+=8192,Kc(a,s)):Kc(a,s)}const co=-1;class Iu{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function Vh(t){return t!==co}function Eu(t){return 32767&t}function wu(t,e){let n=function UI(t){return t>>16}(t),r=e;for(;n>0;)r=r[Ko],n--;return r}let Uh=!0;function Tu(t){const e=Uh;return Uh=t,e}const BI=255,Ps=5;let jI=0;const Mi={};function Yc(t,e){const n=mm(t,e);if(-1!==n)return n;const r=e[ue];r.firstCreatePass&&(t.injectorIndex=e.length,Du(r.data,t),Du(e,null),Du(r.blueprint,null));const i=Jc(t,e),s=t.injectorIndex;if(Vh(i)){const o=Eu(i),a=wu(i,e),u=a[ue].data;for(let d=0;d<8;d++)e[s+d]=a[o+d]|u[o+d]}return e[s+8]=i,s}function Du(t,e){t.push(0,0,0,0,0,0,0,0,e)}function mm(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Jc(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){if(r=Tm(i),null===r)return co;if(n++,i=i[Ko],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return co}function Cu(t,e,n){!function Bh(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(zo)&&(r=n[zo]),null==r&&(r=n[zo]=jI++);const i=r&BI;e.data[t+(i>>Ps)]|=1<<i}(t,e,n)}function _m(t,e,n){if(n&Je.Optional||void 0!==t)return t;Ka()}function Xc(t,e,n,r){if(n&Je.Optional&&void 0===r&&(r=null),!(n&(Je.Self|Je.Host))){const i=t[Ci],s=Wn(void 0);try{return i?i.get(e,r,n&Je.Optional):wg(e,r,n&Je.Optional)}finally{Wn(s)}}return _m(r,0,n)}function ym(t,e,n,r=Je.Default,i){if(null!==t){if(2048&e[Ue]&&!(r&Je.Self)){const o=function zI(t,e,n,r,i){let s=t,o=e;for(;null!==s&&null!==o&&2048&o[Ue]&&!(512&o[Ue]);){const a=vm(s,o,n,r|Je.Self,Mi);if(a!==Mi)return a;let u=s.parent;if(!u){const d=o[kg];if(d){const f=d.get(n,Mi,r);if(f!==Mi)return f}u=Tm(o),o=o[Ko]}s=u}return i}(t,e,n,r,Mi);if(o!==Mi)return o}const s=vm(t,e,n,r,Mi);if(s!==Mi)return s}return Xc(e,n,r,i)}function vm(t,e,n,r,i){const s=function Im(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(zo)?t[zo]:void 0;return"number"==typeof e?e>=0?e&BI:qI:e}(n);if("function"==typeof s){if(!Mh(e,t,r))return r&Je.Host?_m(i,0,r):Xc(e,n,r,i);try{let o;if(o=s(r),null!=o||r&Je.Optional)return o;Ka()}finally{lm()}}else if("number"==typeof s){let o=null,a=mm(t,e),u=co,d=r&Je.Host?e[zt][Dn]:null;for((-1===a||r&Je.SkipSelf)&&(u=-1===a?Jc(t,e):e[a+8],u!==co&&Em(r,!1)?(o=e[ue],a=Eu(u),e=wu(u,e)):a=-1);-1!==a;){const f=e[ue];if(tl(s,a,f.data)){const g=HI(a,e,n,o,r,d);if(g!==Mi)return g}u=e[a+8],u!==co&&Em(r,e[ue].data[a+8]===d)&&tl(s,a,e)?(o=f,a=Eu(u),e=wu(u,e)):a=-1}}return i}function HI(t,e,n,r,i,s){const o=e[ue],a=o.data[t+8],f=function el(t,e,n,r,i){const s=t.providerIndexes,o=e.data,a=1048575&s,u=t.directiveStart,f=s>>20,_=i?a+f:t.directiveEnd;for(let y=r?a:a+f;y<_;y++){const E=o[y];if(y<u&&n===E||y>=u&&E.type===n)return y}if(i){const y=o[u];if(y&&Ri(y)&&y.type===n)return u}return null}(a,o,n,null==r?ro(a)&&Uh:r!=o&&0!=(3&a.type),i&Je.Host&&s===a);return null!==f?lo(e,o,f,a):Mi}function lo(t,e,n,r){let i=t[n];const s=e.data;if(function Fh(t){return t instanceof Iu}(i)){const o=i;o.resolving&&function qo(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new W(-200,`Circular dependency in DI detected for ${t}${n}`)}(function Ke(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():_e(t)}(s[n]));const a=Tu(o.canSeeViewProviders);o.resolving=!0;const d=o.injectImpl?Wn(o.injectImpl):null;Mh(t,r,Je.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function kI(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=Yg(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}(n,s[n],e)}finally{null!==d&&Wn(d),Tu(a),o.resolving=!1,lm()}}return i}function tl(t,e,n){return!!(n[e+(t>>Ps)]&1<<t)}function Em(t,e){return!(t&Je.Self||t&Je.Host&&e)}class Un{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return ym(this._tNode,this._lView,e,Ec(r),n)}}function qI(){return new Un(gn(),J())}function ia(t){return ee(t)?()=>{const e=ia(S(t));return e&&e()}:Pi(t)}function Tm(t){const e=t[ue],n=e.type;return 2===n?e.declTNode:1===n?t[Dn]:null}const sa="__parameters__";function Oi(t,e,n){return _r(()=>{const r=function $h(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(u,d,f){const g=u.hasOwnProperty(sa)?u[sa]:Object.defineProperty(u,sa,{value:[]})[sa];for(;g.length<=f;)g.push(null);return(g[f]=g[f]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function aa(t,e){t.forEach(n=>Array.isArray(n)?aa(n,e):e(n))}function rl(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function ua(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}const Pu=Ki(Oi("Optional"),8),ol=Ki(Oi("SkipSelf"),4);function Lm(t){return 128==(128&t.flags)}var da=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(da||{});const rE=new Map;let W2=0;const sE="__ngContext__";function Er(t,e){kr(e)?(t[sE]=e[no],function K2(t){rE.set(t[no],t)}(e)):t[sE]=e}let oE;function aE(t,e){return oE(t,e)}function Qh(t){const e=t[bt];return Ir(e)?e[bt]:e}function Ob(t){return Lb(t[au])}function kb(t){return Lb(t[li])}function Lb(t){for(;null!==t&&!Ir(t);)t=t[li];return t}function ll(t,e,n,r,i){if(null!=r){let s,o=!1;Ir(r)?s=r:kr(r)&&(o=!0,r=r[Xt]);const a=Et(r);0===t&&null!==n?null==i?Bb(e,n,a):Nu(e,n,a,i||null,!0):1===t&&null!==n?Nu(e,n,a,i||null,!0):2===t?function Hm(t,e,n){const r=jm(t,e);r&&function pU(t,e,n,r){t.removeChild(e,n,r)}(t,r,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function _U(t,e,n,r,i){const s=n[Si];s!==Et(n)&&ll(e,t,r,s,i);for(let a=Ln;a<n.length;a++){const u=n[a];Jh(u[ue],u,t,e,r,s)}}(e,t,s,n,i)}}function Um(t,e,n){return t.createElement(e,n)}function Vb(t,e){const n=t[Yo],r=n.indexOf(e);tm(e),n.splice(r,1)}function Bm(t,e){if(t.length<=Ln)return;const n=Ln+e,r=t[n];if(r){const i=r[uu];null!==i&&i!==t&&Vb(i,r),e>0&&(t[n-1][li]=r[li]);const s=ua(t,Ln+e);!function oU(t,e){Jh(t,e,e[Oe],2,null,null),e[Xt]=null,e[Dn]=null}(r[ue],r);const o=s[Ai];null!==o&&o.detachView(s[ue]),r[bt]=null,r[li]=null,r[Ue]&=-129}return r}function cE(t,e){if(!(256&e[Ue])){const n=e[Oe];e[cu]&&fu(e[cu]),e[Qo]&&fu(e[Qo]),n.destroyNode&&Jh(t,e,n,3,null,null),function cU(t){let e=t[au];if(!e)return lE(t[ue],t);for(;e;){let n=null;if(kr(e))n=e[au];else{const r=e[Ln];r&&(n=r)}if(!n){for(;e&&!e[li]&&e!==t;)kr(e)&&lE(e[ue],e),e=e[bt];null===e&&(e=t),kr(e)&&lE(e[ue],e),n=e&&e[li]}e=n}}(e)}}function lE(t,e){if(!(256&e[Ue])){e[Ue]&=-129,e[Ue]|=256,function fU(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof Iu)){const s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],u=s[o+1];xi(4,a,u);try{u.call(a)}finally{xi(5,a,u)}}else{xi(4,i,s);try{s.call(i)}finally{xi(5,i,s)}}}}}(t,e),function hU(t,e){const n=t.cleanup,r=e[Wo];if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else n[s].call(r[n[s+1]]);null!==r&&(e[Wo]=null);const i=e[bi];if(null!==i){e[bi]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(t,e),1===e[ue].type&&e[Oe].destroy();const n=e[uu];if(null!==n&&Ir(e[bt])){n!==e[bt]&&Vb(n,e);const r=e[Ai];null!==r&&r.detachView(t)}!function Q2(t){rE.delete(t[no])}(e)}}function dE(t,e,n){return function Ub(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[Xt];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=t.data[r.directiveStart+i];if(s===Jr.None||s===Jr.Emulated)return null}return Cn(r,n)}}(t,e.parent,n)}function Nu(t,e,n,r,i){t.insertBefore(e,n,r,i)}function Bb(t,e,n){t.appendChild(e,n)}function jb(t,e,n,r,i){null!==r?Nu(t,e,n,r,i):Bb(t,e,n)}function jm(t,e){return t.parentNode(e)}let hE,qm,mE,zm,qb=function Hb(t,e,n){return 40&t.type?Cn(t,n):null};function $m(t,e,n,r){const i=dE(t,r,e),s=e[Oe],a=function $b(t,e,n){return qb(t,e,n)}(r.parent||e[Dn],r,e);if(null!=i)if(Array.isArray(n))for(let u=0;u<n.length;u++)jb(s,i,n[u],a,!1);else jb(s,i,n,a,!1);void 0!==hE&&hE(s,r,e,n,i)}function Yh(t,e){if(null!==e){const n=e.type;if(3&n)return Cn(e,t);if(4&n)return fE(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return Yh(t,r);{const i=t[e.index];return Ir(i)?fE(-1,i):Et(i)}}if(32&n)return aE(e,t)()||Et(t[e.index]);{const r=Gb(t,e);return null!==r?Array.isArray(r)?r[0]:Yh(Qh(t[zt]),r):Yh(t,e.next)}}return null}function Gb(t,e){return null!==e?t[zt][Dn].projection[e.projection]:null}function fE(t,e){const n=Ln+t+1;if(n<e.length){const r=e[n],i=r[ue].firstChild;if(null!==i)return Yh(r,i)}return e[Si]}function pE(t,e,n,r,i,s,o){for(;null!=n;){const a=r[n.index],u=n.type;if(o&&0===e&&(a&&Er(Et(a),r),n.flags|=2),32!=(32&n.flags))if(8&u)pE(t,e,n.child,r,i,s,!1),ll(e,t,i,a,s);else if(32&u){const d=aE(n,r);let f;for(;f=d();)ll(e,t,i,f,s);ll(e,t,i,a,s)}else 16&u?Zb(t,e,r,n,i,s):ll(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Jh(t,e,n,r,i,s){pE(n,r,t.firstChild,e,i,s,!1)}function Zb(t,e,n,r,i,s){const o=n[zt],u=o[Dn].projection[r.projection];if(Array.isArray(u))for(let d=0;d<u.length;d++)ll(e,t,i,u[d],s);else{let d=u;const f=o[bt];Lm(r)&&(d.flags|=128),pE(t,e,d,f,i,s,!0)}}function Kb(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Qb(t,e,n){const{mergedAttrs:r,classes:i,styles:s}=n;null!==r&&Dc(t,e,r),null!==i&&Kb(t,e,i),null!==s&&function vU(t,e,n){t.setAttribute(e,"style",n)}(t,e,s)}function dl(t){return function gE(){if(void 0===qm&&(qm=null,_t.trustedTypes))try{qm=_t.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return qm}()?.createHTML(t)||t}function hl(){if(void 0!==mE)return mE;if(typeof document<"u")return document;throw new W(210,!1)}function _E(){if(void 0===zm&&(zm=null,_t.trustedTypes))try{zm=_t.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return zm}function Yb(t){return _E()?.createHTML(t)||t}function Xb(t){return _E()?.createScriptURL(t)||t}class eS{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ye})`}}function ha(t){return t instanceof eS?t.changingThisBreaksApplicationSecurity:t}function Xh(t,e){const n=function RU(t){return t instanceof eS&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Ye})`)}return n===e}class PU{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const n=(new window.DOMParser).parseFromString(dl(e),"text/html").body;return null===n?this.inertDocumentHelper.getInertBodyElement(e):(n.removeChild(n.firstChild),n)}catch{return null}}}class xU{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const n=this.inertDocument.createElement("template");return n.innerHTML=dl(e),n}}const MU=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function yE(t){return(t=String(t)).match(MU)?t:"unsafe:"+t}function fo(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function ef(...t){const e={};for(const n of t)for(const r in n)n.hasOwnProperty(r)&&(e[r]=!0);return e}const nS=fo("area,br,col,hr,img,wbr"),rS=fo("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),iS=fo("rp,rt"),vE=ef(nS,ef(rS,fo("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ef(iS,fo("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ef(iS,rS)),IE=fo("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),sS=ef(IE,fo("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),fo("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),OU=fo("script,style,template");class kU{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let n=e.firstChild,r=!0;for(;n;)if(n.nodeType===Node.ELEMENT_NODE?r=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,r&&n.firstChild)n=n.firstChild;else for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let i=this.checkClobberedElement(n,n.nextSibling);if(i){n=i;break}n=this.checkClobberedElement(n,n.parentNode)}return this.buf.join("")}startElement(e){const n=e.nodeName.toLowerCase();if(!vE.hasOwnProperty(n))return this.sanitizedSomething=!0,!OU.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);const r=e.attributes;for(let i=0;i<r.length;i++){const s=r.item(i),o=s.name,a=o.toLowerCase();if(!sS.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let u=s.value;IE[a]&&(u=yE(u)),this.buf.push(" ",o,'="',oS(u),'"')}return this.buf.push(">"),!0}endElement(e){const n=e.nodeName.toLowerCase();vE.hasOwnProperty(n)&&!nS.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(e){this.buf.push(oS(e))}checkClobberedElement(e,n){if(n&&(e.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return n}}const LU=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,FU=/([^\#-~ |!])/g;function oS(t){return t.replace(/&/g,"&amp;").replace(LU,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(FU,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Gm;function EE(t){return"content"in t&&function UU(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var fl=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(fl||{});function aS(t){const e=tf();return e?Yb(e.sanitize(fl.HTML,t)||""):Xh(t,"HTML")?Yb(ha(t)):function VU(t,e){let n=null;try{Gm=Gm||function tS(t){const e=new xU(t);return function NU(){try{return!!(new window.DOMParser).parseFromString(dl(""),"text/html")}catch{return!1}}()?new PU(e):e}(t);let r=e?String(e):"";n=Gm.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=n.innerHTML,n=Gm.getInertBodyElement(r)}while(r!==s);return dl((new kU).sanitizeChildren(EE(n)||n))}finally{if(n){const r=EE(n)||n;for(;r.firstChild;)r.removeChild(r.firstChild)}}}(hl(),_e(t))}function Wm(t){const e=tf();return e?e.sanitize(fl.URL,t)||"":Xh(t,"URL")?ha(t):yE(_e(t))}function uS(t){const e=tf();if(e)return Xb(e.sanitize(fl.RESOURCE_URL,t)||"");if(Xh(t,"ResourceURL"))return Xb(ha(t));throw new W(904,!1)}function tf(){const t=J();return t&&t[Zo].sanitizer}const nf=new ce("ENVIRONMENT_INITIALIZER"),lS=new ce("INJECTOR",-1),dS=new ce("INJECTOR_DEF_TYPES");class wE{get(e,n=Nr){if(n===Nr){const r=new Error(`NullInjectorError: No provider for ${wt(e)}!`);throw r.name="NullInjectorError",r}return n}}function zU(...t){return{\u0275providers:fS(0,t),\u0275fromNgModule:!0}}function fS(t,...e){const n=[],r=new Set;let i;const s=o=>{n.push(o)};return aa(e,o=>{const a=o;Zm(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&pS(i,s),n}function pS(t,e){for(let n=0;n<t.length;n++){const{ngModule:r,providers:i}=t[n];TE(i,s=>{e(s,r)})}}function Zm(t,e,n,r){if(!(t=S(t)))return!1;let i=null,s=Zi(t);const o=!s&&et(t);if(s||o){if(o&&!o.standalone)return!1;i=t}else{const u=t.ngModule;if(s=Zi(u),!s)return!1;i=u}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const u="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const d of u)Zm(d,e,n,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let d;r.add(i);try{aa(s.imports,f=>{Zm(f,e,n,r)&&(d||=[],d.push(f))})}finally{}void 0!==d&&pS(d,e)}if(!a){const d=Pi(i)||(()=>new i);e({provide:i,useFactory:d,deps:ct},i),e({provide:dS,useValue:i,multi:!0},i),e({provide:nf,useValue:()=>re(i),multi:!0},i)}const u=s.providers;if(null!=u&&!a){const d=t;TE(u,f=>{e(f,d)})}}}return i!==t&&void 0!==t.providers}function TE(t,e){for(let n of t)me(n)&&(n=n.\u0275providers),Array.isArray(n)?TE(n,e):e(n)}const GU=ge({provide:String,useValue:ge});function DE(t){return null!==t&&"object"==typeof t&&GU in t}function Mu(t){return"function"==typeof t}const CE=new ce("Set Injector scope."),Km={},ZU={};let AE;function Qm(){return void 0===AE&&(AE=new wE),AE}class ki{}class pl extends ki{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,SE(e,o=>this.processProvider(o)),this.records.set(lS,gl(void 0,this)),i.has("environment")&&this.records.set(ki,gl(void 0,this));const s=this.records.get(CE);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(dS.multi,ct,Je.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const n=Ti(this),r=Wn(void 0);try{return e()}finally{Ti(n),Wn(r)}}get(e,n=Nr,r=Je.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Tc))return e[Tc](this);r=Ec(r);const s=Ti(this),o=Wn(void 0);try{if(!(r&Je.SkipSelf)){let u=this.records.get(e);if(void 0===u){const d=function XU(t){return"function"==typeof t||"object"==typeof t&&t instanceof ce}(e)&&Qa(e);u=d&&this.injectableDefInScope(d)?gl(bE(e),Km):null,this.records.set(e,u)}if(null!=u)return this.hydrate(e,u)}return(r&Je.Self?Qm():this.parent).get(e,n=r&Je.Optional&&n===Nr?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[vc]=a[vc]||[]).unshift(wt(e)),s)throw a;return function Kd(t,e,n,r){const i=t[vc];throw e[Sg]&&i.unshift(e[Sg]),t.message=function Qi(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let i=wt(e);if(Array.isArray(e))i=e.map(wt).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):wt(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(rI,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[vc]=null,t}(a,e,"R3InjectorError",this.source)}throw a}finally{Wn(o),Ti(s)}}resolveInjectorInitializers(){const e=Ti(this),n=Wn(void 0);try{const i=this.get(nf.multi,ct,Je.Self);for(const s of i)s()}finally{Ti(e),Wn(n)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(wt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new W(205,!1)}processProvider(e){let n=Mu(e=S(e))?e:S(e&&e.provide);const r=function QU(t){return DE(t)?gl(void 0,t.useValue):gl(function _S(t,e,n){let r;if(Mu(t)){const i=S(t);return Pi(i)||bE(i)}if(DE(t))r=()=>S(t.useValue);else if(function mS(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...Zd(t.deps||[]));else if(function gS(t){return!(!t||!t.useExisting)}(t))r=()=>re(S(t.useExisting));else{const i=S(t&&(t.useClass||t.provide));if(!function YU(t){return!!t.deps}(t))return Pi(i)||bE(i);r=()=>new i(...Zd(t.deps))}return r}(t),Km)}(e);if(Mu(e)||!0!==e.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=gl(void 0,Km,!0),i.factory=()=>Zd(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===Km&&(n.value=ZU,n.value=n.factory()),"object"==typeof n.value&&n.value&&function JU(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=S(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function bE(t){const e=Qa(t),n=null!==e?e.factory:Pi(t);if(null!==n)return n;if(t instanceof ce)throw new W(204,!1);if(t instanceof Function)return function KU(t){const e=t.length;if(e>0)throw function Su(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}(e,"?"),new W(204,!1);const n=function tI(t){return t&&(t[Ya]||t[Ig])||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new W(204,!1)}function gl(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function SE(t,e){for(const n of t)Array.isArray(n)?SE(n,e):n&&me(n)?SE(n.\u0275providers,e):e(n)}const Ym=new ce("AppId",{providedIn:"root",factory:()=>eB}),eB="ng",yS=new ce("Platform Initializer"),Ms=new ce("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),vS=new ce("CSP nonce",{providedIn:"root",factory:()=>hl().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let IS=(t,e,n)=>null;function LE(t,e,n=!1){return IS(t,e,n)}class lB{}class TS{}class hB{resolveComponentFactory(e){throw function dB(t){const e=Error(`No component factory found for ${wt(t)}.`);return e.ngComponent=t,e}(e)}}let r_=(()=>{class t{static#e=this.NULL=new hB}return t})();function fB(){return yl(gn(),J())}function yl(t,e){return new fa(Cn(t,e))}let fa=(()=>{class t{constructor(n){this.nativeElement=n}static#e=this.__NG_ELEMENT_ID__=fB}return t})();class CS{}let i_=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function gB(){const t=J(),n=Lr(gn().index,t);return(kr(n)?n:t)[Oe]}()}return t})(),mB=(()=>{class t{static#e=this.\u0275prov=De({token:t,providedIn:"root",factory:()=>null})}return t})();class af{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const AS=new af("16.2.12"),UE={};function PS(t,e=null,n=null,r){const i=xS(t,e,n,r);return i.resolveInjectorInitializers(),i}function xS(t,e=null,n=null,r,i=new Set){const s=[n||ct,zU(t)];return r=r||("object"==typeof t?void 0:wt(t)),new pl(s,e||Qm(),r||null,i)}let Li=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=Nr;static#t=this.NULL=new wE;static create(n,r){if(Array.isArray(n))return PS({name:""},r,n,"");{const i=n.name??"";return PS({name:i},n.parent,n.providers,i)}}static#n=this.\u0275prov=De({token:t,providedIn:"any",factory:()=>re(lS)});static#r=this.__NG_ELEMENT_ID__=-1}return t})();function jE(t){return t.ngOriginalError}class po{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&jE(e);for(;n&&jE(n);)n=jE(n);return n||null}}function HE(t){return e=>{setTimeout(t,void 0,e)}}const Ur=class TB extends j{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=HE(s),i&&(i=HE(i)),o&&(o=HE(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof dt&&e.add(a),a}};function MS(...t){}class yt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ur(!1),this.onMicrotaskEmpty=new Ur(!1),this.onStable=new Ur(!1),this.onError=new Ur(!1),typeof Zone>"u")throw new W(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function DB(){const t="function"==typeof _t.requestAnimationFrame;let e=_t[t?"requestAnimationFrame":"setTimeout"],n=_t[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function bB(t){const e=()=>{!function AB(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(_t,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,zE(t),t.isCheckStableRunning=!0,qE(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),zE(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(function RB(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(a))return n.invokeTask(i,s,o,a);try{return OS(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),kS(t)}},onInvoke:(n,r,i,s,o,a,u)=>{try{return OS(t),n.invoke(i,s,o,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),kS(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,zE(t),qE(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!yt.isInAngularZone())throw new W(909,!1)}static assertNotInAngularZone(){if(yt.isInAngularZone())throw new W(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,CB,MS,MS);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const CB={};function qE(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function zE(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function OS(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function kS(t){t._nesting--,qE(t)}class SB{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ur,this.onMicrotaskEmpty=new Ur,this.onStable=new Ur,this.onError=new Ur}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}const LS=new ce("",{providedIn:"root",factory:FS});function FS(){const t=he(yt);let e=!0;return G(new st(i=>{e=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{i.next(e),i.complete()})}),new st(i=>{let s;t.runOutsideAngular(()=>{s=t.onStable.subscribe(()=>{yt.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const o=t.onUnstable.subscribe(()=>{yt.assertInAngularZone(),e&&(e=!1,t.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(Me()))}function go(t){return t instanceof Function?t():t}let GE=(()=>{class t{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=De({token:t,providedIn:"root",factory:()=>new t})}return t})();function uf(t){for(;t;){t[Ue]|=64;const e=Qh(t);if(Lg(t)&&!e)return t;t=e}return null}const $S=new ce("",{providedIn:"root",factory:()=>!1});let o_=null;function GS(t,e){return t[e]??KS()}function WS(t,e){const n=KS();n.producerNode?.length&&(t[e]=o_,n.lView=t,o_=ZS())}const UB={...on,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{uf(t.lView)},lView:null};function ZS(){return Object.create(UB)}function KS(){return o_??=ZS(),o_}const je={};function St(t){QS(tt(),J(),nr()+t,!1)}function QS(t,e,n,r){if(!r)if(3==(3&e[Ue])){const s=t.preOrderCheckHooks;null!==s&&Zc(e,s,n)}else{const s=t.preOrderHooks;null!==s&&ra(e,s,0,n)}uo(n)}function Ae(t,e=Je.Default){const n=J();return null===n?re(t,e):ym(gn(),n,S(t),e)}function a_(t,e,n,r,i,s,o,a,u,d,f){const g=e.blueprint.slice();return g[Xt]=i,g[Ue]=140|r,(null!==d||t&&2048&t[Ue])&&(g[Ue]|=2048),em(g),g[bt]=g[Ko]=t,g[sn]=n,g[Zo]=o||t&&t[Zo],g[Oe]=a||t&&t[Oe],g[Ci]=u||t&&t[Ci]||null,g[Dn]=s,g[no]=function Z2(){return W2++}(),g[Ji]=f,g[kg]=d,g[zt]=2==e.type?t[zt]:g,g}function El(t,e,n,r,i){let s=t.data[e];if(null===s)s=function WE(t,e,n,r,i){const s=om(),o=Ch(),u=t.data[e]=function WB(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return function Ss(){return null!==Pe.skipHydrationRootTNode}()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=u),null!==s&&(o?null==s.child&&null!==u.parent&&(s.child=u):null===s.next&&(s.next=u,u.prev=s)),u}(t,e,n,r,i),function AI(){return Pe.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const o=function mu(){const t=Pe.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return ei(s,!0),s}function cf(t,e,n,r){if(0===n)return-1;const i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function JS(t,e,n,r,i){const s=GS(e,cu),o=nr(),a=2&r;try{uo(-1),a&&e.length>We&&QS(t,e,We,!1),xi(a?2:0,i);const d=a?s:null,f=hh(d);try{null!==d&&(d.dirty=!1),n(r,i)}finally{kc(d,f)}}finally{a&&null===e[cu]&&WS(e,cu),uo(o),xi(a?3:1,i)}}function ZE(t,e,n){if(du(e)){const r=Xr(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=t.data[o];a.contentQueries&&a.contentQueries(1,n[o],o)}}finally{Xr(r)}}}function KE(t,e,n){Hc()&&(function ej(t,e,n,r){const i=n.directiveStart,s=n.directiveEnd;ro(n)&&function aj(t,e,n){const r=Cn(e,t),i=XS(n);let o=16;n.signals?o=4096:n.onPush&&(o=64);const a=u_(t,a_(t,i,null,o,r,e,null,t[Zo].rendererFactory.createRenderer(r,n),null,null,null));t[e.index]=a}(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Yc(n,e),Er(r,e);const o=n.initialInputs;for(let a=i;a<s;a++){const u=t.data[a],d=lo(e,t,a,n);Er(d,e),null!==o&&uj(0,a-i,d,u,0,o),Ri(u)&&(Lr(n.index,e)[sn]=lo(e,t,a,n))}}(t,e,n,Cn(n,e)),64==(64&n.flags)&&iR(t,e,n))}function QE(t,e,n=Cn){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(e,t):t[o];t[i++]=a}}}function XS(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=YE(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function YE(t,e,n,r,i,s,o,a,u,d,f){const g=We+r,_=g+i,y=function jB(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:je);return n}(g,_),E="function"==typeof d?d():d;return y[ue]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:E,incompleteFirstPass:!1,ssrId:f}}let eR=t=>null;function tR(t,e,n,r){for(let i in t)if(t.hasOwnProperty(i)){n=null===n?{}:n;const s=t[i];null===r?nR(n,e,i,s):r.hasOwnProperty(i)&&nR(n,e,r[i],s)}return n}function nR(t,e,n,r){t.hasOwnProperty(n)?t[n].push(e,r):t[n]=[e,r]}function hi(t,e,n,r,i,s,o,a){const u=Cn(e,n);let f,d=e.inputs;!a&&null!=d&&(f=d[r])?(nw(t,n,f,r,i),ro(e)&&function QB(t,e){const n=Lr(e,t);16&n[Ue]||(n[Ue]|=64)}(n,e.index)):3&e.type&&(r=function KB(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(u,r,i))}function JE(t,e,n,r){if(Hc()){const i=null===r?null:{"":-1},s=function nj(t,e){const n=t.directiveRegistry;let r=null,i=null;if(n)for(let s=0;s<n.length;s++){const o=n[s];if(nh(e,o.selectors,!1))if(r||(r=[]),Ri(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),XE(t,e,a.length)}else r.unshift(o),XE(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(t,n);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&rR(t,e,n,o,i,a),i&&function rj(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const s=n[e[i+1]];if(null==s)throw new W(-301,!1);r.push(e[i],s)}}}(n,r,i)}n.mergedAttrs=vs(n.mergedAttrs,n.attrs)}function rR(t,e,n,r,i,s){for(let d=0;d<r.length;d++)Cu(Yc(n,e),t,r[d].type);!function sj(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,r.length);for(let d=0;d<r.length;d++){const f=r[d];f.providersResolver&&f.providersResolver(f)}let o=!1,a=!1,u=cf(t,e,r.length,null);for(let d=0;d<r.length;d++){const f=r[d];n.mergedAttrs=vs(n.mergedAttrs,f.hostAttrs),oj(t,n,e,u,f),ij(u,f,i),null!==f.contentQueries&&(n.flags|=4),(null!==f.hostBindings||null!==f.hostAttrs||0!==f.hostVars)&&(n.flags|=64);const g=f.type.prototype;!o&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(g.ngOnChanges||g.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}!function ZB(t,e,n){const i=e.directiveEnd,s=t.data,o=e.attrs,a=[];let u=null,d=null;for(let f=e.directiveStart;f<i;f++){const g=s[f],_=n?n.get(g):null,E=_?_.outputs:null;u=tR(g.inputs,f,u,_?_.inputs:null),d=tR(g.outputs,f,d,E);const D=null===u||null===o||Ac(e)?null:cj(u,f,o);a.push(D)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=d}(t,n,s)}function iR(t,e,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=function bI(){return Pe.lFrame.currentDirectiveIndex}();try{uo(s);for(let a=r;a<i;a++){const u=t.data[a],d=e[a];Ph(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&tj(u,d)}}finally{uo(-1),Ph(o)}}function tj(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function XE(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function ij(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Ri(e)&&(n[""]=t)}}function oj(t,e,n,r,i){t.data[r]=i;const s=i.factory||(i.factory=Pi(i.type)),o=new Iu(s,Ri(i),Ae);t.blueprint[r]=o,n[r]=o,function JB(t,e,n,r,i){const s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;null===o&&(o=t.hostBindingOpCodes=[]);const a=~e.index;(function XB(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(o)!=a&&o.push(a),o.push(n,r,s)}}(t,e,r,cf(t,n,i.hostVars,je),i)}function Os(t,e,n,r,i,s){const o=Cn(t,e);!function ew(t,e,n,r,i,s,o){if(null==s)t.removeAttribute(e,i,n);else{const a=null==o?_e(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}(e[Oe],o,s,t.value,n,r,i)}function uj(t,e,n,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)sR(r,n,o[a++],o[a++],o[a++])}function sR(t,e,n,r,i){const s=Xr(null);try{const o=t.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),null!==t.setInput?t.setInput(e,i,n,r):e[r]=i}finally{Xr(s)}}function cj(t,e,n){let r=null,i=0;for(;i<n.length;){const s=n[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(t.hasOwnProperty(s)){null===r&&(r=[]);const o=t[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function oR(t,e,n,r){return[t,!0,!1,e,null,0,r,n,null,null,null]}function aR(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const s=n[r+1];if(-1!==s){const o=t.data[s];Nh(n[r]),o.contentQueries(2,e[s],s)}}}function u_(t,e){return t[au]?t[xc][li]=e:t[au]=e,t[xc]=e,e}function tw(t,e,n){Nh(0);const r=Xr(null);try{e(t,n)}finally{Xr(r)}}function dR(t,e){const n=t[Ci],r=n?n.get(po,null):null;r&&r.handleError(e)}function nw(t,e,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++];sR(t.data[o],e[o],r,a,i)}}function mo(t,e,n){const r=function ta(t,e){return Et(e[t])}(e,t);!function Fb(t,e,n){t.setValue(e,n)}(t[Oe],r,n)}function lj(t,e){const n=Lr(e,t),r=n[ue];!function dj(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n);const i=n[Xt];null!==i&&null===n[Ji]&&(n[Ji]=LE(i,n[Ci])),rw(r,n,n[sn])}function rw(t,e,n){Oh(e);try{const r=t.viewQuery;null!==r&&tw(1,r,n);const i=t.template;null!==i&&JS(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&aR(t,e),t.staticViewQueries&&tw(2,t.viewQuery,n);const s=t.components;null!==s&&function hj(t,e){for(let n=0;n<e.length;n++)lj(t,e[n])}(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[Ue]&=-5,kh()}}let hR=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(n,r,i){const s=typeof Zone>"u"?null:Zone.current,o=function pI(t,e,n){const r=Object.create(gI);n&&(r.consumerAllowSignalWrites=!0),r.fn=t,r.schedule=e;const i=o=>{r.cleanupFn=o};return r.ref={notify:()=>Hg(r),run:()=>{if(r.dirty=!1,r.hasRun&&!qg(r))return;r.hasRun=!0;const o=hh(r);try{r.cleanupFn(),r.cleanupFn=Qg,r.fn(i)}finally{kc(r,o)}},cleanup:()=>r.cleanupFn()},r.ref}(n,d=>{this.all.has(d)&&this.queue.set(d,s)},i);let a;this.all.add(o),o.notify();const u=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=r?.onDestroy(u),{destroy:u}}flush(){if(0!==this.queue.size)for(const[n,r]of this.queue)this.queue.delete(n),r?r.run(()=>n.run()):n.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=De({token:t,providedIn:"root",factory:()=>new t})}return t})();function c_(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=Ei(i,a):2==s&&(r=Ei(r,a+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function lf(t,e,n,r,i=!1){for(;null!==n;){const s=e[n.index];null!==s&&r.push(Et(s)),Ir(s)&&fR(s,r);const o=n.type;if(8&o)lf(t,e,n.child,r);else if(32&o){const a=aE(n,e);let u;for(;u=a();)r.push(u)}else if(16&o){const a=Gb(e,n);if(Array.isArray(a))r.push(...a);else{const u=Qh(e[zt]);lf(u[ue],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function fR(t,e){for(let n=Ln;n<t.length;n++){const r=t[n],i=r[ue].firstChild;null!==i&&lf(r[ue],r,i,e)}t[Si]!==t[Xt]&&e.push(t[Si])}function l_(t,e,n,r=!0){const i=e[Zo],s=i.rendererFactory,o=i.afterRenderEventManager;s.begin?.(),o?.begin();try{pR(t,e,t.template,n)}catch(u){throw r&&dR(e,u),u}finally{s.end?.(),i.effectManager?.flush(),o?.end()}}function pR(t,e,n,r){const i=e[Ue];if(256!=(256&i)){e[Zo].effectManager?.flush(),Oh(e);try{em(e),function bh(t){return Pe.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&JS(t,e,n,2,r);const o=3==(3&i);if(o){const d=t.preOrderCheckHooks;null!==d&&Zc(e,d,null)}else{const d=t.preOrderHooks;null!==d&&ra(e,d,0,null),vu(e,0)}if(function gj(t){for(let e=Ob(t);null!==e;e=kb(e)){if(!e[uh])continue;const n=e[Yo];for(let r=0;r<n.length;r++){Eh(n[r])}}}(e),gR(e,2),null!==t.contentQueries&&aR(t,e),o){const d=t.contentCheckHooks;null!==d&&Zc(e,d)}else{const d=t.contentHooks;null!==d&&ra(e,d,1),vu(e,1)}!function BB(t,e){const n=t.hostBindingOpCodes;if(null===n)return;const r=GS(e,Qo);try{for(let i=0;i<n.length;i++){const s=n[i];if(s<0)uo(~s);else{const o=s,a=n[++i],u=n[++i];Rh(a,o),r.dirty=!1;const d=hh(r);try{u(2,e[o])}finally{kc(r,d)}}}}finally{null===e[Qo]&&WS(e,Qo),uo(-1)}}(t,e);const a=t.components;null!==a&&_R(e,a,0);const u=t.viewQuery;if(null!==u&&tw(2,u,r),o){const d=t.viewCheckHooks;null!==d&&Zc(e,d)}else{const d=t.viewHooks;null!==d&&ra(e,d,2),vu(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[Ue]&=-73,tm(e)}finally{kh()}}}function gR(t,e){for(let n=Ob(t);null!==n;n=kb(n))for(let r=Ln;r<n.length;r++)mR(n[r],e)}function mj(t,e,n){mR(Lr(e,t),n)}function mR(t,e){if(!function Ih(t){return 128==(128&t[Ue])}(t))return;const n=t[ue],r=t[Ue];if(80&r&&0===e||1024&r||2===e)pR(n,t,n.template,t[sn]);else if(t[ou]>0){gR(t,1);const i=n.components;null!==i&&_R(t,i,1)}}function _R(t,e,n){for(let r=0;r<e.length;r++)mj(t,e[r],n)}class df{get rootNodes(){const e=this._lView,n=e[ue];return lf(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[sn]}set context(e){this._lView[sn]=e}get destroyed(){return 256==(256&this._lView[Ue])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[bt];if(Ir(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(Bm(e,r),ua(n,r))}this._attachedToViewContainer=!1}cE(this._lView[ue],this._lView)}onDestroy(e){!function nm(t,e){if(256==(256&t[Ue]))throw new W(911,!1);null===t[bi]&&(t[bi]=[]),t[bi].push(e)}(this._lView,e)}markForCheck(){uf(this._cdRefInjectingView||this._lView)}detach(){this._lView[Ue]&=-129}reattach(){this._lView[Ue]|=128}detectChanges(){l_(this._lView[ue],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new W(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function uU(t,e){Jh(t,e,e[Oe],2,null,null)}(this._lView[ue],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new W(902,!1);this._appRef=e}}class _j extends df{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;l_(e[ue],e,e[sn],!1)}checkNoChanges(){}get context(){return null}}class yR extends r_{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=et(e);return new hf(n,this.ngModule)}}function vR(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}class vj{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Ec(r);const i=this.injector.get(e,UE,r);return i!==UE||n===UE?i:this.parentInjector.get(e,n,r)}}class hf extends TS{get inputs(){const e=this.componentDef,n=e.inputTransforms,r=vR(e.inputs);if(null!==n)for(const i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return vR(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function sh(t){return t.map(xg).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=(i=i||this.ngModule)instanceof ki?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new vj(e,s):e,a=o.get(CS,null);if(null===a)throw new W(407,!1);const g={rendererFactory:a,sanitizer:o.get(mB,null),effectManager:o.get(hR,null),afterRenderEventManager:o.get(GE,null)},_=a.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",E=r?function $B(t,e,n,r){const s=r.get($S,!1)||n===Jr.ShadowDom,o=t.selectRootElement(e,s);return function HB(t){eR(t)}(o),o}(_,r,this.componentDef.encapsulation,o):Um(_,y,function yj(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(y)),M=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let R=null;null!==E&&(R=LE(E,o,!0));const O=YE(0,null,null,1,0,null,null,null,null,null,null),K=a_(null,O,null,M,null,null,g,_,o,null,R);let ie,Re;Oh(K);try{const lt=this.componentDef;let Qt,Vo=null;lt.findHostDirectiveDefs?(Qt=[],Vo=new Map,lt.findHostDirectiveDefs(lt,Qt,Vo),Qt.push(lt)):Qt=[lt];const Zv=function Ej(t,e){const n=t[ue],r=We;return t[r]=e,El(n,r,2,"#host",null)}(K,E),KJ=function wj(t,e,n,r,i,s,o){const a=i[ue];!function Tj(t,e,n,r){for(const i of t)e.mergedAttrs=vs(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(c_(e,e.mergedAttrs,!0),null!==n&&Qb(r,n,e))}(r,t,e,o);let u=null;null!==e&&(u=LE(e,i[Ci]));const d=s.rendererFactory.createRenderer(e,n);let f=16;n.signals?f=4096:n.onPush&&(f=64);const g=a_(i,XS(n),null,f,i[t.index],t,s,d,null,null,u);return a.firstCreatePass&&XE(a,t,r.length-1),u_(i,g),i[t.index]=g}(Zv,E,lt,Qt,K,g,_);Re=Bc(O,We),E&&function Cj(t,e,n,r){if(r)Dc(t,n,["ng-version",AS.full]);else{const{attrs:i,classes:s}=function Ng(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let s=t[r];if("string"==typeof s)2===i?""!==s&&e.push(s,t[++r]):8===i&&n.push(s);else{if(!yr(i))break;i=s}r++}return{attrs:e,classes:n}}(e.selectors[0]);i&&Dc(t,n,i),s&&s.length>0&&Kb(t,n,s.join(" "))}}(_,lt,E,r),void 0!==n&&function Aj(t,e,n){const r=t.projection=[];for(let i=0;i<e.length;i++){const s=n[i];r.push(null!=s?Array.from(s):null)}}(Re,this.ngContentSelectors,n),ie=function Dj(t,e,n,r,i,s){const o=gn(),a=i[ue],u=Cn(o,i);rR(a,i,o,n,null,r);for(let f=0;f<n.length;f++)Er(lo(i,a,o.directiveStart+f,o),i);iR(a,i,o),u&&Er(u,i);const d=lo(i,a,o.directiveStart+o.componentOffset,o);if(t[sn]=i[sn]=d,null!==s)for(const f of s)f(d,e);return ZE(a,o,t),d}(KJ,lt,Qt,Vo,K,[bj]),rw(O,K,null)}finally{kh()}return new Ij(this.componentType,ie,yl(Re,K),K,Re)}}class Ij extends lB{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new _j(i),this.componentType=e}setInput(e,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const s=this._rootLView;nw(s[ue],s,i,e,n),this.previousInputValues.set(e,n),uf(Lr(this._tNode.index,s))}}get injector(){return new Un(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function bj(){const t=gn();Wc(J()[ue],t)}function CR(t){const e=t.inputConfig,n={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[2]&&(n[r]=i[2])}t.inputTransforms=n}function h_(t){return!!function iw(t){return null!==t&&("function"==typeof t||"object"==typeof t)}(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function ks(t,e,n){return t[e]=n}function wr(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function sw(t,e,n,r){const i=J();return wr(i,ao(),e)&&(tt(),Os(xt(),i,t,e,n,r)),sw}function Tl(t,e,n,r){return wr(t,ao(),n)?e+_e(n)+r:je}function _o(t,e,n,r,i,s,o,a){const u=J(),d=tt(),f=t+We,g=d.firstCreatePass?function n$(t,e,n,r,i,s,o,a,u){const d=e.consts,f=El(e,t,4,o||null,bs(d,a));JE(e,n,f,bs(d,u)),Wc(e,f);const g=f.tView=YE(2,f,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,d,null);return null!==e.queries&&(e.queries.template(e,f),g.queries=e.queries.embeddedTView(f)),f}(f,d,u,e,n,r,i,s,o):d.data[f];ei(g,!1);const _=VR(d,u,g,t);Gc()&&$m(d,u,_,g),Er(_,u),u_(u,u[f]=oR(_,u,_,g)),Mc(g)&&KE(d,u,g),null!=o&&QE(u,g,a)}let VR=function UR(t,e,n,r){return Rs(!0),e[Oe].createComment("")};function ir(t,e,n){const r=J();return wr(r,ao(),e)&&hi(tt(),xt(),r,t,e,r[Oe],n,!1),ir}function dw(t,e,n,r,i){const o=i?"class":"style";nw(t,n,e.inputs[o],o,r)}function Ce(t,e,n,r){const i=J(),s=tt(),o=We+t,a=i[Oe],u=s.firstCreatePass?function a$(t,e,n,r,i,s){const o=e.consts,u=El(e,t,2,r,bs(o,i));return JE(e,n,u,bs(o,s)),null!==u.attrs&&c_(u,u.attrs,!1),null!==u.mergedAttrs&&c_(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,i,e,n,r):s.data[o],d=BR(s,i,u,a,e,t);i[o]=d;const f=Mc(u);return ei(u,!0),Qb(a,d,u),32!=(32&u.flags)&&Gc()&&$m(s,i,d,u),0===function II(){return Pe.lFrame.elementDepthCount}()&&Er(d,i),function EI(){Pe.lFrame.elementDepthCount++}(),f&&(KE(s,i,u),ZE(s,u,i)),null!==r&&QE(i,u),Ce}function be(){let t=gn();Ch()?function _u(){Pe.lFrame.isParent=!1}():(t=t.parent,ei(t,!1));const e=t;(function wI(t){return Pe.skipHydrationRootTNode===t})(e)&&function TI(){Pe.skipHydrationRootTNode=null}(),function Th(){Pe.lFrame.elementDepthCount--}();const n=tt();return n.firstCreatePass&&(Wc(n,t),du(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function gm(t){return 0!=(8&t.flags)}(e)&&dw(n,e,J(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function Qc(t){return 0!=(16&t.flags)}(e)&&dw(n,e,J(),e.stylesWithoutHost,!1),be}function Tr(t,e,n,r){return Ce(t,e,n,r),be(),Tr}let BR=(t,e,n,r,i,s)=>(Rs(!0),Um(r,i,function dm(){return Pe.lFrame.currentNamespace}()));function __(t){return!!t&&"function"==typeof t.then}function HR(t){return!!t&&"function"==typeof t.subscribe}function pw(t,e,n,r){const i=J(),s=tt(),o=gn();return function zR(t,e,n,r,i,s,o){const a=Mc(r),d=t.firstCreatePass&&function cR(t){return t.cleanup||(t.cleanup=[])}(t),f=e[sn],g=function uR(t){return t[Wo]||(t[Wo]=[])}(e);let _=!0;if(3&r.type||o){const D=Cn(r,e),b=o?o(D):D,M=g.length,R=o?K=>o(Et(K[r.index])):r.index;let O=null;if(!o&&a&&(O=function p$(t,e,n,r){const i=t.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===n&&i[s+1]===r){const a=e[Wo],u=i[s+2];return a.length>u?a[u]:null}"string"==typeof o&&(s+=2)}return null}(t,e,i,r.index)),null!==O)(O.__ngLastListenerFn__||O).__ngNextListenerFn__=s,O.__ngLastListenerFn__=s,_=!1;else{s=WR(r,e,f,s,!1);const K=n.listen(b,i,s);g.push(s,K),d&&d.push(i,R,M,M+1)}}else s=WR(r,e,f,s,!1);const y=r.outputs;let E;if(_&&null!==y&&(E=y[i])){const D=E.length;if(D)for(let b=0;b<D;b+=2){const ie=e[E[b]][E[b+1]].subscribe(s),Re=g.length;g.push(s,ie),d&&d.push(i,r.index,Re,-(Re+1))}}}(s,i,i[Oe],o,t,e,r),pw}function GR(t,e,n,r){try{return xi(6,e,n),!1!==n(r)}catch(i){return dR(t,i),!1}finally{xi(7,e,n)}}function WR(t,e,n,r,i){return function s(o){if(o===Function)return r;uf(t.componentOffset>-1?Lr(t.index,e):e);let u=GR(e,n,r,o),d=s.__ngNextListenerFn__;for(;d;)u=GR(e,n,d,o)&&u,d=d.__ngNextListenerFn__;return i&&!1===u&&o.preventDefault(),u}}function ZR(t=1){return function RI(t){return(Pe.lFrame.contextLView=function PI(t,e){for(;t>0;)e=e[Ko],t--;return e}(t,Pe.lFrame.contextLView))[sn]}(t)}function y_(t,e,n){return gw(t,"",e,"",n),y_}function gw(t,e,n,r,i){const s=J(),o=Tl(s,e,n,r);return o!==je&&hi(tt(),xt(),s,t,o,s[Oe],i,!1),gw}function Xe(t,e=""){const n=J(),r=tt(),i=t+We,s=r.firstCreatePass?El(r,i,1,e,null):r.data[i],o=yP(r,n,s,e,t);n[i]=o,Gc()&&$m(r,n,o,s),ei(s,!1)}let yP=(t,e,n,r,i)=>(Rs(!0),function Vm(t,e){return t.createText(e)}(e[Oe],r));function ga(t){return yo("",t,""),ga}function yo(t,e,n){const r=J(),i=Tl(r,t,e,n);return i!==je&&mo(r,nr(),i),yo}const Lu=void 0;var aH=["en",[["a","p"],["AM","PM"],Lu],[["AM","PM"],Lu,Lu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Lu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Lu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Lu,"{1} 'at' {0}",Lu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function oH(t){const n=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return 1===n&&0===r?1:5}];let Nl={};function Br(t){const e=function uH(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=UP(e);if(n)return n;const r=e.split("-")[0];if(n=UP(r),n)return n;if("en"===r)return aH;throw new W(701,!1)}function UP(t){return t in Nl||(Nl[t]=_t.ng&&_t.ng.common&&_t.ng.common.locales&&_t.ng.common.locales[t]),Nl[t]}var Ft=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(Ft||{});const Ml="en-US";let BP=Ml;class Fu{}class hx{}class Aw extends Fu{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new yR(this);const i=Or(e);this._bootstrapComponents=go(i.bootstrap),this._r3Injector=xS(e,n,[{provide:Fu,useValue:this},{provide:r_,useValue:this.componentFactoryResolver},...r],wt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class bw extends hx{constructor(e){super(),this.moduleType=e}create(e){return new Aw(this.moduleType,e,[])}}class fx extends Fu{constructor(e){super(),this.componentFactoryResolver=new yR(this),this.instance=null;const n=new pl([...e.providers,{provide:Fu,useValue:this},{provide:r_,useValue:this.componentFactoryResolver}],e.parent||Qm(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function Sw(t,e,n=null){return new fx({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}let l4=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){const r=fS(0,n.type),i=r.length>0?Sw([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=De({token:t,providedIn:"environment",factory:()=>new t(re(ki))})}return t})();function px(t){t.getStandaloneInjector=e=>e.get(l4).getOrCreateStandaloneInjector(t)}function wx(t,e,n,r,i){return function Dx(t,e,n,r,i,s,o){const a=e+n;return function Ou(t,e,n,r){const i=wr(t,e,n);return wr(t,e+1,r)||i}(t,a,i,s)?ks(t,a+2,o?r.call(o,i,s):r(i,s)):Tf(t,a+2)}(J(),Vn(),t,e,n,r,i)}function Tf(t,e){const n=t[e];return n===je?void 0:n}function Tx(t,e,n,r,i,s){const o=e+n;return wr(t,o,i)?ks(t,o+1,s?r.call(s,i):r(i)):Tf(t,o+1)}function Pw(t,e){const n=tt();let r;const i=t+We;n.firstCreatePass?(r=function b4(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];const s=r.factory||(r.factory=Pi(r.type)),a=Wn(Ae);try{const u=Tu(!1),d=s();return Tu(u),function s$(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,J(),i,d),d}finally{Wn(a)}}function xw(t,e,n){const r=t+We,i=J(),s=function na(t,e){return t[e]}(i,r);return function Df(t,e){return t[ue].data[e].pure}(i,r)?Tx(i,Vn(),e,s.transform,n,s):s.transform(n)}function O4(t,e,n,r=!0){const i=e[ue];if(function lU(t,e,n,r){const i=Ln+r,s=n.length;r>0&&(n[i-1][li]=e),r<s-Ln?(e[li]=n[i],rl(n,Ln+r,e)):(n.push(e),e[li]=null),e[bt]=n;const o=e[uu];null!==o&&n!==o&&function dU(t,e){const n=t[Yo];e[zt]!==e[bt][bt][zt]&&(t[uh]=!0),null===n?t[Yo]=[e]:n.push(e)}(o,e);const a=e[Ai];null!==a&&a.insertView(t),e[Ue]|=128}(i,e,t,n),r){const s=fE(n,t),o=e[Oe],a=jm(o,t[Si]);null!==a&&function aU(t,e,n,r,i,s){r[Xt]=i,r[Dn]=e,Jh(t,r,n,1,i,s)}(i,t[Dn],o,e,a,s)}}Symbol;let vo=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=F4}return t})();const k4=vo,L4=class extends k4{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){const i=function M4(t,e,n,r){const i=e.tView,a=a_(t,i,n,4096&t[Ue]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[uu]=t[e.index];const d=t[Ai];return null!==d&&(a[Ai]=d.createEmbeddedView(i)),rw(i,a,n),a}(this._declarationLView,this._declarationTContainer,e,{injector:n,hydrationInfo:r});return new df(i)}};function F4(){return function C_(t,e){return 4&t.type?new L4(e,t,yl(t,e)):null}(gn(),J())}let rs=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=H4}return t})();function H4(){return function Ox(t,e){let n;const r=e[t.index];return Ir(r)?n=r:(n=oR(r,e,null,t),e[t.index]=n,u_(e,n)),kx(n,e,t,r),new Nx(n,t,e)}(gn(),J())}const q4=rs,Nx=class extends q4{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return yl(this._hostTNode,this._hostLView)}get injector(){return new Un(this._hostTNode,this._hostLView)}get parentInjector(){const e=Jc(this._hostTNode,this._hostLView);if(Vh(e)){const n=wu(e,this._hostLView),r=Eu(e);return new Un(n[ue].data[r+8],n)}return new Un(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=Mx(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-Ln}createEmbeddedView(e,n,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedViewImpl(n||{},s,null);return this.insertImpl(a,i,false),a}createComponent(e,n,r,i,s){const o=e&&!function Bn(t){return"function"==typeof t}(e);let a;if(o)a=n;else{const D=n||{};a=D.index,r=D.injector,i=D.projectableNodes,s=D.environmentInjector||D.ngModuleRef}const u=o?e:new hf(et(e)),d=r||this.parentInjector;if(!s&&null==u.ngModule){const b=(o?d:this.parentInjector).get(ki,null);b&&(s=b)}et(u.componentType??{});const y=u.create(d,i,null,s);return this.insertImpl(y.hostView,a,false),y}insert(e,n){return this.insertImpl(e,n,!1)}insertImpl(e,n,r){const i=e._lView;if(function Xg(t){return Ir(t[bt])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const d=i[bt],f=new Nx(d,d[Dn],d[bt]);f.detach(f.indexOf(e))}}const o=this._adjustIndex(n),a=this._lContainer;return O4(a,i,o,!r),e.attachToViewContainerRef(),rl(Mw(a),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=Mx(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=Bm(this._lContainer,n);r&&(ua(Mw(this._lContainer),n),cE(r[ue],r))}detach(e){const n=this._adjustIndex(e,-1),r=Bm(this._lContainer,n);return r&&null!=ua(Mw(this._lContainer),n)?new df(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function Mx(t){return t[8]}function Mw(t){return t[8]||(t[8]=[])}let kx=function Lx(t,e,n,r){if(t[Si])return;let i;i=8&n.type?Et(r):function z4(t,e){const n=t[Oe],r=n.createComment(""),i=Cn(e,t);return Nu(n,jm(n,i),r,function gU(t,e){return t.nextSibling(e)}(n,i),!1),r}(e,n),t[Si]=i};const qw=new ce("Application Initializer");let zw=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=he(qw,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const i of this.appInits){const s=i();if(__(s))n.push(s);else if(HR(s)){const o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});n.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=De({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),aN=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=De({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const Io=new ce("LocaleId",{providedIn:"root",factory:()=>he(Io,Je.Optional|Je.SkipSelf)||function wq(){return typeof $localize<"u"&&$localize.locale||Ml}()});let uN=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new x(!1)}add(){this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=De({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class Cq{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let cN=(()=>{class t{compileModuleSync(n){return new bw(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),s=go(Or(n).declarations).reduce((o,a)=>{const u=et(a);return u&&o.push(new hf(u)),o},[]);return new Cq(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=De({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const fN=new ce(""),R_=new ce("");let Qw,Zw=(()=>{class t{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Qw||(function Wq(t){Qw=t}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{yt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:s,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||t)(re(yt),re(Kw),re(R_))};static#t=this.\u0275prov=De({token:t,factory:t.\u0275fac})}return t})(),Kw=(()=>{class t{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return Qw?.findTestabilityInTree(this,n,r)??null}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=De({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),ma=null;const pN=new ce("AllowMultipleToken"),Yw=new ce("PlatformDestroyListeners"),Jw=new ce("appBootstrapListener");class mN{constructor(e,n){this.name=e,this.token=n}}function yN(t,e,n=[]){const r=`Platform: ${e}`,i=new ce(r);return(s=[])=>{let o=Xw();if(!o||o.injector.get(pN,!1)){const a=[...n,...s,{provide:i,useValue:!0}];t?t(a):function Qq(t){if(ma&&!ma.get(pN,!1))throw new W(400,!1);(function gN(){!function ea(t){Wg=t}(()=>{throw new W(600,!1)})})(),ma=t;const e=t.get(IN);(function _N(t){t.get(yS,null)?.forEach(n=>n())})(t)}(function vN(t=[],e){return Li.create({name:e,providers:[{provide:CE,useValue:"platform"},{provide:Yw,useValue:new Set([()=>ma=null])},...t]})}(a,r))}return function Jq(t){const e=Xw();if(!e)throw new W(401,!1);return e}()}}function Xw(){return ma?.get(IN)??null}let IN=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function Xq(t="zone.js",e){return"noop"===t?new SB:"zone.js"===t?new yt(e):t}(r?.ngZone,function EN(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=function c4(t,e,n){return new Aw(t,e,n)}(n.moduleType,this.injector,function AN(t){return[{provide:yt,useFactory:t},{provide:nf,multi:!0,useFactory:()=>{const e=he(tz,{optional:!0});return()=>e.initialize()}},{provide:CN,useFactory:ez},{provide:LS,useFactory:FS}]}(()=>i)),o=s.injector.get(po,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:u=>{o.handleError(u)}});s.onDestroy(()=>{P_(this._modules,s),a.unsubscribe()})}),function wN(t,e,n){try{const r=n();return __(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,i,()=>{const a=s.injector.get(zw);return a.runInitializers(),a.donePromise.then(()=>(function jP(t){gr(t,"Expected localeId to be defined"),"string"==typeof t&&(BP=t.toLowerCase().replace(/_/g,"-"))}(s.injector.get(Io,Ml)||Ml),this._moduleDoBootstrap(s),s))})})}bootstrapModule(n,r=[]){const i=TN({},r);return function Zq(t,e,n){const r=new bw(n);return Promise.resolve(r)}(0,0,n).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(n){const r=n.injector.get(Ll);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new W(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new W(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(Yw,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||t)(re(Li))};static#t=this.\u0275prov=De({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function TN(t,e){return Array.isArray(e)?e.reduce(TN,t):{...t,...e}}let Ll=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=he(CN),this.zoneIsStable=he(LS),this.componentTypes=[],this.components=[],this.isStable=he(uN).hasPendingTasks.pipe(ut(n=>n?$(!1):this.zoneIsStable),qt(),Me()),this._injector=he(ki)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const i=n instanceof TS;if(!this._injector.get(zw).done)throw!i&&function Is(t){const e=et(t)||pn(t)||tr(t);return null!==e&&e.standalone}(n),new W(405,!1);let o;o=i?n:this._injector.get(r_).resolveComponentFactory(n),this.componentTypes.push(o.componentType);const a=function Kq(t){return t.isBoundToModule}(o)?void 0:this._injector.get(Fu),d=o.create(Li.NULL,[],r||o.selector,a),f=d.location.nativeElement,g=d.injector.get(fN,null);return g?.registerApplication(f),d.onDestroy(()=>{this.detachView(d.hostView),P_(this.components,d),g?.unregisterApplication(f)}),this._loadComponent(d),d}tick(){if(this._runningTick)throw new W(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this.internalErrorHandler(n)}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;P_(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(Jw,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>P_(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new W(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=De({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function P_(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const CN=new ce("",{providedIn:"root",factory:()=>he(po).handleError.bind(void 0)});function ez(){const t=he(yt),e=he(po);return n=>t.runOutsideAngular(()=>e.handleError(n))}let tz=(()=>{class t{constructor(){this.zone=he(yt),this.applicationRef=he(Ll)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=De({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();let eT=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=rz}return t})();function rz(t){return function iz(t,e,n){if(ro(t)&&!n){const r=Lr(t.index,e);return new df(r,r)}return 47&t.type?new df(e[zt],e):null}(gn(),J(),16==(16&t))}class xN{constructor(){}supports(e){return h_(e)}create(e){return new lz(e)}}const cz=(t,e)=>e;class lz{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||cz}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){const o=!r||n&&n.currentIndex<MN(r,i,s)?n:r,a=MN(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,null==o.previousIndex)i++;else{s||(s=[]);const d=a-i,f=u-i;if(d!=f){for(let _=0;_<d;_++){const y=_<s.length?s[_]:s[_]=0,E=y+_;f<=E&&E<d&&(s[_]=y+1)}s[o.previousIndex]=f-d}}a!==u&&e(o,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!h_(e))throw new W(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,n=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)):(n=this._mismatch(n,s,o,a),r=!0),n=n._next}else i=0,function Vj(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Symbol.iterator]();let r;for(;!(r=n.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,o,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new dz(n,r),s,i),e}_verifyReinsertion(e,n,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){const i=null===n?this._itHead:n._next;return e._next=i,e._prev=n,null===i?this._itTail=e:i._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new NN),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,r=e._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new NN),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class dz{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class hz{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const n=e._prevDup,r=e._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class NN{constructor(){this.map=new Map}put(e){const n=e.trackById;let r=this.map.get(n);r||(r=new hz,this.map.set(n,r)),r.add(e)}get(e,n){const i=this.map.get(e);return i?i.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function MN(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function kN(){return new M_([new xN])}let M_=(()=>{class t{static#e=this.\u0275prov=De({token:t,providedIn:"root",factory:kN});constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||kN()),deps:[[t,new ol,new Pu]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new W(901,!1)}}return t})();const _z=yN(null,"core",[]);let yz=(()=>{class t{constructor(n){}static#e=this.\u0275fac=function(r){return new(r||t)(re(Ll))};static#t=this.\u0275mod=vr({type:t});static#n=this.\u0275inj=mr({})}return t})();function oT(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}let aT=null;function Fl(){return aT}class Nz{}const Vi=new ce("DocumentToken");let uT=(()=>{class t{historyGo(n){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=De({token:t,factory:function(){return he(Oz)},providedIn:"platform"})}return t})();const Mz=new ce("Location Initialized");let Oz=(()=>{class t extends uT{constructor(){super(),this._doc=he(Vi),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Fl().getBaseHref(this._doc)}onPopState(n){const r=Fl().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=Fl().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=De({token:t,factory:function(){return new t},providedIn:"platform"})}return t})();function cT(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function zN(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function Eo(t){return t&&"?"!==t[0]?"?"+t:t}let Uu=(()=>{class t{historyGo(n){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=De({token:t,factory:function(){return he(WN)},providedIn:"root"})}return t})();const GN=new ce("appBaseHref");let WN=(()=>{class t extends Uu{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??he(Vi).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return cT(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+Eo(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){const o=this.prepareExternalUrl(i+Eo(s));this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){const o=this.prepareExternalUrl(i+Eo(s));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static#e=this.\u0275fac=function(r){return new(r||t)(re(uT),re(GN,8))};static#t=this.\u0275prov=De({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),kz=(()=>{class t extends Uu{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=cT(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+Eo(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+Eo(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static#e=this.\u0275fac=function(r){return new(r||t)(re(uT),re(GN,8))};static#t=this.\u0275prov=De({token:t,factory:t.\u0275fac})}return t})(),lT=(()=>{class t{constructor(n){this._subject=new Ur,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._basePath=function Vz(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(zN(ZN(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Eo(r))}normalize(n){return t.stripTrailingSlash(function Fz(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,ZN(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Eo(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Eo(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static#e=this.normalizeQueryParams=Eo;static#t=this.joinWithSlash=cT;static#n=this.stripTrailingSlash=zN;static#r=this.\u0275fac=function(r){return new(r||t)(re(Uu))};static#i=this.\u0275prov=De({token:t,factory:function(){return function Lz(){return new lT(re(Uu))}()},providedIn:"root"})}return t})();function ZN(t){return t.replace(/\/index.html$/,"")}var $r=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}($r||{}),Nt=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}(Nt||{}),fi=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}(fi||{}),mn=function(t){return t[t.Decimal=0]="Decimal",t[t.Group=1]="Group",t[t.List=2]="List",t[t.PercentSign=3]="PercentSign",t[t.PlusSign=4]="PlusSign",t[t.MinusSign=5]="MinusSign",t[t.Exponential=6]="Exponential",t[t.SuperscriptingExponent=7]="SuperscriptingExponent",t[t.PerMille=8]="PerMille",t[t.Infinity=9]="Infinity",t[t.NaN=10]="NaN",t[t.TimeSeparator=11]="TimeSeparator",t[t.CurrencyDecimal=12]="CurrencyDecimal",t[t.CurrencyGroup=13]="CurrencyGroup",t}(mn||{});function L_(t,e){return Bi(Br(t)[Ft.DateFormat],e)}function F_(t,e){return Bi(Br(t)[Ft.TimeFormat],e)}function V_(t,e){return Bi(Br(t)[Ft.DateTimeFormat],e)}function Ui(t,e){const n=Br(t),r=n[Ft.NumberSymbols][e];if(typeof r>"u"){if(e===mn.CurrencyDecimal)return n[Ft.NumberSymbols][mn.Decimal];if(e===mn.CurrencyGroup)return n[Ft.NumberSymbols][mn.Group]}return r}function QN(t){if(!t[Ft.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[Ft.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Bi(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new Error("Locale data API: locale data undefined")}function hT(t){const[e,n]=t.split(":");return{hours:+e,minutes:+n}}const Jz=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Sf={},Xz=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var wo=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}(wo||{}),vt=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}(vt||{}),It=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}(It||{});function e3(t,e,n,r){let i=function c3(t){if(XN(t))return t;if("number"==typeof t&&!isNaN(t))return new Date(t);if("string"==typeof t){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){const[i,s=1,o=1]=t.split("-").map(a=>+a);return U_(i,s-1,o)}const n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(Jz))return function l3(t){const e=new Date(0);let n=0,r=0;const i=t[8]?e.setUTCFullYear:e.setFullYear,s=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));const o=Number(t[4]||0)-n,a=Number(t[5]||0)-r,u=Number(t[6]||0),d=Math.floor(1e3*parseFloat("0."+(t[7]||0)));return s.call(e,o,a,u,d),e}(r)}const e=new Date(t);if(!XN(e))throw new Error(`Unable to convert "${t}" into a date`);return e}(t);e=To(n,e)||e;let a,o=[];for(;e;){if(a=Xz.exec(e),!a){o.push(e);break}{o=o.concat(a.slice(1));const f=o.pop();if(!f)break;e=f}}let u=i.getTimezoneOffset();r&&(u=JN(r,u),i=function u3(t,e,n){const r=n?-1:1,i=t.getTimezoneOffset();return function a3(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}(t,r*(JN(e,i)-i))}(i,r,!0));let d="";return o.forEach(f=>{const g=function o3(t){if(pT[t])return pT[t];let e;switch(t){case"G":case"GG":case"GGG":e=Vt(It.Eras,Nt.Abbreviated);break;case"GGGG":e=Vt(It.Eras,Nt.Wide);break;case"GGGGG":e=Vt(It.Eras,Nt.Narrow);break;case"y":e=An(vt.FullYear,1,0,!1,!0);break;case"yy":e=An(vt.FullYear,2,0,!0,!0);break;case"yyy":e=An(vt.FullYear,3,0,!1,!0);break;case"yyyy":e=An(vt.FullYear,4,0,!1,!0);break;case"Y":e=H_(1);break;case"YY":e=H_(2,!0);break;case"YYY":e=H_(3);break;case"YYYY":e=H_(4);break;case"M":case"L":e=An(vt.Month,1,1);break;case"MM":case"LL":e=An(vt.Month,2,1);break;case"MMM":e=Vt(It.Months,Nt.Abbreviated);break;case"MMMM":e=Vt(It.Months,Nt.Wide);break;case"MMMMM":e=Vt(It.Months,Nt.Narrow);break;case"LLL":e=Vt(It.Months,Nt.Abbreviated,$r.Standalone);break;case"LLLL":e=Vt(It.Months,Nt.Wide,$r.Standalone);break;case"LLLLL":e=Vt(It.Months,Nt.Narrow,$r.Standalone);break;case"w":e=fT(1);break;case"ww":e=fT(2);break;case"W":e=fT(1,!0);break;case"d":e=An(vt.Date,1);break;case"dd":e=An(vt.Date,2);break;case"c":case"cc":e=An(vt.Day,1);break;case"ccc":e=Vt(It.Days,Nt.Abbreviated,$r.Standalone);break;case"cccc":e=Vt(It.Days,Nt.Wide,$r.Standalone);break;case"ccccc":e=Vt(It.Days,Nt.Narrow,$r.Standalone);break;case"cccccc":e=Vt(It.Days,Nt.Short,$r.Standalone);break;case"E":case"EE":case"EEE":e=Vt(It.Days,Nt.Abbreviated);break;case"EEEE":e=Vt(It.Days,Nt.Wide);break;case"EEEEE":e=Vt(It.Days,Nt.Narrow);break;case"EEEEEE":e=Vt(It.Days,Nt.Short);break;case"a":case"aa":case"aaa":e=Vt(It.DayPeriods,Nt.Abbreviated);break;case"aaaa":e=Vt(It.DayPeriods,Nt.Wide);break;case"aaaaa":e=Vt(It.DayPeriods,Nt.Narrow);break;case"b":case"bb":case"bbb":e=Vt(It.DayPeriods,Nt.Abbreviated,$r.Standalone,!0);break;case"bbbb":e=Vt(It.DayPeriods,Nt.Wide,$r.Standalone,!0);break;case"bbbbb":e=Vt(It.DayPeriods,Nt.Narrow,$r.Standalone,!0);break;case"B":case"BB":case"BBB":e=Vt(It.DayPeriods,Nt.Abbreviated,$r.Format,!0);break;case"BBBB":e=Vt(It.DayPeriods,Nt.Wide,$r.Format,!0);break;case"BBBBB":e=Vt(It.DayPeriods,Nt.Narrow,$r.Format,!0);break;case"h":e=An(vt.Hours,1,-12);break;case"hh":e=An(vt.Hours,2,-12);break;case"H":e=An(vt.Hours,1);break;case"HH":e=An(vt.Hours,2);break;case"m":e=An(vt.Minutes,1);break;case"mm":e=An(vt.Minutes,2);break;case"s":e=An(vt.Seconds,1);break;case"ss":e=An(vt.Seconds,2);break;case"S":e=An(vt.FractionalSeconds,1);break;case"SS":e=An(vt.FractionalSeconds,2);break;case"SSS":e=An(vt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=j_(wo.Short);break;case"ZZZZZ":e=j_(wo.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=j_(wo.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=j_(wo.Long);break;default:return null}return pT[t]=e,e}(f);d+=g?g(i,n,u):"''"===f?"'":f.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),d}function U_(t,e,n){const r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function To(t,e){const n=function Bz(t){return Br(t)[Ft.LocaleId]}(t);if(Sf[n]=Sf[n]||{},Sf[n][e])return Sf[n][e];let r="";switch(e){case"shortDate":r=L_(t,fi.Short);break;case"mediumDate":r=L_(t,fi.Medium);break;case"longDate":r=L_(t,fi.Long);break;case"fullDate":r=L_(t,fi.Full);break;case"shortTime":r=F_(t,fi.Short);break;case"mediumTime":r=F_(t,fi.Medium);break;case"longTime":r=F_(t,fi.Long);break;case"fullTime":r=F_(t,fi.Full);break;case"short":const i=To(t,"shortTime"),s=To(t,"shortDate");r=B_(V_(t,fi.Short),[i,s]);break;case"medium":const o=To(t,"mediumTime"),a=To(t,"mediumDate");r=B_(V_(t,fi.Medium),[o,a]);break;case"long":const u=To(t,"longTime"),d=To(t,"longDate");r=B_(V_(t,fi.Long),[u,d]);break;case"full":const f=To(t,"fullTime"),g=To(t,"fullDate");r=B_(V_(t,fi.Full),[f,g])}return r&&(Sf[n][e]=r),r}function B_(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return null!=e&&r in e?e[r]:n})),t}function is(t,e,n="-",r,i){let s="";(t<0||i&&t<=0)&&(i?t=1-t:(t=-t,s=n));let o=String(t);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function An(t,e,n=0,r=!1,i=!1){return function(s,o){let a=function n3(t,e){switch(t){case vt.FullYear:return e.getFullYear();case vt.Month:return e.getMonth();case vt.Date:return e.getDate();case vt.Hours:return e.getHours();case vt.Minutes:return e.getMinutes();case vt.Seconds:return e.getSeconds();case vt.FractionalSeconds:return e.getMilliseconds();case vt.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}(t,s);if((n>0||a>-n)&&(a+=n),t===vt.Hours)0===a&&-12===n&&(a=12);else if(t===vt.FractionalSeconds)return function t3(t,e){return is(t,3).substring(0,e)}(a,e);const u=Ui(o,mn.MinusSign);return is(a,e,u,r,i)}}function Vt(t,e,n=$r.Format,r=!1){return function(i,s){return function r3(t,e,n,r,i,s){switch(n){case It.Months:return function Hz(t,e,n){const r=Br(t),s=Bi([r[Ft.MonthsFormat],r[Ft.MonthsStandalone]],e);return Bi(s,n)}(e,i,r)[t.getMonth()];case It.Days:return function $z(t,e,n){const r=Br(t),s=Bi([r[Ft.DaysFormat],r[Ft.DaysStandalone]],e);return Bi(s,n)}(e,i,r)[t.getDay()];case It.DayPeriods:const o=t.getHours(),a=t.getMinutes();if(s){const d=function Wz(t){const e=Br(t);return QN(e),(e[Ft.ExtraData][2]||[]).map(r=>"string"==typeof r?hT(r):[hT(r[0]),hT(r[1])])}(e),f=function Zz(t,e,n){const r=Br(t);QN(r);const s=Bi([r[Ft.ExtraData][0],r[Ft.ExtraData][1]],e)||[];return Bi(s,n)||[]}(e,i,r),g=d.findIndex(_=>{if(Array.isArray(_)){const[y,E]=_,D=o>=y.hours&&a>=y.minutes,b=o<E.hours||o===E.hours&&a<E.minutes;if(y.hours<E.hours){if(D&&b)return!0}else if(D||b)return!0}else if(_.hours===o&&_.minutes===a)return!0;return!1});if(-1!==g)return f[g]}return function jz(t,e,n){const r=Br(t),s=Bi([r[Ft.DayPeriodsFormat],r[Ft.DayPeriodsStandalone]],e);return Bi(s,n)}(e,i,r)[o<12?0:1];case It.Eras:return function qz(t,e){return Bi(Br(t)[Ft.Eras],e)}(e,r)[t.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${n}`)}}(i,s,t,e,n,r)}}function j_(t){return function(e,n,r){const i=-1*r,s=Ui(n,mn.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case wo.Short:return(i>=0?"+":"")+is(o,2,s)+is(Math.abs(i%60),2,s);case wo.ShortGMT:return"GMT"+(i>=0?"+":"")+is(o,1,s);case wo.Long:return"GMT"+(i>=0?"+":"")+is(o,2,s)+":"+is(Math.abs(i%60),2,s);case wo.Extended:return 0===r?"Z":(i>=0?"+":"")+is(o,2,s)+":"+is(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${t}"`)}}}const i3=0,$_=4;function YN(t){return U_(t.getFullYear(),t.getMonth(),t.getDate()+($_-t.getDay()))}function fT(t,e=!1){return function(n,r){let i;if(e){const s=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,o=n.getDate();i=1+Math.floor((o+s)/7)}else{const s=YN(n),o=function s3(t){const e=U_(t,i3,1).getDay();return U_(t,0,1+(e<=$_?$_:$_+7)-e)}(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return is(i,t,Ui(r,mn.MinusSign))}}function H_(t,e=!1){return function(n,r){return is(YN(n).getFullYear(),t,Ui(r,mn.MinusSign),e)}}const pT={};function JN(t,e){t=t.replace(/:/g,"");const n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function XN(t){return t instanceof Date&&!isNaN(t.valueOf())}class C3{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Pf=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new C3(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),sM(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{sM(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(n,r){return!0}static#e=this.\u0275fac=function(r){return new(r||t)(Ae(rs),Ae(vo),Ae(M_))};static#t=this.\u0275dir=On({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return t})();function sM(t,e){t.context.$implicit=e.item}let ET=(()=>{class t{constructor(n,r){this._viewContainer=n,this._context=new A3,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){oM("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){oM("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}static#e=this.\u0275fac=function(r){return new(r||t)(Ae(rs),Ae(vo))};static#t=this.\u0275dir=On({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return t})();class A3{constructor(){this.$implicit=null,this.ngIf=null}}function oM(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${wt(e)}'.`)}const U3=new ce("DATE_PIPE_DEFAULT_TIMEZONE"),B3=new ce("DATE_PIPE_DEFAULT_OPTIONS");let DT=(()=>{class t{constructor(n,r,i){this.locale=n,this.defaultTimezone=r,this.defaultOptions=i}transform(n,r,i,s){if(null==n||""===n||n!=n)return null;try{return e3(n,r??this.defaultOptions?.dateFormat??"mediumDate",s||this.locale,i??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(o){throw function ss(t,e){return new W(2100,!1)}()}}static#e=this.\u0275fac=function(r){return new(r||t)(Ae(Io,16),Ae(U3,24),Ae(B3,24))};static#t=this.\u0275pipe=kn({name:"date",type:t,pure:!0,standalone:!0})}return t})(),Q3=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=vr({type:t});static#n=this.\u0275inj=mr({})}return t})();function z_(t){return"server"===t}let e9=(()=>{class t{static#e=this.\u0275prov=De({token:t,providedIn:"root",factory:()=>new t9(re(Vi),window)})}return t})();class t9{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const n=function n9(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&"function"==typeof t.body.attachShadow){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class A9 extends Nz{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class RT extends A9{static makeCurrent(){!function xz(t){aT||(aT=t)}(new RT)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function b9(){return Nf=Nf||document.querySelector("base"),Nf?Nf.getAttribute("href"):null}();return null==n?null:function S9(t){Z_=Z_||document.createElement("a"),Z_.setAttribute("href",t);const e=Z_.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){Nf=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function w3(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,s]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let Z_,Nf=null,P9=(()=>{class t{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=De({token:t,factory:t.\u0275fac})}return t})();const PT=new ce("EventManagerPlugins");let pM=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new W(5101,!1);return this._eventNameToPlugin.set(n,r),r}static#e=this.\u0275fac=function(r){return new(r||t)(re(PT),re(yt))};static#t=this.\u0275prov=De({token:t,factory:t.\u0275fac})}return t})();class gM{constructor(e){this._doc=e}}const xT="ng-app-id";let mM=(()=>{class t{constructor(n,r,i,s={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=z_(s),this.resetHostNodes()}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${xT}="${this.appId}"]`);if(n?.length){const r=new Map;return n.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){const i=this.styleRef;if(i.has(n)){const s=i.get(n);return s.usage+=r,s.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===n)return i.delete(r),s.removeAttribute(xT),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(xT,this.appId),o}}addStyleToHost(n,r){const i=this.getStyleElement(n,r);n.appendChild(i);const s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||t)(re(Vi),re(Ym),re(vS,8),re(Ms))};static#t=this.\u0275prov=De({token:t,factory:t.\u0275fac})}return t})();const NT={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},MT=/%COMP%/g,O9=new ce("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function yM(t,e){return e.map(n=>n.replace(MT,t))}let vM=(()=>{class t{constructor(n,r,i,s,o,a,u,d=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=u,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=z_(a),this.defaultRenderer=new OT(n,o,u,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Jr.ShadowDom&&(r={...r,encapsulation:Jr.Emulated});const i=this.getOrCreateRenderer(n,r);return i instanceof EM?i.applyToHost(n):i instanceof kT&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,u=this.eventManager,d=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(r.encapsulation){case Jr.Emulated:s=new EM(u,d,r,this.appId,f,o,a,g);break;case Jr.ShadowDom:return new V9(u,d,n,r,o,a,this.nonce,g);default:s=new kT(u,d,r,f,o,a,g)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||t)(re(pM),re(mM),re(Ym),re(O9),re(Vi),re(Ms),re(yt),re(vS))};static#t=this.\u0275prov=De({token:t,factory:t.\u0275fac})}return t})();class OT{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(NT[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(IM(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(IM(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new W(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const s=NT[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=NT[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(da.DashCase|da.Important)?e.style.setProperty(n,r,i&da.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&da.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e[n]=r}setValue(e,n){e.nodeValue=n}listen(e,n,r){if("string"==typeof e&&!(e=Fl().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))&&n.preventDefault()}}}function IM(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class V9 extends OT{constructor(e,n,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const d=yM(i.id,i.styles);for(const f of d){const g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=f,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class kT extends OT{constructor(e,n,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?yM(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class EM extends kT{constructor(e,n,r,i,s,o,a,u){const d=i+"-"+r.id;super(e,n,r,s,o,a,u,d),this.contentAttr=function k9(t){return"_ngcontent-%COMP%".replace(MT,t)}(d),this.hostAttr=function L9(t){return"_nghost-%COMP%".replace(MT,t)}(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}let U9=(()=>{class t extends gM{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||t)(re(Vi))};static#t=this.\u0275prov=De({token:t,factory:t.\u0275fac})}return t})();const wM=["alt","control","meta","shift"],B9={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},j9={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let $9=(()=>{class t extends gM{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i){const s=t.parseEventName(r),o=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Fl().onAndCancel(n,s.domEventName,o))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=t._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),wM.forEach(d=>{const f=r.indexOf(d);f>-1&&(r.splice(f,1),o+=d+".")}),o+=s,0!=r.length||0===s.length)return null;const u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(n,r){let i=B9[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),wM.forEach(o=>{o!==i&&(0,j9[o])(n)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{t.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return"esc"===n?"escape":n}static#e=this.\u0275fac=function(r){return new(r||t)(re(Vi))};static#t=this.\u0275prov=De({token:t,factory:t.\u0275fac})}return t})();const DM=[{provide:Ms,useValue:"browser"},{provide:yS,useValue:function H9(){RT.makeCurrent()},multi:!0},{provide:Vi,useFactory:function z9(){return function TU(t){mE=t}(document),document},deps:[]}],G9=yN(_z,"browser",DM),W9=new ce(""),CM=[{provide:R_,useClass:class R9{addToWindow(e){_t.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new W(5103,!1);return s},_t.getAllAngularTestabilities=()=>e.getAllTestabilities(),_t.getAllAngularRootElements=()=>e.getAllRootElements(),_t.frameworkStabilizers||(_t.frameworkStabilizers=[]),_t.frameworkStabilizers.push(r=>{const i=_t.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(u){o=o||u,s--,0==s&&r(o)};i.forEach(u=>{u.whenStable(a)})})}findTestabilityInTree(e,n,r){return null==n?null:e.getTestability(n)??(r?Fl().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:fN,useClass:Zw,deps:[yt,Kw,R_]},{provide:Zw,useClass:Zw,deps:[yt,Kw,R_]}],AM=[{provide:CE,useValue:"root"},{provide:po,useFactory:function q9(){return new po},deps:[]},{provide:PT,useClass:U9,multi:!0,deps:[Vi,yt,Ms]},{provide:PT,useClass:$9,multi:!0,deps:[Vi]},vM,mM,pM,{provide:CS,useExisting:vM},{provide:class r9{},useClass:P9,deps:[]},[]];let Z9=(()=>{class t{constructor(n){}static withServerTransition(n){return{ngModule:t,providers:[{provide:Ym,useValue:n.appId}]}}static#e=this.\u0275fac=function(r){return new(r||t)(re(W9,12))};static#t=this.\u0275mod=vr({type:t});static#n=this.\u0275inj=mr({providers:[...AM,...CM],imports:[Q3,yz]})}return t})(),bM=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static#e=this.\u0275fac=function(r){return new(r||t)(re(Vi))};static#t=this.\u0275prov=De({token:t,factory:function(r){let i=null;return i=r?new r:function Q9(){return new bM(re(Vi))}(),i},providedIn:"root"})}return t})();typeof window<"u"&&window;var Vs=Ve(534);(0,Vs.registerVersion)("firebase","10.7.0","app");class r6 extends dt{constructor(e,n){super()}schedule(e,n=0){return this}}const K_={setInterval(t,e,...n){const{delegate:r}=K_;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=K_;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};class xM extends r6{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return K_.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;null!=n&&K_.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Ne(r,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}const FT={now:()=>(FT.delegate||Date).now(),delegate:void 0};class Mf{constructor(e,n=Mf.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}}Mf.now=FT.now;class NM extends Mf{constructor(e,n=Mf.now){super(e,n),this.actions=[],this._active=!1}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}}const o6=new class s6 extends NM{}(class i6 extends xM{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}}),VT=new NM(xM);function sr(t,e,n){const r=I(t)||e||n?{next:t,error:e,complete:n}:t;return r?U((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(de(s,u=>{var d;null===(d=r.next)||void 0===d||d.call(r,u),s.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),s.complete()},u=>{var d;a=!1,null===(d=r.error)||void 0===d||d.call(r,u),s.error(u)},()=>{var u,d;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(d=r.finalize)||void 0===d||d.call(r)}))}):fn}const Of=new af("ANGULARFIRE2_VERSION");class UT{constructor(){return((t,e)=>{const n=(0,Vs.getApps)(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r})(u6)}}const u6="app-check";function Ul(){}class MM{zone;delegate;constructor(e,n=o6){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},n,r)}}class c6{zone;task=null;constructor(e){this.zone=e}call(e,n){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ul,{},Ul,Ul)),n.pipe(sr({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let BT=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new MM(Zone.current)),this.insideAngular=n.run(()=>new MM(Zone.current,VT)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(re(yt))};static \u0275prov=De({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Bl(){const t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return t}function OM(t){return t.pipe(Gn(Bl().outsideAngular))}function Hr(t){return function d6(t){return function(n){return(n=n.lift(new c6(t.ngZone))).pipe(pr(t.outsideAngular),Gn(t.insideAngular))}}(Bl())(t)}var ji=Ve(106);ji.Z.registerVersion("firebase","10.7.0","app-compat");const g6=["ngOnDestroy"];class kM{constructor(e){return e}}const kf=new ce("angularfire2.app.options"),Lf=new ce("angularfire2.app.name");function Q_(t,e,n){const i="object"==typeof n&&n||{};i.name=i.name||"string"==typeof n&&n||"[DEFAULT]";const o=ji.Z.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>ji.Z.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(o.options)){const a=!!module.hot;y6("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new kM(o)}const y6=(t,...e)=>{},v6={provide:kM,useFactory:Q_,deps:[kf,yt,[new Pu,Lf]]};let I6=(()=>{class t{static initializeApp(n,r){return{ngModule:t,providers:[{provide:kf,useValue:n},{provide:Lf,useValue:r}]}}constructor(n){ji.Z.registerVersion("angularfire",Of.full,"core"),ji.Z.registerVersion("angularfire",Of.full,"app-compat"),ji.Z.registerVersion("angular",AS.full,n.toString())}static \u0275fac=function(r){return new(r||t)(re(Ms))};static \u0275mod=vr({type:t});static \u0275inj=mr({providers:[v6]})}return t})();function jT(t,e,n,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(s)return function E6(t,e){try{return t.toString()===e.toString()}catch{return t===e}}(i,o)||(LM("error",`${e} was already initialized on the ${n} Firebase App with different settings.${w6?" You may need to reload as Firebase is not HMR aware.":""}`),LM("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}const w6=typeof module<"u"&&!!module.hot,LM=(t,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[],Ve(377);class T6 extends j{constructor(e=1/0,n=1/0,r=FT){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){const{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;n||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){const{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=n.now();let a=0;for(let u=1;u<r.length&&r[u]<=o;u+=2)a=u;a&&r.splice(0,a+1)}}}function FM(t,e,n){let r,i=!1;return t&&"object"==typeof t?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t):r=t??1/0,Me({connector:()=>new T6(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}const Y_=xe(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function os(t,e){return U((n,r)=>{let i=0;n.subscribe(de(r,s=>t.call(e,s,i++)&&r.next(s)))})}function jl(t){return t<=0?()=>wn:U((e,n)=>{let r=0;e.subscribe(de(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function J_(t){return U((e,n)=>{let r=!1;e.subscribe(de(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function VM(t=D6){return U((e,n)=>{let r=!1;e.subscribe(de(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function D6(){return new Y_}function ya(t,e){const n=arguments.length>=2;return r=>r.pipe(t?os((i,s)=>t(i,s,r)):fn,jl(1),n?J_(e):VM(()=>new Y_))}function UM(t,e){return I(e)?ut(()=>t,e):ut(()=>t)}const BM=new ce("angularfire2.auth.use-emulator"),jM=new ce("angularfire2.auth.settings"),$M=new ce("angularfire2.auth.tenant-id"),HM=new ce("angularfire2.auth.langugage-code"),qM=new ce("angularfire2.auth.use-device-language"),zM=new ce("angularfire.auth.persistence"),GM=(t,e,n,r,i,s,o,a)=>jT(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{const u=e.runOutsideAngular(()=>t.auth());if(n&&u.useEmulator(...n),r&&(u.tenantId=r),u.languageCode=i,s&&u.useDeviceLanguage(),o)for(const[d,f]of Object.entries(o))u.settings[d]=f;return a&&u.setPersistence(a),u},[n,r,i,s,o,a]);let $T=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,s,o,a,u,d,f,g,_,y){const E=new j,D=$(void 0).pipe(Gn(o.outsideAngular),ut(()=>s.runOutsideAngular(()=>Promise.resolve().then(Ve.bind(Ve,377)))),ve(()=>Q_(n,s,r)),ve(b=>GM(b,s,a,d,f,g,u,_)),FM({bufferSize:1,refCount:!1}));if(z_(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=$(null);else{D.pipe(ya()).subscribe();const b=D.pipe(ut(O=>O.getRedirectResult().then(K=>K,()=>null)),Hr,FM({bufferSize:1,refCount:!1})),M=D.pipe(ut(O=>new st(K=>({unsubscribe:s.runOutsideAngular(()=>O.onAuthStateChanged(ie=>K.next(ie),ie=>K.error(ie),()=>K.complete()))})))),R=D.pipe(ut(O=>new st(K=>({unsubscribe:s.runOutsideAngular(()=>O.onIdTokenChanged(ie=>K.next(ie),ie=>K.error(ie),()=>K.complete()))}))));this.authState=b.pipe(UM(M),pr(o.outsideAngular),Gn(o.insideAngular)),this.user=b.pipe(UM(R),pr(o.outsideAngular),Gn(o.insideAngular)),this.idToken=this.user.pipe(ut(O=>O?A(O.getIdToken()):$(null))),this.idTokenResult=this.user.pipe(ut(O=>O?A(O.getIdTokenResult()):$(null))),this.credential=G(b,E,this.authState.pipe(os(O=>!O))).pipe(ve(O=>O?.user?O:null),pr(o.outsideAngular),Gn(o.insideAngular))}return((t,e,n,r={})=>new Proxy(t,{get:(i,s)=>n.runOutsideAngular(()=>{if(t[s])return r?.spy?.get&&r.spy.get(s,t[s]),t[s];if(g6.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const u=a?.[s];return"function"==typeof u?u.bind(a):u?.then?u.then(d=>n.run(()=>d)):n.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>o[u],apply:(a,u,d)=>o.then(f=>{const g=f?.(...d);return r?.spy?.apply&&r.spy.apply(s,d,g),g})})})}))(this,D,s,{spy:{apply:(b,M,R)=>{(b.startsWith("signIn")||b.startsWith("createUser"))&&R.then(O=>E.next(O))}}})}static \u0275fac=function(r){return new(r||t)(re(kf),re(Lf,8),re(Ms),re(yt),re(BT),re(BM,8),re(jM,8),re($M,8),re(HM,8),re(qM,8),re(zM,8),re(UT,8))};static \u0275prov=De({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),A6=(()=>{class t{constructor(){ji.Z.registerVersion("angularfire",Of.full,"auth-compat")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=vr({type:t});static \u0275inj=mr({providers:[$T]})}return t})();function HT(...t){return function b6(){return ui(1)}()(A(t,ps(t)))}function X_(...t){const e=ps(t);return U((n,r)=>{(e?HT(t,n,e):HT(t,n)).subscribe(r)})}function qT(){return U((t,e)=>{let n,r=!1;t.subscribe(de(e,i=>{const s=n;n=i,r&&e.next([s,i]),r=!0}))})}function ey(t,e){return U(function S6(t,e,n,r,i){return(s,o)=>{let a=n,u=e,d=0;s.subscribe(de(o,f=>{const g=d++;u=a?t(u,f,g):(a=!0,f),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}(t,e,arguments.length>=2,!0))}var le,z=Ve(861),ty=Ve(537),Us=Ve(879),rt=Ve(58),R6=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},as={},zT=zT||{},Be=R6||self;function ny(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Ff(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var GT="closure_uid_"+(1e9*Math.random()>>>0),x6=0;function N6(t,e,n){return t.call.apply(t.bind,arguments)}function M6(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Dr(t,e,n){return(Dr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?N6:M6).apply(null,arguments)}function ry(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Kn(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function va(){this.s=this.s,this.o=this.o}va.prototype.s=!1,va.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function P6(t){Object.prototype.hasOwnProperty.call(t,GT)&&t[GT]||(t[GT]=++x6)}(this)},va.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const WM=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function WT(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function ZM(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(ny(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function Cr(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Cr.prototype.h=function(){this.defaultPrevented=!0};var k6=function(){if(!Be.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const n=()=>{};Be.addEventListener("test",n,e),Be.removeEventListener("test",n,e)}catch{}return t}();function Vf(t){return/^[\s\xa0]*$/.test(t)}function iy(){var t=Be.navigator;return t&&(t=t.userAgent)?t:""}function Bs(t){return-1!=iy().indexOf(t)}function ZT(t){return ZT[" "](t),t}ZT[" "]=function(){};var QT,t,F6=Bs("Opera"),$l=Bs("Trident")||Bs("MSIE"),KM=Bs("Edge"),KT=KM||$l,QM=Bs("Gecko")&&!(-1!=iy().toLowerCase().indexOf("webkit")&&!Bs("Edge"))&&!(Bs("Trident")||Bs("MSIE"))&&!Bs("Edge"),V6=-1!=iy().toLowerCase().indexOf("webkit")&&!Bs("Edge");function YM(){var t=Be.document;return t?t.documentMode:void 0}e:{var YT="",JT=(t=iy(),QM?/rv:([^\);]+)(\)|;)/.exec(t):KM?/Edge\/([\d\.]+)/.exec(t):$l?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):V6?/WebKit\/(\S+)/.exec(t):F6?/(?:Version)[ \/]?(\S+)/.exec(t):void 0);if(JT&&(YT=JT?JT[1]:""),$l){var XT=YM();if(null!=XT&&XT>parseFloat(YT)){QT=String(XT);break e}}QT=YT}var U6=Be.document&&$l&&(YM()||parseInt(QT,10))||void 0;function Uf(t,e){if(Cr.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(QM){e:{try{ZT(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:B6[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Uf.$.h.call(this)}}Kn(Uf,Cr);var B6={2:"touch",3:"pen",4:"mouse"};Uf.prototype.h=function(){Uf.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Bf="closure_listenable_"+(1e6*Math.random()|0),j6=0;function $6(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++j6,this.fa=this.ia=!1}function sy(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function tD(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function XM(t){const e={};for(const n in t)e[n]=t[n];return e}const e1="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function t1(t,e){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(let s=0;s<e1.length;s++)n=e1[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function oy(t){this.src=t,this.g={},this.h=0}function nD(t,e){var n=e.type;if(n in t.g){var s,r=t.g[n],i=WM(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(sy(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function rD(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}oy.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=rD(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):((e=new $6(e,this.src,s,!!r,i)).ia=n,t.push(e)),e};var iD="closure_lm_"+(1e6*Math.random()|0),sD={};function n1(t,e,n,r,i){if(r&&r.once)return i1(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)n1(t,e[s],n,r,i);return null}return n=cD(n),t&&t[Bf]?t.O(e,n,Ff(r)?!!r.capture:!!r,i):r1(t,e,n,!1,r,i)}function r1(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Ff(i)?!!i.capture:!!i,a=aD(t);if(a||(t[iD]=a=new oy(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function q6(){const e=z6;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)k6||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(o1(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function i1(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)i1(t,e[s],n,r,i);return null}return n=cD(n),t&&t[Bf]?t.P(e,n,Ff(r)?!!r.capture:!!r,i):r1(t,e,n,!0,r,i)}function s1(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)s1(t,e[s],n,r,i);else r=Ff(r)?!!r.capture:!!r,n=cD(n),t&&t[Bf]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=rD(s=t.g[e],n,r,i))&&(sy(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=aD(t))&&(e=t.g[e.toString()],t=-1,e&&(t=rD(e,n,r,i)),(n=-1<t?e[t]:null)&&oD(n))}function oD(t){if("number"!=typeof t&&t&&!t.fa){var e=t.src;if(e&&e[Bf])nD(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(o1(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=aD(e))?(nD(n,t),0==n.h&&(n.src=null,e[iD]=null)):sy(t)}}}function o1(t){return t in sD?sD[t]:sD[t]="on"+t}function z6(t,e){if(t.fa)t=!0;else{e=new Uf(e,this);var n=t.listener,r=t.la||t.src;t.ia&&oD(t),t=n.call(r,e)}return t}function aD(t){return(t=t[iD])instanceof oy?t:null}var uD="__closure_events_fn_"+(1e9*Math.random()>>>0);function cD(t){return"function"==typeof t?t:(t[uD]||(t[uD]=function(e){return t.handleEvent(e)}),t[uD])}function Qn(){va.call(this),this.i=new oy(this),this.S=this,this.J=null}function or(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,"string"==typeof e)e=new Cr(e,t);else if(e instanceof Cr)e.target=e.target||t;else{var i=e;t1(e=new Cr(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=ay(o,r,!0,e)&&i}if(i=ay(o=e.g=t,r,!0,e)&&i,i=ay(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=ay(o=e.g=n[s],r,!1,e)&&i}function ay(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,u=o.la||o.src;o.ia&&nD(t.i,o),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Kn(Qn,va),Qn.prototype[Bf]=!0,Qn.prototype.removeEventListener=function(t,e,n,r){s1(this,t,e,n,r)},Qn.prototype.N=function(){if(Qn.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)sy(n[r]);delete t.g[e],t.h--}}this.J=null},Qn.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},Qn.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var lD=Be.JSON.stringify;function W6(){var t=dD;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var a1=new class G6{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new K6,t=>t.reset());class K6{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function Q6(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function Y6(t){Be.setTimeout(()=>{throw t},0)}let jf,$f=!1,dD=new class Z6{constructor(){this.h=this.g=null}add(e,n){const r=a1.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},u1=()=>{const t=Be.Promise.resolve(void 0);jf=()=>{t.then(J6)}};var J6=()=>{for(var t;t=W6();){try{t.h.call(t.g)}catch(n){Y6(n)}var e=a1;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}$f=!1};function uy(t,e){Qn.call(this),this.h=t||1,this.g=e||Be,this.j=Dr(this.qb,this),this.l=Date.now()}function hD(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function fD(t,e,n){if("function"==typeof t)n&&(t=Dr(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Dr(t.handleEvent,t)}return 2147483647<Number(e)?-1:Be.setTimeout(t,e||0)}function c1(t){t.g=fD(()=>{t.g=null,t.i&&(t.i=!1,c1(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}Kn(uy,Qn),(le=uy.prototype).ga=!1,le.T=null,le.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),or(this,"tick"),this.ga&&(hD(this),this.start()))}},le.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},le.N=function(){uy.$.N.call(this),hD(this),delete this.g};class X6 extends va{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:c1(this)}N(){super.N(),this.g&&(Be.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Hf(t){va.call(this),this.h=t,this.g={}}Kn(Hf,va);var l1=[];function d1(t,e,n,r){Array.isArray(n)||(n&&(l1[0]=n.toString()),n=l1);for(var i=0;i<n.length;i++){var s=n1(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function h1(t){tD(t.g,function(e,n){this.g.hasOwnProperty(n)&&oD(e)},t),t.g={}}function cy(){this.g=!0}function Hl(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function rG(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return lD(n)}catch{return e}}(t,n)+(r?" "+r:"")})}Hf.prototype.N=function(){Hf.$.N.call(this),h1(this)},Hf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},cy.prototype.Ea=function(){this.g=!1},cy.prototype.info=function(){};var ju={},f1=null;function ly(){return f1=f1||new Qn}function p1(t){Cr.call(this,ju.Ta,t)}function qf(t){const e=ly();or(e,new p1(e))}function g1(t,e){Cr.call(this,ju.STAT_EVENT,t),this.stat=e}function qr(t){const e=ly();or(e,new g1(e,t))}function m1(t,e){Cr.call(this,ju.Ua,t),this.size=e}function zf(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Be.setTimeout(function(){t()},e)}ju.Ta="serverreachability",Kn(p1,Cr),ju.STAT_EVENT="statevent",Kn(g1,Cr),ju.Ua="timingevent",Kn(m1,Cr);var dy={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},_1={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function pD(){}function v1(){}pD.prototype.h=null;var _D,Gf={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function gD(){Cr.call(this,"d")}function mD(){Cr.call(this,"c")}function hy(){}function Wf(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Hf(this),this.P=iG,this.V=new uy(t=KT?125:void 0),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new I1}function I1(){this.i=null,this.g="",this.h=!1}Kn(gD,Cr),Kn(mD,Cr),Kn(hy,pD),hy.prototype.g=function(){return new XMLHttpRequest},hy.prototype.i=function(){return{}},_D=new hy;var iG=45e3,E1={},yD={};function vD(t,e,n){t.L=1,t.A=my(Do(e)),t.u=n,t.S=!0,w1(t,null)}function w1(t,e){t.G=Date.now(),Zf(t),t.B=Do(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),N1(n.i,"t",r),t.o=0,n=t.l.J,t.h=new I1,t.g=nO(t.l,n?e:null,!t.u),0<t.O&&(t.M=new X6(Dr(t.Pa,t,t.g),t.O)),d1(t.U,t.g,"readystatechange",t.nb),e=t.I?XM(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),qf(),function eG(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var d=a[u].split("=");if(1<d.length){var f=d[0];d=d[1];var g=f.split("_");o=2<=g.length&&"type"==g[1]?o+(f+"=")+d+"&":o+(f+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o})}(t.j,t.v,t.B,t.m,t.W,t.u)}function T1(t){return!!t.g&&"GET"==t.v&&2!=t.L&&t.l.Ha}function D1(t,e,n){let i,r=!0;for(;!t.J&&t.o<n.length;){if(i=sG(t,n),i==yD){4==e&&(t.s=4,qr(14),r=!1),Hl(t.j,t.m,null,"[Incomplete Response]");break}if(i==E1){t.s=4,qr(15),Hl(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}Hl(t.j,t.m,i,null),ID(t,i)}T1(t)&&0!=t.o&&(t.h.g=t.h.g.slice(t.o),t.o=0),4!=e||0!=n.length||t.h.h||(t.s=1,qr(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,(e=t.l).g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),bD(e),e.M=!0,qr(11))):(Hl(t.j,t.m,n,"[Invalid Chunked Response]"),$u(t),Kf(t))}function sG(t,e){var n=t.o,r=e.indexOf("\n",n);return-1==r?yD:(n=Number(e.substring(n,r)),isNaN(n)?E1:(r+=1)+n>e.length?yD:(e=e.slice(r,r+n),t.o=r+n,e))}function Zf(t){t.Y=Date.now()+t.P,C1(t,t.P)}function C1(t,e){if(null!=t.C)throw Error("WatchDog timer not null");t.C=zf(Dr(t.lb,t),e)}function fy(t){t.C&&(Be.clearTimeout(t.C),t.C=null)}function Kf(t){0==t.l.H||t.J||J1(t.l,t)}function $u(t){fy(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,hD(t.V),h1(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function ID(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||ED(n.i,t)))if(!t.K&&ED(n.i,t)&&3==n.H){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break e;wy(n),Iy(n)}AD(n),qr(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=zf(Dr(n.ib,n),6e3));if(1>=k1(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else qu(n,11)}else if((t.K||n.g==t)&&wy(n),!Vf(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let d=i[e];if(n.V=d[0],d=d[1],2==n.H)if("c"==d[0]){n.K=d[1],n.pa=d[2];const f=d[3];null!=f&&(n.ra=f,n.l.info("VER="+n.ra));const g=d[4];null!=g&&(n.Ga=g,n.l.info("SVER="+n.Ga));const _=d[5];null!=_&&"number"==typeof _&&0<_&&(n.L=r=1.5*_,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const y=t.g;if(y){const E=y.g?y.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(E){var s=r.i;s.g||-1==E.indexOf("spdy")&&-1==E.indexOf("quic")&&-1==E.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(wD(s,s.h),s.h=null))}if(r.F){const D=y.g?y.g.getResponseHeader("X-HTTP-Session-Id"):null;D&&(r.Da=D,Gt(r.I,r.F,D))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=t;if((r=n).wa=tO(r,r.J?r.pa:null,r.Y),o.K){L1(r.i,o);var a=o,u=r.L;u&&a.setTimeout(u),a.C&&(fy(a),Zf(a)),r.g=o}else Q1(r);0<n.j.length&&Ey(n)}else"stop"!=d[0]&&"close"!=d[0]||qu(n,7);else 3==n.H&&("stop"==d[0]||"close"==d[0]?"stop"==d[0]?qu(n,7):CD(n):"noop"!=d[0]&&n.h&&n.h.Aa(d),n.A=0)}qf()}catch{}}function A1(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(ny(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function aG(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(ny(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}(t),r=function oG(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(ny(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}(le=Wf.prototype).setTimeout=function(t){this.P=t},le.nb=function(t){t=t.target;const e=this.M;e&&3==js(t)?e.l():this.Pa(t)},le.Pa=function(t){try{if(t==this.g)e:{const f=js(this.g);var e=this.g.Ia();if(this.g.da(),!(3>f)&&(3!=f||KT||this.g&&(this.h.h||this.g.ja()||q1(this.g)))){this.J||4!=f||7==e||qf(),fy(this);var n=this.g.da();this.ca=n;t:if(T1(this)){var r=q1(this.g);t="";var i=r.length,s=4==js(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){$u(this),Kf(this);var o="";break t}this.h.i=new Be.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function tG(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o})}(this.j,this.v,this.B,this.m,this.W,f,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Vf(a)){var d=a;break t}}d=null}if(!(n=d)){this.i=!1,this.s=3,qr(12),$u(this),Kf(this);break e}Hl(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ID(this,n)}this.S?(D1(this,f,o),KT&&this.i&&3==f&&(d1(this.U,this.V,"tick",this.mb),this.V.start())):(Hl(this.j,this.m,o,null),ID(this,o)),4==f&&$u(this),this.i&&!this.J&&(4==f?J1(this.l,this):(this.i=!1,Zf(this)))}else(function CG(t){const e={};t=(t.g&&2<=js(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<t.length;r++){if(Vf(t[r]))continue;var n=Q6(t[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}!function H6(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,function(r){return r.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,qr(12)):(this.s=0,qr(13)),$u(this),Kf(this)}}}catch{}},le.mb=function(){if(this.g){var t=js(this.g),e=this.g.ja();this.o<e.length&&(fy(this),D1(this,t,e),this.i&&4!=t&&Zf(this))}},le.cancel=function(){this.J=!0,$u(this)},le.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(function nG(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.B),2!=this.L&&(qf(),qr(17)),$u(this),this.s=2,Kf(this)):C1(this,this.Y-t)};var b1=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Hu(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Hu){this.h=t.h,py(this,t.j),this.s=t.s,this.g=t.g,gy(this,t.m),this.l=t.l;var e=t.i,n=new Jf;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),S1(this,n),this.o=t.o}else t&&(e=String(t).match(b1))?(this.h=!1,py(this,e[1]||"",!0),this.s=Qf(e[2]||""),this.g=Qf(e[3]||"",!0),gy(this,e[4]),this.l=Qf(e[5]||"",!0),S1(this,e[6]||"",!0),this.o=Qf(e[7]||"")):(this.h=!1,this.i=new Jf(null,this.h))}function Do(t){return new Hu(t)}function py(t,e,n){t.j=n?Qf(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function gy(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function S1(t,e,n){e instanceof Jf?(t.i=e,function pG(t,e){e&&!t.j&&(Ia(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(P1(this,r),N1(this,i,n))},t)),t.j=e}(t.i,t.h)):(n||(e=Yf(e,hG)),t.i=new Jf(e,t.h))}function Gt(t,e,n){t.i.set(e,n)}function my(t){return Gt(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Qf(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Yf(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,cG),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function cG(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Hu.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Yf(e,R1,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Yf(e,R1,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(Yf(n,"/"==n.charAt(0)?dG:lG,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Yf(n,fG)),t.join("")};var R1=/[#\/\?@]/g,lG=/[#\?:]/g,dG=/[#\?]/g,hG=/[#\?@]/g,fG=/#/g;function Jf(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Ia(t){t.g||(t.g=new Map,t.h=0,t.i&&function uG(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function P1(t,e){Ia(t),e=ql(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function x1(t,e){return Ia(t),e=ql(t,e),t.g.has(e)}function N1(t,e,n){P1(t,e),0<n.length&&(t.i=null,t.g.set(ql(t,e),WT(n)),t.h+=n.length)}function ql(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function M1(t){this.l=t||mG,t=Be.PerformanceNavigationTiming?0<(t=Be.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Be.g&&Be.g.Ka&&Be.g.Ka()&&Be.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(le=Jf.prototype).add=function(t,e){Ia(this),this.i=null,t=ql(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},le.forEach=function(t,e){Ia(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)},le.ta=function(){Ia(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n},le.Z=function(t){Ia(this);let e=[];if("string"==typeof t)x1(this,t)&&(e=e.concat(this.g.get(ql(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},le.set=function(t,e){return Ia(this),this.i=null,x1(this,t=ql(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},le.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},le.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};var mG=10;function O1(t){return!!t.h||!!t.g&&t.g.size>=t.j}function k1(t){return t.h?1:t.g?t.g.size:0}function ED(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function wD(t,e){t.g?t.g.add(e):t.h=e}function L1(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function F1(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return WT(t.i)}M1.prototype.cancel=function(){if(this.i=F1(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var _G=class{stringify(t){return Be.JSON.stringify(t,void 0)}parse(t){return Be.JSON.parse(t,void 0)}};function yG(){this.g=new _G}function vG(t,e,n){const r=n||"";try{A1(t,function(i,s){let o=i;Ff(i)&&(o=lD(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function _y(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Xf(t){this.l=t.ec||null,this.j=t.ob||!1}function yy(t,e){Qn.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=TD,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Kn(Xf,pD),Xf.prototype.g=function(){return new yy(this.l,this.j)},Xf.prototype.i=function(t){return function(){return t}}({}),Kn(yy,Qn);var TD=0;function V1(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function ep(t){t.readyState=4,t.l=null,t.j=null,t.A=null,tp(t)}function tp(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(le=yy.prototype).open=function(t,e){if(this.readyState!=TD)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,tp(this)},le.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||Be).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},le.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ep(this)),this.readyState=TD},le.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,tp(this)),this.g&&(this.readyState=3,tp(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Be.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;V1(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},le.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?ep(this):tp(this),3==this.readyState&&V1(this)}},le.Za=function(t){this.g&&(this.response=this.responseText=t,ep(this))},le.Ya=function(t){this.g&&(this.response=t,ep(this))},le.ka=function(){this.g&&ep(this)},le.setRequestHeader=function(t,e){this.v.append(t,e)},le.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},le.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(yy.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var EG=Be.JSON.parse;function ln(t){Qn.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=U1,this.L=this.M=!1}Kn(ln,Qn);var U1="",wG=/^https?$/i,TG=["POST","PUT"];function B1(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,j1(t),vy(t)}function j1(t){t.F||(t.F=!0,or(t,"complete"),or(t,"error"))}function $1(t){if(t.h&&typeof zT<"u"&&(!t.C[1]||4!=js(t)||2!=t.da()))if(t.v&&4==js(t))fD(t.La,0,t);else if(or(t,"readystatechange"),4==js(t)){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=0===o){var i=String(t.I).match(b1)[1]||null;!i&&Be.self&&Be.self.location&&(i=Be.self.location.protocol.slice(0,-1)),r=!wG.test(i?i.toLowerCase():"")}n=r}if(n)or(t,"complete"),or(t,"success");else{t.m=6;try{var s=2<js(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",j1(t)}}finally{vy(t)}}}function vy(t,e){if(t.g){H1(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||or(t,"ready");try{n.onreadystatechange=r}catch{}}}function H1(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(Be.clearTimeout(t.A),t.A=null)}function js(t){return t.g?t.g.readyState:0}function q1(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case U1:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function z1(t){let e="";return tD(t,function(n,r){e+=r,e+=":",e+=n,e+="\r\n"}),e}function DD(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=z1(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Gt(t,e,n))}function np(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function G1(t){this.Ga=0,this.j=[],this.l=new cy,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=np("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=np("baseRetryDelayMs",5e3,t),this.hb=np("retryDelaySeedMs",1e4,t),this.eb=np("forwardChannelMaxRetries",2,t),this.xa=np("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new M1(t&&t.concurrentRequestLimit),this.Ja=new yG,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function CD(t){if(W1(t),3==t.H){var e=t.W++,n=Do(t.I);if(Gt(n,"SID",t.K),Gt(n,"RID",e),Gt(n,"TYPE","terminate"),rp(t,n),(e=new Wf(t,t.l,e)).L=2,e.A=my(Do(n)),n=!1,Be.navigator&&Be.navigator.sendBeacon)try{n=Be.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&Be.Image&&((new Image).src=e.A,n=!0),n||(e.g=nO(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Zf(e)}eO(t)}function Iy(t){t.g&&(bD(t),t.g.cancel(),t.g=null)}function W1(t){Iy(t),t.u&&(Be.clearTimeout(t.u),t.u=null),wy(t),t.i.cancel(),t.m&&("number"==typeof t.m&&Be.clearTimeout(t.m),t.m=null)}function Ey(t){if(!O1(t.i)&&!t.m){t.m=!0;var e=t.Na;jf||u1(),$f||(jf(),$f=!0),dD.add(e,t),t.C=0}}function Z1(t,e){var n;n=e?e.m:t.W++;const r=Do(t.I);Gt(r,"SID",t.K),Gt(r,"RID",n),Gt(r,"AID",t.V),rp(t,r),t.o&&t.s&&DD(r,t.o,t.s),n=new Wf(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=K1(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),wD(t.i,n),vD(n,r,e)}function rp(t,e){t.na&&tD(t.na,function(n,r){Gt(e,r,n)}),t.h&&A1({},function(n,r){Gt(e,r,n)})}function K1(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Dr(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];-1==s?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let u=0;u<n;u++){let d=i[u].g;const f=i[u].map;if(d-=s,0>d)s=Math.max(0,i[u].g-100),a=!1;else try{vG(f,o,"req"+d+"_")}catch{r&&r(f)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function Q1(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;jf||u1(),$f||(jf(),$f=!0),dD.add(e,t),t.A=0}}function AD(t){return!(t.g||t.u||3<=t.A||(t.ba++,t.u=zf(Dr(t.Ma,t),X1(t,t.A)),t.A++,0))}function bD(t){null!=t.B&&(Be.clearTimeout(t.B),t.B=null)}function Y1(t){t.g=new Wf(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=Do(t.wa);Gt(e,"RID","rpc"),Gt(e,"SID",t.K),Gt(e,"AID",t.V),Gt(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Gt(e,"TO",t.qa),Gt(e,"TYPE","xmlhttp"),rp(t,e),t.o&&t.s&&DD(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=my(Do(e)),n.u=null,n.S=!0,w1(n,t)}function wy(t){null!=t.v&&(Be.clearTimeout(t.v),t.v=null)}function J1(t,e){var n=null;if(t.g==e){wy(t),bD(t),t.g=null;var r=2}else{if(!ED(t.i,e))return;n=e.F,L1(t.i,e),r=1}if(0!=t.H)if(e.i)if(1==r){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;or(r=ly(),new m1(r,n)),Ey(t)}else Q1(t);else if(3==(i=e.s)||0==i&&0<e.ca||!(1==r&&function AG(t,e){return!(k1(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.j=e.F.concat(t.j),0):1==t.H||2==t.H||t.C>=(t.cb?0:t.eb)||(t.m=zf(Dr(t.Na,t,e),X1(t,t.C)),t.C++,0)))}(t,e)||2==r&&AD(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:qu(t,5);break;case 4:qu(t,10);break;case 3:qu(t,6);break;default:qu(t,2)}}function X1(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function qu(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var r=Dr(t.pb,t);n||(n=new Hu("//www.google.com/images/cleardot.gif"),Be.location&&"http"==Be.location.protocol||py(n,"https"),my(n)),function IG(t,e){const n=new cy;if(Be.Image){const r=new Image;r.onload=ry(_y,n,r,"TestLoadImage: loaded",!0,e),r.onerror=ry(_y,n,r,"TestLoadImage: error",!1,e),r.onabort=ry(_y,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=ry(_y,n,r,"TestLoadImage: timeout",!1,e),Be.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else qr(2);t.H=0,t.h&&t.h.za(e),eO(t),W1(t)}function eO(t){if(t.H=0,t.ma=[],t.h){const e=F1(t.i);(0!=e.length||0!=t.j.length)&&(ZM(t.ma,e),ZM(t.ma,t.j),t.i.i.length=0,WT(t.j),t.j.length=0),t.h.ya()}}function tO(t,e,n){var r=n instanceof Hu?Do(n):new Hu(n);if(""!=r.g)e&&(r.g=e+"."+r.g),gy(r,r.m);else{var i=Be.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Hu(null);r&&py(s,r),e&&(s.g=e),i&&gy(s,i),n&&(s.l=n),r=s}return e=t.Da,(n=t.F)&&e&&Gt(r,n,e),Gt(r,"VER",t.ra),rp(t,r),r}function nO(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ln(t.Ha&&!t.va?new Xf({ob:n}):t.va)).Oa(t.J),e}function rO(){}function Ty(){if($l&&!(10<=Number(U6)))throw Error("Environmental error: no available transport.")}function pi(t,e){Qn.call(this),this.g=new G1(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Vf(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Vf(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new zl(this)}function iO(t){gD.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function sO(){mD.call(this),this.status=1}function zl(t){this.g=t}function us(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function SD(t,e,n){n||(n=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var s=t.g[3],o=(e=t.g[0])+(s^(n=t.g[1])&((i=t.g[2])^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=n+(o<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=n+((o=e+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(e^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}function Tt(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=0|t[i];r&&s==e||(n[i]=s,r=!1)}this.g=n}(le=ln.prototype).Oa=function(t){this.M=t},le.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():_D.g(),this.C=function y1(t){return t.h||(t.h=t.i())}(this.u?this.u:_D),this.g.onreadystatechange=Dr(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){return void B1(this,s)}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())n.set(s,r.get(s))}r=Array.from(n.keys()).find(s=>"content-type"==s.toLowerCase()),i=Be.FormData&&t instanceof Be.FormData,!(0<=WM(TG,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{H1(this),0<this.B&&((this.L=function DG(t){return $l&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Dr(this.ua,this)):this.A=fD(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){B1(this,s)}},le.ua=function(){typeof zT<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,or(this,"timeout"),this.abort(8))},le.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,or(this,"complete"),or(this,"abort"),vy(this))},le.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),vy(this,!0)),ln.$.N.call(this)},le.La=function(){this.s||(this.G||this.v||this.l?$1(this):this.kb())},le.kb=function(){$1(this)},le.isActive=function(){return!!this.g},le.da=function(){try{return 2<js(this)?this.g.status:-1}catch{return-1}},le.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},le.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),EG(e)}},le.Ia=function(){return this.m},le.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(le=G1.prototype).ra=8,le.H=1,le.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new Wf(this,this.l,t);let s=this.s;if(this.U&&(s?(s=XM(s),t1(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=K1(this,i,e),Gt(n=Do(this.I),"RID",t),Gt(n,"CVER",22),this.F&&Gt(n,"X-HTTP-Session-Id",this.F),rp(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(z1(s)))+"&"+e:this.o&&DD(n,this.o,s)),wD(this.i,i),this.bb&&Gt(n,"TYPE","init"),this.P?(Gt(n,"$req",e),Gt(n,"SID","null"),i.aa=!0,vD(i,n,null)):vD(i,n,e),this.H=2}}else 3==this.H&&(t?Z1(this,t):0==this.j.length||O1(this.i)||Z1(this))},le.Ma=function(){if(this.u=null,Y1(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=zf(Dr(this.jb,this),t)}},le.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,qr(10),Iy(this),Y1(this))},le.ib=function(){null!=this.v&&(this.v=null,Iy(this),AD(this),qr(19))},le.pb=function(t){t?(this.l.info("Successfully pinged google.com"),qr(2)):(this.l.info("Failed to ping google.com"),qr(1))},le.isActive=function(){return!!this.h&&this.h.isActive(this)},(le=rO.prototype).Ba=function(){},le.Aa=function(){},le.za=function(){},le.ya=function(){},le.isActive=function(){return!0},le.Va=function(){},Ty.prototype.g=function(t,e){return new pi(t,e)},Kn(pi,Qn),pi.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;qr(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=tO(t,null,t.Y),Ey(t)},pi.prototype.close=function(){CD(this.g)},pi.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=lD(t),t=n);e.j.push(new class{constructor(t,e){this.g=t,this.map=e}}(e.fb++,t)),3==e.H&&Ey(e)},pi.prototype.N=function(){this.g.h=null,delete this.j,CD(this.g),delete this.g,pi.$.N.call(this)},Kn(iO,gD),Kn(sO,mD),Kn(zl,rO),zl.prototype.Ba=function(){or(this.g,"a")},zl.prototype.Aa=function(t){or(this.g,new iO(t))},zl.prototype.za=function(t){or(this.g,new sO)},zl.prototype.ya=function(){or(this.g,"b")},Kn(us,function bG(){this.blockSize=-1}),us.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},us.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=n;)SD(this,t,s),s+=this.blockSize;if("string"==typeof t){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){SD(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){SD(this,r),i=0;break}}this.h=i,this.i+=e},us.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};var SG={};function RD(t){return-128<=t&&128>t?function L6(t,e){var n=SG;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,function(e){return new Tt([0|e],0>e?-1:0)}):new Tt([0|t],0>t?-1:0)}function $s(t){if(isNaN(t)||!isFinite(t))return Gl;if(0>t)return ar($s(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=PD;return new Tt(e,0)}var PD=4294967296,Gl=RD(0),xD=RD(1),aO=RD(16777216);function Co(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function $i(t){return-1==t.h}function ar(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Tt(n,~t.h).add(xD)}function Dy(t,e){return t.add(ar(e))}function Cy(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function ip(t,e){this.g=t,this.h=e}function Ay(t,e){if(Co(e))throw Error("division by zero");if(Co(t))return new ip(Gl,Gl);if($i(t))return e=Ay(ar(t),e),new ip(ar(e.g),ar(e.h));if($i(e))return e=Ay(t,ar(e)),new ip(ar(e.g),e.h);if(30<t.g.length){if($i(t)||$i(e))throw Error("slowDivide_ only works with positive integers.");for(var n=xD,r=e;0>=r.X(t);)n=uO(n),r=uO(r);var i=Wl(n,1),s=Wl(r,1);for(r=Wl(r,2),n=Wl(n,2);!Co(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=Wl(r,1),n=Wl(n,1)}return e=Dy(t,i.R(e)),new ip(i,e)}for(i=Gl;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=$s(n)).R(e);$i(o)||0<o.X(t);)o=(s=$s(n-=r)).R(e);Co(s)&&(s=xD),i=i.add(s),t=Dy(t,o)}return new ip(i,t)}function uO(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Tt(n,t.h)}function Wl(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Tt(i,t.h)}(le=Tt.prototype).ea=function(){if($i(this))return-ar(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:PD+r)*e,e*=PD}return t},le.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(Co(this))return"0";if($i(this))return"-"+ar(this).toString(t);for(var e=$s(Math.pow(t,6)),n=this,r="";;){var i=Ay(n,e).g,s=((0<(n=Dy(n,i.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(Co(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},le.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},le.X=function(t){return $i(t=Dy(this,t))?-1:Co(t)?0:1},le.abs=function(){return $i(this)?ar(this):this},le.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&t.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,n[i]=(o&=65535)<<16|(s&=65535)}return new Tt(n,-2147483648&n[n.length-1]?-1:0)},le.R=function(t){if(Co(this)||Co(t))return Gl;if($i(this))return $i(t)?ar(this).R(ar(t)):ar(ar(this).R(t));if($i(t))return ar(this.R(ar(t)));if(0>this.X(aO)&&0>t.X(aO))return $s(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=t.D(i)>>>16,u=65535&t.D(i);n[2*r+2*i]+=o*u,Cy(n,2*r+2*i),n[2*r+2*i+1]+=s*u,Cy(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,Cy(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,Cy(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Tt(n,0)},le.gb=function(t){return Ay(this,t).h},le.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Tt(n,this.h&t.h)},le.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Tt(n,this.h|t.h)},le.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Tt(n,this.h^t.h)},Ty.prototype.createWebChannel=Ty.prototype.g,pi.prototype.send=pi.prototype.u,pi.prototype.open=pi.prototype.m,pi.prototype.close=pi.prototype.close,dy.NO_ERROR=0,dy.TIMEOUT=8,dy.HTTP_ERROR=6,_1.COMPLETE="complete",v1.EventType=Gf,Gf.OPEN="a",Gf.CLOSE="b",Gf.ERROR="c",Gf.MESSAGE="d",Qn.prototype.listen=Qn.prototype.O,ln.prototype.listenOnce=ln.prototype.P,ln.prototype.getLastError=ln.prototype.Sa,ln.prototype.getLastErrorCode=ln.prototype.Ia,ln.prototype.getStatus=ln.prototype.da,ln.prototype.getResponseJson=ln.prototype.Wa,ln.prototype.getResponseText=ln.prototype.ja,ln.prototype.send=ln.prototype.ha,ln.prototype.setWithCredentials=ln.prototype.Oa,us.prototype.digest=us.prototype.l,us.prototype.reset=us.prototype.reset,us.prototype.update=us.prototype.j,Tt.prototype.add=Tt.prototype.add,Tt.prototype.multiply=Tt.prototype.R,Tt.prototype.modulo=Tt.prototype.gb,Tt.prototype.compare=Tt.prototype.X,Tt.prototype.toNumber=Tt.prototype.ea,Tt.prototype.toString=Tt.prototype.toString,Tt.prototype.getBits=Tt.prototype.D,Tt.fromNumber=$s,Tt.fromString=function oO(t,e){if(0==t.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==t.charAt(0))return ar(oO(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=$s(Math.pow(e,8)),r=Gl,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=$s(Math.pow(e,s)),r=r.R(s).add($s(o))):r=(r=r.R(n)).add($s(o))}return r};var RG=as.createWebChannelTransport=function(){return new Ty},PG=as.getStatEventTarget=function(){return ly()},ND=as.ErrorCode=dy,xG=as.EventType=_1,NG=as.Event=ju,cO=as.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},by=(as.FetchXmlHttpFactory=Xf,as.WebChannel=v1),MG=as.XhrIo=ln,OG=as.Md5=us,Zl=as.Integer=Tt;const lO="@firebase/firestore";class Yn{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Yn.UNAUTHENTICATED=new Yn(null),Yn.GOOGLE_CREDENTIALS=new Yn("google-credentials-uid"),Yn.FIRST_PARTY=new Yn("first-party-uid"),Yn.MOCK_USER=new Yn("mock-user");let Kl="10.7.0";const Ea=new Us.Yd("@firebase/firestore");function Ql(){return Ea.logLevel}function te(t,...e){if(Ea.logLevel<=Us.in.DEBUG){const n=e.map(MD);Ea.debug(`Firestore (${Kl}): ${t}`,...n)}}function _n(t,...e){if(Ea.logLevel<=Us.in.ERROR){const n=e.map(MD);Ea.error(`Firestore (${Kl}): ${t}`,...n)}}function ii(t,...e){if(Ea.logLevel<=Us.in.WARN){const n=e.map(MD);Ea.warn(`Firestore (${Kl}): ${t}`,...n)}}function MD(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch{return t}}function pe(t="Unexpected state"){const e=`FIRESTORE (${Kl}) INTERNAL ASSERTION FAILED: `+t;throw _n(e),new Error(e)}function we(t,e){t||pe()}function se(t,e){return t}const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class X extends rt.ZR{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class $n{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class dO{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class FG{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Yn.UNAUTHENTICATED))}shutdown(){}}class VG{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class UG{constructor(e){this.t=e,this.currentUser=Yn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var r=this;let i=this.i;const s=d=>this.i!==i?(i=this.i,n(d)):Promise.resolve();let o=new $n;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new $n,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const d=o;e.enqueueRetryable((0,z.Z)(function*(){yield d.promise,yield s(r.currentUser)}))},u=d=>{te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(d=>u(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(te("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new $n)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(we("string"==typeof r.accessToken),new dO(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return we(null===e||"string"==typeof e),new Yn(e)}}class BG{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Yn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class jG{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new BG(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Yn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class hO{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $G{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{null!=s.error&&te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,te("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(we("string"==typeof n.token),this.R=n.token,new hO(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function HG(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class fO{static newId(){const n=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=HG(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function Fe(t,e){return t<e?-1:t>e?1:0}function Yl(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function pO(t){return t+"\0"}class tn{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new X(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new X(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new X(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new X(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return tn.fromMillis(Date.now())}static fromDate(e){return tn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new tn(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Fe(this.nanoseconds,e.nanoseconds):Fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Te{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Te(e)}static min(){return new Te(new tn(0,0))}static max(){return new Te(new tn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class sp{constructor(e,n,r){void 0===n?n=0:n>e.length&&pe(),void 0===r?r=e.length-n:r>e.length-n&&pe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return 0===sp.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof sp?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ft extends sp{construct(e,n,r){return new ft(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new X(L.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ft(n)}static emptyPath(){return new ft([])}}const qG=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wt extends sp{construct(e,n,r){return new Wt(e,n,r)}static isValidIdentifier(e){return qG.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Wt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(0===r.length)throw new X(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new X(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new X(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new X(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wt(n)}static emptyPath(){return new Wt([])}}class ae{constructor(e){this.path=e}static fromPath(e){return new ae(ft.fromString(e))}static fromName(e){return new ae(ft.fromString(e).popFirst(5))}static empty(){return new ae(ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ft.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return ft.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ae(new ft(e.slice()))}}class Jl{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function OD(t){return t.fields.find(e=>2===e.kind)}function zu(t){return t.fields.filter(e=>2!==e.kind)}Jl.UNKNOWN_ID=-1;class Gu{constructor(e,n){this.fieldPath=e,this.kind=n}}class Xl{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Xl(0,gi.min())}}function gO(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Te.fromTimestamp(1e9===r?new tn(n+1,0):new tn(n,r));return new gi(i,ae.empty(),e)}function mO(t){return new gi(t.readTime,t.key,-1)}class gi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new gi(Te.min(),ae.empty(),-1)}static max(){return new gi(Te.max(),ae.empty(),-1)}}function kD(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=ae.comparator(t.documentKey,e.documentKey),0!==n?n:Fe(t.largestBatchId,e.largestBatchId))}const _O="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class yO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function wa(t){return LD.apply(this,arguments)}function LD(){return LD=(0,z.Z)(function*(t){if(t.code!==L.FAILED_PRECONDITION||t.message!==_O)throw t;te("LocalStore","Unexpectedly lost primary lease")}),LD.apply(this,arguments)}class N{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&pe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new N((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof N?n:N.resolve(n)}catch(n){return N.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):N.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):N.reject(n)}static resolve(e){return new N((n,r)=>{n(e)})}static reject(e){return new N((n,r)=>{r(e)})}static waitFor(e){return new N((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=N.resolve(!1);for(const r of e)n=n.next(i=>i?N.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new N((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const d=u;n(e[d]).next(f=>{o[d]=f,++a,a===s&&r(o)},f=>i(f))}})}static doWhile(e,n){return new N((r,i)=>{const s=()=>{!0===e()?n().next(()=>{s()},i):r()};s()})}}class Sy{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new $n,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new op(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=FD(r.target.error);this.V.reject(new op(e,i))}}static open(e,n,r,i){try{return new Sy(n,e.transaction(i,r))}catch(s){throw new op(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(te("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new ZG(n)}}class cs{constructor(e,n,r){this.name=e,this.version=n,this.p=r,12.2===cs.S((0,rt.z$)())&&_n("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return te("SimpleDb","Removing database:",e),Wu(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,rt.hl)())return!1;if(cs.C())return!0;const e=(0,rt.z$)(),n=cs.S(e),r=0<n&&n<10,i=cs.v(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.F)}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){var n=this;return(0,z.Z)(function*(){return n.db||(te("SimpleDb","Opening database:",n.name),n.db=yield new Promise((r,i)=>{const s=indexedDB.open(n.name,n.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new op(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new X(L.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new X(L.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new op(e,a))},s.onupgradeneeded=o=>{te("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',o.oldVersion),n.p.N(o.target.result,s.transaction,o.oldVersion,n.version).next(()=>{te("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.B&&(n.db.onversionchange=r=>n.B(r)),n.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){var s=this;return(0,z.Z)(function*(){const o="readonly"===n;let a=0;for(;;){++a;try{s.db=yield s.O(e);const u=Sy.open(s.db,e,o?"readonly":"readwrite",r),d=i(u).next(f=>(u.g(),f)).catch(f=>(u.abort(f),N.reject(f))).toPromise();return d.catch(()=>{}),yield u.m,d}catch(u){const d=u,f="FirebaseError"!==d.name&&a<3;if(te("SimpleDb","Transaction failed with error:",d.message,"Retrying:",f),s.close(),!f)return Promise.reject(d)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class WG{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Wu(this.k.delete())}}class op extends X{constructor(e,n){super(L.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Ta(t){return"IndexedDbTransactionError"===t.name}class ZG{constructor(e){this.store=e}put(e,n){let r;return void 0!==n?(te("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(te("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Wu(r)}add(e){return te("SimpleDb","ADD",this.store.name,e,e),Wu(this.store.add(e))}get(e){return Wu(this.store.get(e)).next(n=>(void 0===n&&(n=null),te("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return te("SimpleDb","DELETE",this.store.name,e),Wu(this.store.delete(e))}count(){return te("SimpleDb","COUNT",this.store.name),Wu(this.store.count())}W(e,n){const r=this.options(e,n);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),s=[];return this.G(i,(o,a)=>{s.push(a)}).next(()=>s)}{const i=this.store.getAll(r.range);return new N((s,o)=>{i.onerror=a=>{o(a.target.error)},i.onsuccess=a=>{s(a.target.result)}})}}j(e,n){const r=this.store.getAll(e,null===n?void 0:n);return new N((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}H(e,n){te("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.J=!1;const i=this.cursor(r);return this.G(i,(s,o,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.G(i,n)}Z(e){const n=this.cursor({});return new N((r,i)=>{n.onerror=s=>{const o=FD(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,n){const r=[];return new N((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const u=new WG(a),d=n(a.primaryKey,a.value,u);if(d instanceof N){const f=d.catch(g=>(u.done(),N.reject(g)));r.push(f)}u.isDone?i():null===u.$?a.continue():a.continue(u.$)}}).next(()=>N.waitFor(r))}options(e,n){let r;return void 0!==e&&("string"==typeof e?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Wu(t){return new N((e,n)=>{t.onsuccess=r=>{e(r.target.result)},t.onerror=r=>{const i=FD(r.target.error);n(i)}})}let vO=!1;function FD(t){const e=cs.S((0,rt.z$)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new X("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return vO||(vO=!0,setTimeout(()=>{throw r},0)),r}}return t}class KG{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var n=this;te("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,z.Z)(function*(){n.task=null;try{te("IndexBackiller",`Documents written: ${yield n.X.te()}`)}catch(r){Ta(r)?te("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield wa(r)}yield n.ee(6e4)}))}}class QG{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){var n=this;return(0,z.Z)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>n.ne(r,e))})()}ne(e,n){const r=new Set;let i=n,s=!0;return N.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return te("IndexBackiller",`Processing collection: ${o}`),this.re(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}re(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ie(i,s)).next(a=>(te("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}ie(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=mO(s);kD(o,r)>0&&(r=o)}),new gi(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}let mi=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function ap(t){return null==t}function up(t){return 0===t&&1/t==-1/0}function IO(t){return"number"==typeof t&&Number.isInteger(t)&&!up(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function Ar(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=EO(e)),e=YG(t.get(n),e);return EO(e)}function YG(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=s}}return n}function EO(t){return t+"\x01\x01"}function Hs(t){const e=t.length;if(we(e>=2),2===e)return we("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),ft.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("\x01",s);switch((o<0||o>n)&&pe(),t.charAt(o+1)){case"\x01":const a=t.substring(s,o);let u;0===i.length?u=a:(i+=a,u=i,i=""),r.push(u);break;case"\x10":i+=t.substring(s,o),i+="\0";break;case"\x11":i+=t.substring(s,o+1);break;default:pe()}s=o+2}return new ft(r)}const wO=["userId","batchId"];function Ry(t,e){return[t,Ar(e)]}function TO(t,e,n){return[t,Ar(e),n]}const JG={},XG=["prefixPath","collectionGroup","readTime","documentId"],e5=["prefixPath","collectionGroup","documentId"],t5=["collectionGroup","readTime","prefixPath","documentId"],n5=["canonicalId","targetId"],r5=["targetId","path"],i5=["path","targetId"],s5=["collectionId","parent"],o5=["indexId","uid"],a5=["uid","sequenceNumber"],u5=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],c5=["indexId","uid","orderedDocumentKey"],l5=["userId","collectionPath","documentId"],d5=["userId","collectionPath","largestBatchId"],h5=["userId","collectionGroup","largestBatchId"],DO=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],f5=[...DO,"documentOverlays"],CO=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],AO=CO,p5=[...AO,"indexConfiguration","indexState","indexEntries"];class VD extends yO{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}}function Jn(t,e){const n=se(t);return cs.M(n.ae,e)}function bO(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Da(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function SO(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Ut{constructor(e,n){this.comparator=e,this.root=n||ur.EMPTY}insert(e,n){return new Ut(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ur.BLACK,null,null))}remove(e){return new Ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ur.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Py(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Py(this.root,e,this.comparator,!1)}getReverseIterator(){return new Py(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Py(this.root,e,this.comparator,!0)}}class Py{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ur{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??ur.RED,this.left=i??ur.EMPTY,this.right=s??ur.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new ur(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):0===s?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ur.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return ur.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ur.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ur.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw pe();const e=this.left.check();if(e!==this.right.check())throw pe();return e+(this.isRed()?0:1)}}ur.EMPTY=null,ur.RED=!0,ur.BLACK=!1,ur.EMPTY=new class{constructor(){this.size=0}get key(){throw pe()}get value(){throw pe()}get color(){throw pe()}get left(){throw pe()}get right(){throw pe()}copy(e,n,r,i,s){return this}insert(e,n,r){return new ur(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Rt{constructor(e){this.comparator=e,this.data=new Ut(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new RO(this.data.getIterator())}getIteratorFrom(e){return new RO(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Rt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Rt(this.comparator);return n.data=e,n}}class RO{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ed(t){return t.hasNext()?t.getNext():void 0}class si{constructor(e){this.fields=e,e.sort(Wt.comparator)}static empty(){return new si([])}unionWith(e){let n=new Rt(Wt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new si(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Yl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}class PO extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Hn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new PO("Invalid base64 string: "+s):s}}(e);return new Hn(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Hn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Hn.EMPTY_BYTE_STRING=new Hn("");const m5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ca(t){if(we(!!t),"string"==typeof t){let e=0;const n=m5.exec(t);if(we(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:dn(t.seconds),nanos:dn(t.nanos)}}function dn(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Ao(t){return"string"==typeof t?Hn.fromBase64String(t):Hn.fromUint8Array(t)}function xy(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ny(t){const e=t.mapValue.fields.__previous_value__;return xy(e)?Ny(e):e}function cp(t){const e=Ca(t.mapValue.fields.__local_write_time__.timestampValue);return new tn(e.seconds,e.nanos)}class _5{constructor(e,n,r,i,s,o,a,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=d}}class Aa{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Aa("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Aa&&e.projectId===this.projectId&&e.database===this.database}}const ba={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},My={nullValue:"NULL_VALUE"};function Sa(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?xy(t)?4:OO(t)?9007199254740991:10:pe()}function qs(t,e){if(t===e)return!0;const n=Sa(t);if(n!==Sa(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return cp(t).isEqual(cp(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Ca(i.timestampValue),a=Ca(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return s=e,Ao(t.bytesValue).isEqual(Ao(s.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return dn(i.geoPointValue.latitude)===dn(s.geoPointValue.latitude)&&dn(i.geoPointValue.longitude)===dn(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return dn(i.integerValue)===dn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=dn(i.doubleValue),a=dn(s.doubleValue);return o===a?up(o)===up(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Yl(t.arrayValue.values||[],e.arrayValue.values||[],qs);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(bO(o)!==bO(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(void 0===a[u]||!qs(o[u],a[u])))return!1;return!0}(t,e);default:return pe()}var s}function lp(t,e){return void 0!==(t.values||[]).find(n=>qs(n,e))}function Ra(t,e){if(t===e)return 0;const n=Sa(t),r=Sa(e);if(n!==r)return Fe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Fe(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=dn(s.integerValue||s.doubleValue),u=dn(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return xO(t.timestampValue,e.timestampValue);case 4:return xO(cp(t),cp(e));case 5:return Fe(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Ao(s),u=Ao(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let d=0;d<a.length&&d<u.length;d++){const f=Fe(a[d],u[d]);if(0!==f)return f}return Fe(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Fe(dn(s.latitude),dn(o.latitude));return 0!==a?a:Fe(dn(s.longitude),dn(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let d=0;d<a.length&&d<u.length;++d){const f=Ra(a[d],u[d]);if(f)return f}return Fe(a.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===ba.mapValue&&o===ba.mapValue)return 0;if(s===ba.mapValue)return 1;if(o===ba.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),d=o.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let g=0;g<u.length&&g<f.length;++g){const _=Fe(u[g],f[g]);if(0!==_)return _;const y=Ra(a[u[g]],d[f[g]]);if(0!==y)return y}return Fe(u.length,f.length)}(t.mapValue,e.mapValue);default:throw pe()}}function xO(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Fe(t,e);const n=Ca(t),r=Ca(e),i=Fe(n.seconds,r.seconds);return 0!==i?i:Fe(n.nanos,r.nanos)}function td(t){return UD(t)}function UD(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ca(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Ao(t.bytesValue).toBase64():"referenceValue"in t?ae.fromName(t.referenceValue).toString():"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=UD(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${UD(n.fields[o])}`;return i+"}"}(t.mapValue):pe()}function Zu(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function BD(t){return!!t&&"integerValue"in t}function dp(t){return!!t&&"arrayValue"in t}function NO(t){return!!t&&"nullValue"in t}function MO(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ky(t){return!!t&&"mapValue"in t}function hp(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Da(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=hp(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=hp(t.arrayValue.values[n]);return e}return Object.assign({},t)}function OO(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}function y5(t){return"nullValue"in t?My:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Zu(Aa.empty(),ae.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:pe()}function v5(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Zu(Aa.empty(),ae.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?ba:pe()}function kO(t,e){const n=Ra(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function LO(t,e){const n=Ra(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}class cr{constructor(e){this.value=e}static empty(){return new cr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ky(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=hp(n)}setAll(e){let n=Wt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=hp(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());ky(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return qs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];ky(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Da(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new cr(hp(this.value))}}function FO(t){const e=[];return Da(t.fields,(n,r)=>{const i=new Wt([n]);if(ky(r)){const s=FO(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new si(e)}class Zt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Zt(e,0,Te.min(),Te.min(),Te.min(),cr.empty(),0)}static newFoundDocument(e,n,r,i){return new Zt(e,1,n,Te.min(),r,i,0)}static newNoDocument(e,n){return new Zt(e,2,n,Te.min(),Te.min(),cr.empty(),0)}static newUnknownDocument(e,n){return new Zt(e,3,n,Te.min(),Te.min(),cr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Te.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=cr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=cr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Zt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Zt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Pa{constructor(e,n){this.position=e,this.inclusive=n}}function VO(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(r=s.field.isKeyField()?ae.comparator(ae.fromName(o.referenceValue),n.key):Ra(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function UO(t,e){if(null===t)return null===e;if(null===e||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!qs(t.position[n],e.position[n]))return!1;return!0}class fp{constructor(e,n="asc"){this.field=e,this.dir=n}}function I5(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class BO{}class ot extends BO{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,r):new E5(e,n,r):"array-contains"===n?new D5(e,r):"in"===n?new GO(e,r):"not-in"===n?new C5(e,r):"array-contains-any"===n?new A5(e,r):new ot(e,n,r)}static createKeyFieldInFilter(e,n,r){return"in"===n?new w5(e,r):new T5(e,r)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(Ra(n,this.value)):null!==n&&Sa(this.value)===Sa(n)&&this.matchesComparison(Ra(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return pe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Dt extends BO{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new Dt(e,n)}matches(e){return nd(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function nd(t){return"and"===t.op}function jD(t){return"or"===t.op}function $D(t){return jO(t)&&nd(t)}function jO(t){for(const e of t.filters)if(e instanceof Dt)return!1;return!0}function HD(t){if(t instanceof ot)return t.field.canonicalString()+t.op.toString()+td(t.value);if($D(t))return t.filters.map(e=>HD(e)).join(",");{const e=t.filters.map(n=>HD(n)).join(",");return`${t.op}(${e})`}}function $O(t,e){return t instanceof ot?(r=t,(i=e)instanceof ot&&r.op===i.op&&r.field.isEqual(i.field)&&qs(r.value,i.value)):t instanceof Dt?function(r,i){return i instanceof Dt&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&$O(o,i.filters[a]),!0)}(t,e):void pe();var r,i}function HO(t,e){const n=t.filters.concat(e);return Dt.create(n,t.op)}function qO(t){return t instanceof ot?`${(n=t).field.canonicalString()} ${n.op} ${td(n.value)}`:t instanceof Dt?function(n){return n.op.toString()+" {"+n.getFilters().map(qO).join(" ,")+"}"}(t):"Filter";var n}class E5 extends ot{constructor(e,n,r){super(e,n,r),this.key=ae.fromName(r.referenceValue)}matches(e){const n=ae.comparator(e.key,this.key);return this.matchesComparison(n)}}class w5 extends ot{constructor(e,n){super(e,"in",n),this.keys=zO(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class T5 extends ot{constructor(e,n){super(e,"not-in",n),this.keys=zO(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function zO(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(r=>ae.fromName(r.referenceValue))}class D5 extends ot{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return dp(n)&&lp(n.arrayValue,this.value)}}class GO extends ot{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&lp(this.value.arrayValue,n)}}class C5 extends ot{constructor(e,n){super(e,"not-in",n)}matches(e){if(lp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!lp(this.value.arrayValue,n)}}class A5 extends ot{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!dp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>lp(this.value.arrayValue,r))}}class b5{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}}function qD(t,e=null,n=[],r=[],i=null,s=null,o=null){return new b5(t,e,n,r,i,s,o)}function Ku(t){const e=se(t);if(null===e.ce){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>HD(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),ap(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>td(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>td(r)).join(",")),e.ce=n}return e.ce}function pp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!I5(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!$O(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!UO(t.startAt,e.startAt)&&UO(t.endAt,e.endAt)}function Ly(t){return ae.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}function Fy(t,e){return t.filters.filter(n=>n instanceof ot&&n.field.isEqual(e))}function WO(t,e,n){let r=My,i=!0;for(const s of Fy(t,e)){let o=My,a=!0;switch(s.op){case"<":case"<=":o=y5(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=My}kO({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==n)for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];kO({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}return{value:r,inclusive:i}}function ZO(t,e,n){let r=ba,i=!0;for(const s of Fy(t,e)){let o=ba,a=!0;switch(s.op){case">=":case">":o=v5(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=ba}LO({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==n)for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];LO({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}return{value:r,inclusive:i}}class bo{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.le=null,this.he=null,this.Pe=null}}function KO(t,e,n,r,i,s,o,a){return new bo(t,e,n,r,i,s,o,a)}function rd(t){return new bo(t)}function QO(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function zD(t){return null!==t.collectionGroup}function id(t){const e=se(t);if(null===e.le){e.le=[];const n=new Set;for(const s of e.explicitOrderBy)e.le.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Rt(Wt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.le.push(new fp(s,r))}),n.has(Wt.keyField().canonicalString())||e.le.push(new fp(Wt.keyField(),r))}return e.le}function zr(t){const e=se(t);return e.he||(e.he=function YO(t,e){if("F"===t.limitType)return qD(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>new fp(i.field,"desc"===i.dir?"asc":"desc"));const n=t.endAt?new Pa(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Pa(t.startAt.position,t.startAt.inclusive):null;return qD(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}(e,id(t))),e.he}function GD(t,e){const n=t.filters.concat([e]);return new bo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Vy(t,e,n){return new bo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function gp(t,e){return pp(zr(t),zr(e))&&t.limitType===e.limitType}function JO(t){return`${Ku(zr(t))}|lt:${t.limitType}`}function sd(t){return`Query(target=${function(n){let r=n.path.canonicalString();return null!==n.collectionGroup&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>qO(i)).join(", ")}]`),ap(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>td(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>td(i)).join(",")),`Target(${r})`}(zr(t))}; limitType=${t.limitType})`}function mp(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ae.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of id(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&(i=e,!((r=t).startAt&&!function(o,a,u){const d=VO(o,a,u);return o.inclusive?d<=0:d<0}(r.startAt,id(r),i)||r.endAt&&!function(o,a,u){const d=VO(o,a,u);return o.inclusive?d>=0:d>0}(r.endAt,id(r),i)));var r,i}function XO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function ek(t){return(e,n)=>{let r=!1;for(const i of id(t)){const s=S5(i,e,n);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function S5(t,e,n){const r=t.field.isKeyField()?ae.comparator(e.key,n.key):function(s,o,a){const u=o.data.field(s),d=a.data.field(s);return null!==u&&null!==d?Ra(u,d):pe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return pe()}}class So{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Da(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return SO(this.inner)}size(){return this.innerSize}}const R5=new Ut(ae.comparator);function oi(){return R5}const tk=new Ut(ae.comparator);function _p(...t){let e=tk;for(const n of t)e=e.insert(n.key,n);return e}function nk(t){let e=tk;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function zs(){return yp()}function rk(){return yp()}function yp(){return new So(t=>t.toString(),(t,e)=>t.isEqual(e))}const P5=new Ut(ae.comparator),x5=new Rt(ae.comparator);function ze(...t){let e=x5;for(const n of t)e=e.add(n);return e}const N5=new Rt(Fe);function WD(){return N5}function ik(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:up(e)?"-0":e}}function sk(t){return{integerValue:""+t}}function ok(t,e){return IO(e)?sk(e):ik(t,e)}class Uy{constructor(){this._=void 0}}function M5(t,e,n){return t instanceof od?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&xy(s)&&(s=Ny(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Qu?uk(t,e):t instanceof Yu?ck(t,e):function(i,s){const o=ak(i,s),a=lk(o)+lk(i.Ie);return BD(o)&&BD(i.Ie)?sk(a):ik(i.serializer,a)}(t,e)}function O5(t,e,n){return t instanceof Qu?uk(t,e):t instanceof Yu?ck(t,e):n}function ak(t,e){return t instanceof ad?BD(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class od extends Uy{}class Qu extends Uy{constructor(e){super(),this.elements=e}}function uk(t,e){const n=dk(e);for(const r of t.elements)n.some(i=>qs(i,r))||n.push(r);return{arrayValue:{values:n}}}class Yu extends Uy{constructor(e){super(),this.elements=e}}function ck(t,e){let n=dk(e);for(const r of t.elements)n=n.filter(i=>!qs(i,r));return{arrayValue:{values:n}}}class ad extends Uy{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function lk(t){return dn(t.integerValue||t.doubleValue)}function dk(t){return dp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class vp{constructor(e,n){this.field=e,this.transform=n}}class L5{constructor(e,n){this.version=e,this.transformResults=n}}class nn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new nn}static exists(e){return new nn(void 0,e)}static updateTime(e){return new nn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function By(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class jy{}function hk(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new cd(t.key,nn.none()):new ud(t.key,t.data,nn.none());{const n=t.data,r=cr.empty();let i=new Rt(Wt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);null===o&&s.length>1&&(s=s.popLast(),o=n.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new Ro(t.key,r,new si(i.toArray()),nn.none())}}function F5(t,e,n){t instanceof ud?function(i,s,o){const a=i.value.clone(),u=gk(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ro?function(i,s,o){if(!By(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=gk(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(pk(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function Ip(t,e,n,r){return t instanceof ud?function(s,o,a,u){if(!By(s.precondition,o))return a;const d=s.value.clone(),f=mk(s.fieldTransforms,u,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ro?function(s,o,a,u){if(!By(s.precondition,o))return a;const d=mk(s.fieldTransforms,u,o),f=o.data;return f.setAll(pk(s)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(t,e,n,r):(a=n,By(t.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function V5(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=ak(r.transform,i||null);null!=s&&(null===n&&(n=cr.empty()),n.set(r.field,s))}return n||null}function fk(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=t.fieldTransforms)&&void 0===i||r&&i&&Yl(r,i,(s,o)=>function k5(t,e){return t.field.isEqual(e.field)&&(i=e.transform,(r=t.transform)instanceof Qu&&i instanceof Qu||r instanceof Yu&&i instanceof Yu?Yl(r.elements,i.elements,qs):r instanceof ad&&i instanceof ad?qs(r.Ie,i.Ie):r instanceof od&&i instanceof od);var r,i}(s,o))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var r,i}class ud extends jy{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ro extends jy{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function pk(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function gk(t,e,n){const r=new Map;we(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,O5(o,a,n[i]))}return r}function mk(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,M5(s,o,e))}return r}class cd extends jy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ZD extends jy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class KD{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&F5(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ip(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ip(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=rk();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=hk(o,a);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Te.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ze())}isEqual(e){return this.batchId===e.batchId&&Yl(this.mutations,e.mutations,(n,r)=>fk(n,r))&&Yl(this.baseMutations,e.baseMutations,(n,r)=>fk(n,r))}}class QD{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){we(e.mutations.length===r.length);let i=P5;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new QD(e,n,r,i)}}class YD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class B5{constructor(e,n){this.count=e,this.unchangedNames=n}}var bn,pt;function _k(t){switch(t){default:return pe();case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0}}function yk(t){if(void 0===t)return _n("GRPC error has no .code"),L.UNKNOWN;switch(t){case bn.OK:return L.OK;case bn.CANCELLED:return L.CANCELLED;case bn.UNKNOWN:return L.UNKNOWN;case bn.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case bn.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case bn.INTERNAL:return L.INTERNAL;case bn.UNAVAILABLE:return L.UNAVAILABLE;case bn.UNAUTHENTICATED:return L.UNAUTHENTICATED;case bn.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case bn.NOT_FOUND:return L.NOT_FOUND;case bn.ALREADY_EXISTS:return L.ALREADY_EXISTS;case bn.PERMISSION_DENIED:return L.PERMISSION_DENIED;case bn.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case bn.ABORTED:return L.ABORTED;case bn.OUT_OF_RANGE:return L.OUT_OF_RANGE;case bn.UNIMPLEMENTED:return L.UNIMPLEMENTED;case bn.DATA_LOSS:return L.DATA_LOSS;default:return pe()}}(pt=bn||(bn={}))[pt.OK=0]="OK",pt[pt.CANCELLED=1]="CANCELLED",pt[pt.UNKNOWN=2]="UNKNOWN",pt[pt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pt[pt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pt[pt.NOT_FOUND=5]="NOT_FOUND",pt[pt.ALREADY_EXISTS=6]="ALREADY_EXISTS",pt[pt.PERMISSION_DENIED=7]="PERMISSION_DENIED",pt[pt.UNAUTHENTICATED=16]="UNAUTHENTICATED",pt[pt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pt[pt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pt[pt.ABORTED=10]="ABORTED",pt[pt.OUT_OF_RANGE=11]="OUT_OF_RANGE",pt[pt.UNIMPLEMENTED=12]="UNIMPLEMENTED",pt[pt.INTERNAL=13]="INTERNAL",pt[pt.UNAVAILABLE=14]="UNAVAILABLE",pt[pt.DATA_LOSS=15]="DATA_LOSS";function vk(){return new TextEncoder}const j5=new Zl([4294967295,4294967295],0);function Ik(t){const e=vk().encode(t),n=new OG;return n.update(e),new Uint8Array(n.digest())}function Ek(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Zl([n,r],0),new Zl([i,s],0)]}class JD{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ep(`Invalid padding: ${n}`);if(r<0)throw new Ep(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Ep(`Invalid hash count: ${r}`);if(0===e.length&&0!==n)throw new Ep(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=Zl.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(Zl.fromNumber(r)));return 1===i.compare(j5)&&(i=new Zl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const n=Ik(e),[r,i]=Ek(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new JD(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Te)return;const n=Ik(e),[r,i]=Ek(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);this.Re(o)}}Re(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class Ep extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class wp{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Tp.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new wp(Te.min(),i,new Ut(Fe),oi(),ze())}}class Tp{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Tp(r,n,ze(),ze(),ze())}}class Hy{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}}class wk{constructor(e,n){this.targetId=e,this.fe=n}}class Tk{constructor(e,n,r=Hn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Dk{constructor(){this.ge=0,this.pe=Ak(),this.ye=Hn.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=ze(),n=ze(),r=ze();return this.pe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:pe()}}),new Tp(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=Ak()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,we(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class $5{constructor(e){this.Le=e,this.ke=new Map,this.qe=oi(),this.Qe=Ck(),this.Ke=new Ut(Fe)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:pe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){const s=i.target;if(Ly(s))if(0===r){const o=new ae(s.path);this.We(n,o,Zt.newNoDocument(o,Te.min()))}else we(1===r);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(e),u=a?this.et(a,e,o):1;0!==u&&(this.He(n),this.Ke=this.Ke.insert(n,2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Ao(r).toUint8Array()}catch(u){if(u instanceof PO)return ii("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new JD(o,i,s)}catch(u){return ii(u instanceof Ep?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return 0===a.Te?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),i++)}),i}it(e){const n=new Map;this.ke.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&Ly(a.target)){const u=new ae(a.target.path);null!==this.qe.get(u)||this.st(o,u)||this.We(o,u,Zt.newNoDocument(u,e))}s.De&&(n.set(o,s.ve()),s.Fe())}});let r=ze();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const d=this.Ye(u);return!d||"TargetPurposeLimboResolution"===d.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));const i=new wp(e,n,this.Ke,this.qe,r);return this.qe=oi(),this.Qe=Ck(),this.Ke=new Ut(Fe),i}Ue(e,n){if(!this.je(e))return;const r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new Dk,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Rt(Fe),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=null!==this.Ye(e);return n||te("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new Dk),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Ck(){return new Ut(ae.comparator)}function Ak(){return new Ut(ae.comparator)}const H5={asc:"ASCENDING",desc:"DESCENDING"},q5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},z5={and:"AND",or:"OR"};class G5{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function XD(t,e){return t.useProto3Json||ap(e)?e:{value:e}}function ld(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bk(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function W5(t,e){return ld(t,e.toTimestamp())}function yn(t){return we(!!t),Te.fromTimestamp(function(n){const r=Ca(n);return new tn(r.seconds,r.nanos)}(t))}function e0(t,e){return(r=t,new ft(["projects",r.projectId,"databases",r.database])).child("documents").child(e).canonicalString();var r}function Sk(t){const e=ft.fromString(t);return we(Fk(e)),e}function Dp(t,e){return e0(t.databaseId,e.path)}function Gs(t,e){const n=Sk(e);if(n.get(1)!==t.databaseId.projectId)throw new X(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new X(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ae(Pk(n))}function t0(t,e){return e0(t.databaseId,e)}function Rk(t){const e=Sk(t);return 4===e.length?ft.emptyPath():Pk(e)}function Cp(t){return new ft(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Pk(t){return we(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function xk(t,e,n){return{name:Dp(t,e),fields:n.value.mapValue.fields}}function Nk(t,e,n){const r=Gs(t,e.name),i=yn(e.updateTime),s=e.createTime?yn(e.createTime):Te.min(),o=new cr({mapValue:{fields:e.fields}}),a=Zt.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Ap(t,e){let n;if(e instanceof ud)n={update:xk(t,e.key,e.value)};else if(e instanceof cd)n={delete:Dp(t,e.key)};else if(e instanceof Ro)n={update:xk(t,e.key,e.data),updateMask:t8(e.fieldMask)};else{if(!(e instanceof ZD))return pe();n={verify:Dp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof od)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Qu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Yu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ad)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw pe()}(0,r))),e.precondition.isNone||(n.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:W5(t,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:pe()),n;var s}function n0(t,e){const n=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?nn.updateTime(yn(s.updateTime)):void 0!==s.exists?nn.exists(s.exists):nn.none():nn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let u=null;"setToServerValue"in a?(we("REQUEST_TIME"===a.setToServerValue),u=new od):"appendMissingElements"in a?u=new Qu(a.appendMissingElements.values||[]):"removeAllFromArray"in a?u=new Yu(a.removeAllFromArray.values||[]):"increment"in a?u=new ad(o,a.increment):pe();const d=Wt.fromServerFormat(a.fieldPath);return new vp(d,u)}(t,i)):[];var s;if(e.update){const i=Gs(t,e.update.name),s=new cr({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new si((e.updateMask.fieldPaths||[]).map(f=>Wt.fromServerFormat(f)));return new Ro(i,s,o,n,r)}return new ud(i,s,n,r)}if(e.delete){const i=Gs(t,e.delete);return new cd(i,n)}if(e.verify){const i=Gs(t,e.verify);return new ZD(i,n)}return pe()}function Mk(t,e){return{documents:[t0(t,e.path)]}}function r0(t,e){const n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=t0(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=t0(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(u){if(0!==u.length)return Lk(Dt.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(u){if(0!==u.length)return u.map(d=>{return{field:xa((g=d).field),direction:J5(g.dir)};var g})}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=XD(t,e.limit);return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(u=e.startAt).inclusive,values:u.position}),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),n;var u}function Ok(t){let e=Rk(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){we(1===r);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];n.where&&(s=function(g){const _=kk(g);return _ instanceof Dt&&$D(_)?_.getFilters():[_]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(_=>{return new fp(dd((E=_).field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction));var E}));let a=null;n.limit&&(a=function(g){let _;return _="object"==typeof g?g.value:g,ap(_)?null:_}(n.limit));let u=null;var g;n.startAt&&(u=new Pa((g=n.startAt).values||[],!!g.before));let d=null;return n.endAt&&(d=function(g){return new Pa(g.values||[],!g.before)}(n.endAt)),KO(e,i,o,s,a,"F",u,d)}function kk(t){return void 0!==t.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=dd(n.unaryFilter.field);return ot.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=dd(n.unaryFilter.field);return ot.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=dd(n.unaryFilter.field);return ot.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=dd(n.unaryFilter.field);return ot.create(o,"!=",{nullValue:"NULL_VALUE"});default:return pe()}}(t):void 0!==t.fieldFilter?ot.create(dd((n=t).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return pe()}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==t.compositeFilter?function(n){return Dt.create(n.compositeFilter.filters.map(r=>kk(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return pe()}}(n.compositeFilter.op))}(t):pe();var n}function J5(t){return H5[t]}function X5(t){return q5[t]}function e8(t){return z5[t]}function xa(t){return{fieldPath:t.canonicalString()}}function dd(t){return Wt.fromServerFormat(t.fieldPath)}function Lk(t){return t instanceof ot?function(n){if("=="===n.op){if(MO(n.value))return{unaryFilter:{field:xa(n.field),op:"IS_NAN"}};if(NO(n.value))return{unaryFilter:{field:xa(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(MO(n.value))return{unaryFilter:{field:xa(n.field),op:"IS_NOT_NAN"}};if(NO(n.value))return{unaryFilter:{field:xa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xa(n.field),op:X5(n.op),value:n.value}}}(t):t instanceof Dt?function(n){const r=n.getFilters().map(i=>Lk(i));return 1===r.length?r[0]:{compositeFilter:{op:e8(n.op),filters:r}}}(t):pe()}function t8(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Fk(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class Po{constructor(e,n,r,i,s=Te.min(),o=Te.min(),a=Hn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new Po(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Po(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Po(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Po(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Vk{constructor(e){this.ut=e}}function Uk(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:qy(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Dp(s=t.ut,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:ld(s,o.version.toTimestamp()),createTime:ld(s,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Ju(e.version)};else{if(!e.isUnknownDocument())return pe();r.unknownDocument={path:n.path.toArray(),version:Ju(e.version)}}var s,o;return r}function qy(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ju(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Xu(t){const e=new tn(t.seconds,t.nanoseconds);return Te.fromTimestamp(e)}function ec(t,e){const n=(e.baseMutations||[]).map(s=>n0(t.ut,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>n0(t.ut,s)),i=tn.fromMillis(e.localWriteTimeMs);return new KD(e.batchId,i,n,r)}function bp(t){const e=Xu(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?Xu(t.lastLimboFreeSnapshotVersion):Te.min();let r;return r=void 0!==t.query.documents?(we(1===(s=t.query).documents.length),zr(rd(Rk(s.documents[0])))):function(s){return zr(Ok(s))}(t.query),new Po(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Hn.fromBase64String(t.resumeToken));var s}function Bk(t,e){const n=Ju(e.snapshotVersion),r=Ju(e.lastLimboFreeSnapshotVersion);let i;i=Ly(e.target)?Mk(t.ut,e.target):r0(t.ut,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ku(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function s0(t){const e=Ok({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Vy(e,e.limit,"L"):e}function o0(t,e){return new YD(e.largestBatchId,n0(t.ut,e.overlayMutation))}function jk(t,e){const n=e.path.lastSegment();return[t,Ar(e.path.popLast()),n]}function $k(t,e,n,r){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:Ju(r.readTime),documentKey:Ar(r.documentKey.path),largestBatchId:r.largestBatchId}}class r8{getBundleMetadata(e,n){return Hk(e).get(n).next(r=>{if(r)return{id:(s=r).bundleId,createTime:Xu(s.createTime),version:s.version};var s})}saveBundleMetadata(e,n){return Hk(e).put({bundleId:(i=n).id,createTime:Ju(yn(i.createTime)),version:i.version});var i}getNamedQuery(e,n){return qk(e).get(n).next(r=>{if(r)return{name:(s=r).name,query:s0(s.bundledQuery),readTime:Xu(s.readTime)};var s})}saveNamedQuery(e,n){return qk(e).put({name:(i=n).name,readTime:Ju(yn(i.readTime)),bundledQuery:i.bundledQuery});var i}}function Hk(t){return Jn(t,"bundles")}function qk(t){return Jn(t,"namedQueries")}class zy{constructor(e,n){this.serializer=e,this.userId=n}static ct(e,n){return new zy(e,n.uid||"")}getOverlay(e,n){return Sp(e).get(jk(this.userId,n)).next(r=>r?o0(this.serializer,r):null)}getOverlays(e,n){const r=zs();return N.forEach(n,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new YD(n,o);i.push(this.lt(e,a))}),N.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(Ar(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Sp(e).H("collectionPathOverlayIndex",a))}),N.waitFor(s)}getOverlaysForCollection(e,n,r){const i=zs(),s=Ar(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Sp(e).W("collectionPathOverlayIndex",o).next(a=>{for(const u of a){const d=o0(this.serializer,u);i.set(d.getKey(),d)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=zs();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Sp(e).Y({index:"collectionGroupOverlayIndex",range:a},(u,d,f)=>{const g=o0(this.serializer,d);s.size()<i||g.largestBatchId===o?(s.set(g.getKey(),g),o=g.largestBatchId):f.done()}).next(()=>s)}lt(e,n){return Sp(e).put(function(i,s,o){const[a,u,d]=jk(s,o.mutation.key);return{userId:s,collectionPath:u,documentId:d,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Ap(i.ut,o.mutation)}}(this.serializer,this.userId,n))}}function Sp(t){return Jn(t,"documentOverlays")}class tc{constructor(){}ht(e,n){this.Pt(e,n),n.It()}Pt(e,n){if("nullValue"in e)this.Tt(n,5);else if("booleanValue"in e)this.Tt(n,10),n.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(n,15),n.Et(dn(e.integerValue));else if("doubleValue"in e){const r=dn(e.doubleValue);isNaN(r)?this.Tt(n,13):(this.Tt(n,15),up(r)?n.Et(0):n.Et(r))}else if("timestampValue"in e){const r=e.timestampValue;this.Tt(n,20),"string"==typeof r?n.dt(r):(n.dt(`${r.seconds||""}`),n.Et(r.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,n),this.Rt(n);else if("bytesValue"in e)this.Tt(n,30),n.Vt(Ao(e.bytesValue)),this.Rt(n);else if("referenceValue"in e)this.ft(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Tt(n,45),n.Et(r.latitude||0),n.Et(r.longitude||0)}else"mapValue"in e?OO(e)?this.Tt(n,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,n),this.Rt(n)):"arrayValue"in e?(this.yt(e.arrayValue,n),this.Rt(n)):pe()}At(e,n){this.Tt(n,25),this.wt(e,n)}wt(e,n){n.dt(e)}gt(e,n){const r=e.fields||{};this.Tt(n,55);for(const i of Object.keys(r))this.At(i,n),this.Pt(r[i],n)}yt(e,n){const r=e.values||[];this.Tt(n,50);for(const i of r)this.Pt(i,n)}ft(e,n){this.Tt(n,37),ae.fromName(e).path.forEach(r=>{this.Tt(n,60),this.wt(r,n)})}Tt(e,n){e.Et(n)}Rt(e){e.Et(2)}}function i8(t){if(0===t)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function zk(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=i8(255&r[s]);if(i+=o,8!==o)break}return i}(t);return Math.ceil(e/8)}tc.St=new tc;class s8{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Dt(r.value),r=n.next();this.Ct()}vt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Dt(r);else if(r<2048)this.Dt(960|r>>>6),this.Dt(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.Dt(480|r>>>12),this.Dt(128|63&r>>>6),this.Dt(128|63&r);else{const i=n.codePointAt(0);this.Dt(240|i>>>18),this.Dt(128|63&i>>>12),this.Dt(128|63&i>>>6),this.Dt(128|63&i)}}this.Ct()}Ot(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Nt(e){const n=this.Bt(e),r=zk(n);this.Lt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}kt(e){const n=this.Bt(e),r=zk(n);this.Lt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Dt(e){const n=255&e;0===n?(this.Qt(0),this.Qt(255)):255===n?(this.Qt(255),this.Qt(0)):this.Qt(n)}Ft(e){const n=255&e;0===n?(this.$t(0),this.$t(255)):255===n?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class o8{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class a8{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class Rp{constructor(){this.Wt=new s8,this.Gt=new o8(this.Wt),this.zt=new a8(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return 0===e?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}class nc{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Ht(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new nc(this.indexId,this.documentKey,this.arrayValue,r)}}function Na(t,e){let n=t.indexId-e.indexId;return 0!==n?n:(n=Gk(t.arrayValue,e.arrayValue),0!==n?n:(n=Gk(t.directionalValue,e.directionalValue),0!==n?n:ae.comparator(t.documentKey,e.documentKey)))}function Gk(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(0!==r)return r}return t.length-e.length}class Wk{constructor(e){this.Jt=new Rt((n,r)=>Wt.comparator(n.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const n of e.filters){const r=n;r.isInequality()?this.Jt=this.Jt.add(r):this.Zt.push(r)}}get Xt(){return this.Jt.size>1}en(e){if(we(e.collectionGroup===this.collectionId),this.Xt)return!1;const n=OD(e);if(void 0!==n&&!this.tn(n))return!1;const r=zu(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.tn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Jt.size>0){const a=this.Jt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const u=r[s];if(!this.nn(a,u)||!this.rn(this.Yt[o++],u))return!1}++s}for(;s<r.length;++s)if(o>=this.Yt.length||!this.rn(this.Yt[o++],r[s]))return!1;return!0}sn(){if(this.Xt)return null;let e=new Rt(Wt.comparator);const n=[];for(const r of this.Zt)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)n.push(new Gu(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Gu(r.field,0))}for(const r of this.Yt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Gu(r.field,"asc"===r.dir?0:1)));return new Jl(Jl.UNKNOWN_ID,this.collectionId,n,Xl.empty())}tn(e){for(const n of this.Zt)if(this.nn(n,e))return!0;return!1}nn(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}rn(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}function Zk(t){var e,n;if(we(t instanceof ot||t instanceof Dt),t instanceof ot){if(t instanceof GO){const i=(null===(n=null===(e=t.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map(s=>ot.create(t.field,"==",s)))||[];return Dt.create(i,"or")}return t}const r=t.filters.map(i=>Zk(i));return Dt.create(r,t.op)}function u8(t){if(0===t.getFilters().length)return[];const e=c0(Zk(t));return we(Kk(e)),a0(e)||u0(e)?[e]:e.getFilters()}function a0(t){return t instanceof ot}function u0(t){return t instanceof Dt&&$D(t)}function Kk(t){return a0(t)||u0(t)||function(n){if(n instanceof Dt&&jD(n)){for(const r of n.getFilters())if(!a0(r)&&!u0(r))return!1;return!0}return!1}(t)}function c0(t){if(we(t instanceof ot||t instanceof Dt),t instanceof ot)return t;if(1===t.filters.length)return c0(t.filters[0]);const e=t.filters.map(r=>c0(r));let n=Dt.create(e,t.op);return n=Gy(n),Kk(n)?n:(we(n instanceof Dt),we(nd(n)),we(n.filters.length>1),n.filters.reduce((r,i)=>l0(r,i)))}function l0(t,e){let n;return we(t instanceof ot||t instanceof Dt),we(e instanceof ot||e instanceof Dt),n=t instanceof ot?e instanceof ot?Dt.create([t,e],"and"):Qk(t,e):e instanceof ot?Qk(e,t):function(i,s){if(we(i.filters.length>0&&s.filters.length>0),nd(i)&&nd(s))return HO(i,s.getFilters());const o=jD(i)?i:s,a=jD(i)?s:i,u=o.filters.map(d=>l0(d,a));return Dt.create(u,"or")}(t,e),Gy(n)}function Qk(t,e){if(nd(e))return HO(e,t.getFilters());{const n=e.filters.map(r=>l0(t,r));return Dt.create(n,"or")}}function Gy(t){if(we(t instanceof ot||t instanceof Dt),t instanceof ot)return t;const e=t.getFilters();if(1===e.length)return Gy(e[0]);if(jO(t))return t;const n=e.map(i=>Gy(i)),r=[];return n.forEach(i=>{i instanceof ot?r.push(i):i instanceof Dt&&(i.op===t.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Dt.create(r,t.op)}class c8{constructor(){this.on=new d0}addToCollectionParentIndex(e,n){return this.on.add(n),N.resolve()}getCollectionParents(e,n){return N.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return N.resolve()}deleteFieldIndex(e,n){return N.resolve()}deleteAllFieldIndexes(e){return N.resolve()}createTargetIndexes(e,n){return N.resolve()}getDocumentsMatchingTarget(e,n){return N.resolve(null)}getIndexType(e,n){return N.resolve(0)}getFieldIndexes(e,n){return N.resolve([])}getNextCollectionGroupToUpdate(e){return N.resolve(null)}getMinOffset(e,n){return N.resolve(gi.min())}getMinOffsetFromCollectionGroup(e,n){return N.resolve(gi.min())}updateCollectionGroup(e,n,r){return N.resolve()}updateIndexEntries(e,n){return N.resolve()}}class d0{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Rt(ft.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Rt(ft.comparator)).toArray()}}const Wy=new Uint8Array(0);class l8{constructor(e,n){this.user=e,this.databaseId=n,this._n=new d0,this.an=new So(r=>Ku(r),(r,i)=>pp(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this._n.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this._n.add(n)});const s={collectionId:r,parent:Ar(i)};return Yk(e).put(s)}return N.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[pO(n),""],!1,!0);return Yk(e).W(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(Hs(o.parent))}return r})}addFieldIndex(e,n){const r=Pp(e),i={indexId:(a=n).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])};var a;delete i.indexId;const s=r.add(i);if(n.indexState){const o=fd(e);return s.next(a=>{o.put($k(a,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=Pp(e),i=fd(e),s=hd(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Pp(e),r=hd(e),i=fd(e);return n.H().next(()=>r.H()).next(()=>i.H())}createTargetIndexes(e,n){return N.forEach(this.un(n),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const s=new Wk(r).sn();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=hd(e);let i=!0;const s=new Map;return N.forEach(this.un(n),o=>this.cn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=ze();const a=[];return N.forEach(s,(u,d)=>{var O;te("IndexedDbIndexManager",`Using index ${O=u,`id=${O.indexId}|cg=${O.collectionGroup}|f=${O.fields.map(K=>`${K.fieldPath}:${K.kind}`).join(",")}`} to execute ${Ku(n)}`);const f=function(O,K){const ie=OD(K);if(void 0===ie)return null;for(const Re of Fy(O,ie.fieldPath))switch(Re.op){case"array-contains-any":return Re.value.arrayValue.values||[];case"array-contains":return[Re.value]}return null}(d,u),g=function(O,K){const ie=new Map;for(const Re of zu(K))for(const lt of Fy(O,Re.fieldPath))switch(lt.op){case"==":case"in":ie.set(Re.fieldPath.canonicalString(),lt.value);break;case"not-in":case"!=":return ie.set(Re.fieldPath.canonicalString(),lt.value),Array.from(ie.values())}return null}(d,u),_=function(O,K){const ie=[];let Re=!0;for(const lt of zu(K)){const Qt=0===lt.kind?WO(O,lt.fieldPath,O.startAt):ZO(O,lt.fieldPath,O.startAt);ie.push(Qt.value),Re&&(Re=Qt.inclusive)}return new Pa(ie,Re)}(d,u),y=function(O,K){const ie=[];let Re=!0;for(const lt of zu(K)){const Qt=0===lt.kind?ZO(O,lt.fieldPath,O.endAt):WO(O,lt.fieldPath,O.endAt);ie.push(Qt.value),Re&&(Re=Qt.inclusive)}return new Pa(ie,Re)}(d,u),E=this.ln(u,d,_),D=this.ln(u,d,y),b=this.hn(u,d,g),M=this.Pn(u.indexId,f,E,_.inclusive,D,y.inclusive,b);return N.forEach(M,R=>r.j(R,n.limit).next(O=>{O.forEach(K=>{const ie=ae.fromSegments(K.documentKey);o.has(ie)||(o=o.add(ie),a.push(ie))})}))}).next(()=>a)}return N.resolve(null)})}un(e){let n=this.an.get(e);return n||(n=0===e.filters.length?[e]:u8(Dt.create(e.filters,"and")).map(r=>qD(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.an.set(e,n),n)}Pn(e,n,r,i,s,o,a){const u=(null!=n?n.length:1)*Math.max(r.length,s.length),d=u/(null!=n?n.length:1),f=[];for(let g=0;g<u;++g){const _=n?this.In(n[g/d]):Wy,y=this.Tn(e,_,r[g%d],i),E=this.En(e,_,s[g%d],o),D=a.map(b=>this.Tn(e,_,b,!0));f.push(...this.createRange(y,E,D))}return f}Tn(e,n,r,i){const s=new nc(e,ae.empty(),n,r);return i?s:s.Ht()}En(e,n,r,i){const s=new nc(e,ae.empty(),n,r);return i?s.Ht():s}cn(e,n){const r=new Wk(n),i=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.en(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.un(n);return N.forEach(i,s=>this.cn(e,s).next(o=>{o?0!==r&&o.fields.length<function(u){let d=new Rt(Wt.comparator),f=!1;for(const g of u.filters)for(const _ of g.getFlattenedFilters())_.field.isKeyField()||("array-contains"===_.op||"array-contains-any"===_.op?f=!0:d=d.add(_.field));for(const g of u.orderBy)g.field.isKeyField()||(d=d.add(g.field));return d.size+(f?1:0)}(s)&&(r=1):r=0})).next(()=>null!==n.limit&&i.length>1&&2===r?1:r)}dn(e,n){const r=new Rp;for(const i of zu(e)){const s=n.data.field(i.fieldPath);if(null==s)return null;const o=r.jt(i.kind);tc.St.ht(s,o)}return r.Ut()}In(e){const n=new Rp;return tc.St.ht(e,n.jt(0)),n.Ut()}An(e,n){const r=new Rp;return tc.St.ht(Zu(this.databaseId,n),r.jt(function(s){const o=zu(s);return 0===o.length?0:o[o.length-1].kind}(e))),r.Ut()}hn(e,n,r){if(null===r)return[];let i=[];i.push(new Rp);let s=0;for(const o of zu(e)){const a=r[s++];for(const u of i)if(this.Rn(n,o.fieldPath)&&dp(a))i=this.Vn(i,o,a);else{const d=u.jt(o.kind);tc.St.ht(a,d)}}return this.mn(i)}ln(e,n,r){return this.hn(e,n,r.position)}mn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Ut();return n}Vn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const u=new Rp;u.seed(a.Ut()),tc.St.ht(o,u.jt(n.kind)),s.push(u)}return s}Rn(e,n){return!!e.filters.find(r=>r instanceof ot&&r.field.isEqual(n)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,n){const r=Pp(e),i=fd(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(s=>{const o=[];return N.forEach(s,a=>i.get([a.indexId,this.uid]).next(u=>{o.push(function(f,g){const _=g?new Xl(g.sequenceNumber,new gi(Xu(g.readTime),new ae(Hs(g.documentKey)),g.largestBatchId)):Xl.empty(),y=f.fields.map(([E,D])=>new Gu(Wt.fromServerFormat(E),D));return new Jl(f.indexId,f.collectionGroup,y,_)}(a,u))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:Fe(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Pp(e),s=fd(e);return this.fn(e).next(o=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>N.forEach(a,u=>s.put($k(u.indexId,this.user,o,r)))))}updateIndexEntries(e,n){const r=new Map;return N.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?N.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),N.forEach(a,u=>this.gn(e,i,u).next(d=>{const f=this.pn(s,u);return d.isEqual(f)?N.resolve():this.yn(e,s,u,d,f)}))))})}wn(e,n,r,i){return hd(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.An(r,n.key),documentKey:n.key.path.toArray()})}Sn(e,n,r,i){return hd(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.An(r,n.key),n.key.path.toArray()])}gn(e,n,r){const i=hd(e);let s=new Rt(Na);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.An(r,n)])},(o,a)=>{s=s.add(new nc(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}pn(e,n){let r=new Rt(Na);const i=this.dn(n,e);if(null==i)return r;const s=OD(n);if(null!=s){const o=e.data.field(s.fieldPath);if(dp(o))for(const a of o.arrayValue.values||[])r=r.add(new nc(n.indexId,e.key,this.In(a),i))}else r=r.add(new nc(n.indexId,e.key,Wy,i));return r}yn(e,n,r,i,s){te("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(u,d,f,g,_){const y=u.getIterator(),E=d.getIterator();let D=ed(y),b=ed(E);for(;D||b;){let M=!1,R=!1;if(D&&b){const O=f(D,b);O<0?R=!0:O>0&&(M=!0)}else null!=D?R=!0:M=!0;M?(g(b),b=ed(E)):R?(_(D),D=ed(y)):(D=ed(y),b=ed(E))}}(i,s,Na,a=>{o.push(this.wn(e,n,r,a))},a=>{o.push(this.Sn(e,n,r,a))}),N.waitFor(o)}fn(e){let n=1;return fd(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Na(o,a)).filter((o,a,u)=>!a||0!==Na(o,u[a-1]));const i=[];i.push(e);for(const o of r){const a=Na(o,e),u=Na(o,n);if(0===a)i[0]=e.Ht();else if(a>0&&u<0)i.push(o),i.push(o.Ht());else if(u>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.bn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,Wy,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,Wy,[]]))}return s}bn(e,n){return Na(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(Jk)}getMinOffset(e,n){return N.mapArray(this.un(n),r=>this.cn(e,r).next(i=>i||pe())).next(Jk)}}function Yk(t){return Jn(t,"collectionParents")}function hd(t){return Jn(t,"indexEntries")}function Pp(t){return Jn(t,"indexConfiguration")}function fd(t){return Jn(t,"indexState")}function Jk(t){we(0!==t.length);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;kD(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new gi(e.readTime,e.documentKey,n)}const Xk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class br{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new br(e,br.DEFAULT_COLLECTION_PERCENTILE,br.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function eL(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const u=r.Y({range:o},(f,g,_)=>(a++,_.delete()));s.push(u.next(()=>{we(1===a)}));const d=[];for(const f of n.mutations){const g=TO(e,f.key.path,n.batchId);s.push(i.delete(g)),d.push(f.key)}return N.waitFor(s).next(()=>d)}function Zy(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw pe();e=t.noDocument}return JSON.stringify(e).length}br.DEFAULT_COLLECTION_PERCENTILE=10,br.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,br.DEFAULT=new br(41943040,br.DEFAULT_COLLECTION_PERCENTILE,br.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),br.DISABLED=new br(-1,0,0);class Ky{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Dn={}}static ct(e,n,r,i){we(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new Ky(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ma(e).Y({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=pd(e),o=Ma(e);return o.add({}).next(a=>{we("number"==typeof a);const u=new KD(a,n,r,i),d=function(y,E,D){const b=D.baseMutations.map(R=>Ap(y.ut,R)),M=D.mutations.map(R=>Ap(y.ut,R));return{userId:E,batchId:D.batchId,localWriteTimeMs:D.localWriteTime.toMillis(),baseMutations:b,mutations:M}}(this.serializer,this.userId,u),f=[];let g=new Rt((_,y)=>Fe(_.canonicalString(),y.canonicalString()));for(const _ of i){const y=TO(this.userId,_.key.path,a);g=g.add(_.key.path.popLast()),f.push(o.put(d)),f.push(s.put(y,JG))}return g.forEach(_=>{f.push(this.indexManager.addToCollectionParentIndex(e,_))}),e.addOnCommittedListener(()=>{this.Dn[a]=u.keys()}),N.waitFor(f).next(()=>u)})}lookupMutationBatch(e,n){return Ma(e).get(n).next(r=>r?(we(r.userId===this.userId),ec(this.serializer,r)):null)}Cn(e,n){return this.Dn[n]?N.resolve(this.Dn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Dn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Ma(e).Y({index:"userMutationsIndex",range:i},(o,a,u)=>{a.userId===this.userId&&(we(a.batchId>=r),s=ec(this.serializer,a)),u.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ma(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ma(e).W("userMutationsIndex",n).next(r=>r.map(i=>ec(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Ry(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return pd(e).Y({range:i},(o,a,u)=>{const[d,f,g]=o,_=Hs(f);if(d===this.userId&&n.path.isEqual(_))return Ma(e).get(g).next(y=>{if(!y)throw pe();we(y.userId===this.userId),s.push(ec(this.serializer,y))});u.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Rt(Fe);const i=[];return n.forEach(s=>{const o=Ry(this.userId,s.path),a=IDBKeyRange.lowerBound(o),u=pd(e).Y({range:a},(d,f,g)=>{const[_,y,E]=d,D=Hs(y);_===this.userId&&s.path.isEqual(D)?r=r.add(E):g.done()});i.push(u)}),N.waitFor(i).next(()=>this.vn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=Ry(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Rt(Fe);return pd(e).Y({range:o},(u,d,f)=>{const[g,_,y]=u,E=Hs(_);g===this.userId&&r.isPrefixOf(E)?E.length===i&&(a=a.add(y)):f.done()}).next(()=>this.vn(e,a))}vn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(Ma(e).get(s).next(o=>{if(null===o)throw pe();we(o.userId===this.userId),r.push(ec(this.serializer,o))}))}),N.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return eL(e.ae,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Fn(n.batchId)}),N.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return N.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return pd(e).Y({range:r},(s,o,a)=>{if(s[0]===this.userId){const u=Hs(s[1]);i.push(u)}else a.done()}).next(()=>{we(0===i.length)})})}containsKey(e,n){return tL(e,this.userId,n)}Mn(e){return nL(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function tL(t,e,n){const r=Ry(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return pd(t).Y({range:s,J:!0},(a,u,d)=>{const[f,g,_]=a;f===e&&g===i&&(o=!0),d.done()}).next(()=>o)}function Ma(t){return Jn(t,"mutations")}function pd(t){return Jn(t,"documentMutations")}function nL(t){return Jn(t,"mutationQueues")}class rc{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new rc(0)}static Nn(){return new rc(-1)}}class d8{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{const r=new rc(n.highestTargetId);return n.highestTargetId=r.next(),this.Ln(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>Te.fromTimestamp(new tn(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Ln(e,i)))}addTargetData(e,n){return this.kn(e,n).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.qn(n,r),this.Ln(e,r))))}updateTargetData(e,n){return this.kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>gd(e).delete(n.targetId)).next(()=>this.Bn(e)).next(r=>(we(r.targetCount>0),r.targetCount-=1,this.Ln(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return gd(e).Y((o,a)=>{const u=bp(a);u.sequenceNumber<=n&&null===r.get(u.targetId)&&(i++,s.push(this.removeTargetData(e,u)))}).next(()=>N.waitFor(s)).next(()=>i)}forEachTarget(e,n){return gd(e).Y((r,i)=>{const s=bp(i);n(s)})}Bn(e){return rL(e).get("targetGlobalKey").next(n=>(we(null!==n),n))}Ln(e,n){return rL(e).put("targetGlobalKey",n)}kn(e,n){return gd(e).put(Bk(this.serializer,n))}qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Ku(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return gd(e).Y({range:i,index:"queryTargetsIndex"},(o,a,u)=>{const d=bp(a);pp(n,d.target)&&(s=d,u.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=Oa(e);return n.forEach(o=>{const a=Ar(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),N.waitFor(i)}removeMatchingKeys(e,n,r){const i=Oa(e);return N.forEach(n,s=>{const o=Ar(s.path);return N.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=Oa(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Oa(e);let s=ze();return i.Y({range:r,J:!0},(o,a,u)=>{const d=Hs(o[1]),f=new ae(d);s=s.add(f)}).next(()=>s)}containsKey(e,n){const r=Ar(n.path),i=IDBKeyRange.bound([r],[pO(r)],!1,!0);let s=0;return Oa(e).Y({index:"documentTargetsIndex",J:!0,range:i},([o,a],u,d)=>{0!==o&&(s++,d.done())}).next(()=>s>0)}_t(e,n){return gd(e).get(n).next(r=>r?bp(r):null)}}function gd(t){return Jn(t,"targets")}function rL(t){return Jn(t,"targetGlobal")}function Oa(t){return Jn(t,"targetDocuments")}function iL([t,e],[n,r]){const i=Fe(t,n);return 0===i?Fe(e,r):i}class h8{constructor(e){this.Qn=e,this.buffer=new Rt(iL),this.Kn=0}$n(){return++this.Kn}Un(e){const n=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();iL(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class sL{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Wn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return null!==this.Wn}Gn(e){var n=this;te("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,z.Z)(function*(){n.Wn=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(r){Ta(r)?te("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield wa(r)}yield n.Gn(3e5)}))}}class f8{constructor(e,n){this.zn=e,this.params=n}calculateTargetCount(e,n){return this.zn.jn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(0===n)return N.resolve(mi._e);const r=new h8(n);return this.zn.forEachTarget(e,i=>r.Un(i.sequenceNumber)).next(()=>this.zn.Hn(e,i=>r.Un(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.zn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.zn.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(te("LruGarbageCollector","Garbage collection skipped; disabled"),N.resolve(Xk)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(te("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Xk):this.Jn(e,n))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,n){let r,i,s,o,a,u,d;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,o=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,a=Date.now(),this.removeTargets(e,r,n))).next(g=>(s=g,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(d=Date.now(),Ql()<=Us.in.DEBUG&&te("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-f}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(u-a)+`ms\n\tRemoved ${g} documents in `+(d-u)+`ms\nTotal Duration: ${d-f}ms`),N.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g})))}}class p8{constructor(e,n){this.db=e,this.garbageCollector=function oL(t,e){return new f8(t,e)}(this,n)}jn(e){const n=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Yn(e){let n=0;return this.Hn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Hn(e,n){return this.Zn(e,(r,i)=>n(i))}addReference(e,n,r){return Qy(e,r)}removeReference(e,n,r){return Qy(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Qy(e,n)}Xn(e,n){return function(i,s){let o=!1;return nL(i).Z(a=>tL(i,a,s).next(u=>(u&&(o=!0),N.resolve(!u)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Zn(e,(o,a)=>{if(a<=n){const u=this.Xn(e,o).next(d=>{if(!d)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Te.min()),Oa(e).delete([0,Ar(o.path)])))});i.push(u)}}).next(()=>N.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Qy(e,n)}Zn(e,n){const r=Oa(e);let i,s=mi._e;return r.Y({index:"documentTargetsIndex"},([o,a],{path:u,sequenceNumber:d})=>{0===o?(s!==mi._e&&n(new ae(Hs(i)),s),s=d,i=u):s=mi._e}).next(()=>{s!==mi._e&&n(new ae(Hs(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Qy(t,e){return Oa(t).put((i=t.currentSequenceNumber,{targetId:0,path:Ar(e.path),sequenceNumber:i}));var i}class aL{constructor(){this.changes=new So(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Zt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return void 0!==r?N.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class g8{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return ic(e).put(r)}removeEntry(e,n,r){return ic(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],qy(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.er(e,r)))}getEntry(e,n){let r=Zt.newInvalidDocument(n);return ic(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(xp(n))},(i,s)=>{r=this.tr(n,s)}).next(()=>r)}nr(e,n){let r={size:0,document:Zt.newInvalidDocument(n)};return ic(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(xp(n))},(i,s)=>{r={document:this.tr(n,s),size:Zy(s)}}).next(()=>r)}getEntries(e,n){let r=oi();return this.rr(e,n,(i,s)=>{const o=this.tr(i,s);r=r.insert(i,o)}).next(()=>r)}ir(e,n){let r=oi(),i=new Ut(ae.comparator);return this.rr(e,n,(s,o)=>{const a=this.tr(s,o);r=r.insert(s,a),i=i.insert(s,Zy(o))}).next(()=>({documents:r,sr:i}))}rr(e,n,r){if(n.isEmpty())return N.resolve();let i=new Rt(dL);n.forEach(u=>i=i.add(u));const s=IDBKeyRange.bound(xp(i.first()),xp(i.last())),o=i.getIterator();let a=o.getNext();return ic(e).Y({index:"documentKeyIndex",range:s},(u,d,f)=>{const g=ae.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;a&&dL(a,g)<0;)r(a,null),a=o.getNext();a&&a.isEqual(g)&&(r(a,d),a=o.hasNext()?o.getNext():null),a?f.U(xp(a)):f.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),qy(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ic(e).W(IDBKeyRange.bound(a,u,!0)).next(d=>{s?.incrementDocumentReadCount(d.length);let f=oi();for(const g of d){const _=this.tr(ae.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);_.isFoundDocument()&&(mp(n,_)||i.has(_.key))&&(f=f.insert(_.key,_))}return f})}getAllFromCollectionGroup(e,n,r,i){let s=oi();const o=lL(n,r),a=lL(n,gi.max());return ic(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(u,d,f)=>{const g=this.tr(ae.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);s=s.insert(g.key,g),s.size===i&&f.done()}).next(()=>s)}newChangeBuffer(e){return new m8(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return cL(e).get("remoteDocumentGlobalKey").next(n=>(we(!!n),n))}er(e,n){return cL(e).put("remoteDocumentGlobalKey",n)}tr(e,n){if(n){const r=function n8(t,e){let n;if(e.document)n=Nk(t.ut,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ae.fromSegments(e.noDocument.path),i=Xu(e.noDocument.readTime);n=Zt.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return pe();{const r=ae.fromSegments(e.unknownDocument.path),i=Xu(e.unknownDocument.version);n=Zt.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new tn(i[0],i[1]);return Te.fromTimestamp(s)}(e.readTime)),n}(this.serializer,n);if(!r.isNoDocument()||!r.version.isEqual(Te.min()))return r}return Zt.newInvalidDocument(e)}}function uL(t){return new g8(t)}class m8 extends aL{constructor(e,n){super(),this._r=e,this.trackRemovals=n,this.ar=new So(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Rt((s,o)=>Fe(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.ar.get(s);if(n.push(this._r.removeEntry(e,s,a.readTime)),o.isValidDocument()){const u=Uk(this._r.serializer,o);i=i.add(s.path.popLast());const d=Zy(u);r+=d-a.size,n.push(this._r.addEntry(e,s,u))}else if(r-=a.size,this.trackRemovals){const u=Uk(this._r.serializer,o.convertToNoDocument(Te.min()));n.push(this._r.addEntry(e,s,u))}}),i.forEach(s=>{n.push(this._r.indexManager.addToCollectionParentIndex(e,s))}),n.push(this._r.updateMetadata(e,r)),N.waitFor(n)}getFromCache(e,n){return this._r.nr(e,n).next(r=>(this.ar.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this._r.ir(e,n).next(({documents:r,sr:i})=>(i.forEach((s,o)=>{this.ar.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function cL(t){return Jn(t,"remoteDocumentGlobal")}function ic(t){return Jn(t,"remoteDocumentsV14")}function xp(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function lL(t,e){const n=e.documentKey.path.toArray();return[t,qy(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function dL(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Fe(n[s],r[s]),i)return i;return i=Fe(n.length,r.length),i||(i=Fe(n[n.length-2],r[r.length-2]),i||Fe(n[n.length-1],r[r.length-1]))}class _8{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class hL{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(null!==r&&Ip(r.mutation,i,si.empty(),tn.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ze()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ze()){const i=zs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=_p();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=zs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ze()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=oi();const o=yp(),a=yp();return n.forEach((u,d)=>{const f=r.get(d.key);i.has(d.key)&&(void 0===f||f.mutation instanceof Ro)?s=s.insert(d.key,d):void 0!==f?(o.set(d.key,f.mutation.getFieldMask()),Ip(f.mutation,d,f.mutation.getFieldMask(),tn.now())):o.set(d.key,si.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var g;return a.set(d,new _8(f,null!==(g=o.get(d))&&void 0!==g?g:null))}),a))}recalculateAndSaveOverlays(e,n){const r=yp();let i=new Ut((o,a)=>o-a),s=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const d=n.get(u);if(null===d)return;let f=r.get(u)||si.empty();f=a.applyToLocalView(d,f),r.set(u,f);const g=(i.get(a.batchId)||ze()).add(u);i=i.insert(a.batchId,g)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),d=u.key,f=u.value,g=rk();f.forEach(_=>{if(!s.has(_)){const y=hk(n.get(_),r.get(_));null!==y&&g.set(_,y),s=s.add(_)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,g))}return N.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return ae.isDocumentKey((o=n).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):zD(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i);var o}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):N.resolve(zs());let a=-1,u=s;return o.next(d=>N.forEach(d,(f,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),s.get(f)?N.resolve():this.remoteDocumentCache.getEntry(e,f).next(_=>{u=u.insert(f,_)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,u,d,ze())).next(f=>({batchId:a,changes:nk(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ae(n)).next(r=>{let i=_p();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=_p();return this.indexManager.getCollectionParents(e,s).next(a=>N.forEach(a,u=>{const d=(g=n,_=u.child(s),new bo(_,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt));var g,_;return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(f=>{f.forEach((g,_)=>{o=o.insert(g,_)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,d)=>{const f=d.getKey();null===o.get(f)&&(o=o.insert(f,Zt.newInvalidDocument(f)))});let a=_p();return o.forEach((u,d)=>{const f=s.get(u);void 0!==f&&Ip(f.mutation,d,si.empty(),tn.now()),mp(n,d)&&(a=a.insert(u,d))}),a})}}class y8{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return N.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,{id:(i=n).id,version:i.version,createTime:yn(i.createTime)}),N.resolve();var i}getNamedQuery(e,n){return N.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,{name:(i=n).name,query:s0(i.bundledQuery),readTime:yn(i.readTime)}),N.resolve();var i}}class v8{constructor(){this.overlays=new Ut(ae.comparator),this.lr=new Map}getOverlay(e,n){return N.resolve(this.overlays.get(n))}getOverlays(e,n){const r=zs();return N.forEach(n,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.lt(e,n,s)}),N.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.lr.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.lr.delete(r)),N.resolve()}getOverlaysForCollection(e,n,r){const i=zs(),s=n.length+1,o=new ae(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return N.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ut((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=s.get(d.largestBatchId);null===f&&(f=zs(),s=s.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const a=zs(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>a.set(d,f)),!(a.size()>=i)););return N.resolve(a)}lt(e,n,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.lr.get(i.largestBatchId).delete(r.key);this.lr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new YD(n,r));let s=this.lr.get(n);void 0===s&&(s=ze(),this.lr.set(n,s)),this.lr.set(n,s.add(r.key))}}class h0{constructor(){this.hr=new Rt(Xn.Pr),this.Ir=new Rt(Xn.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){const r=new Xn(e,n);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.dr(new Xn(e,n))}Ar(e,n){e.forEach(r=>this.removeReference(r,n))}Rr(e){const n=new ae(new ft([])),r=new Xn(n,e),i=new Xn(n,e+1),s=[];return this.Ir.forEachInRange([r,i],o=>{this.dr(o),s.push(o.key)}),s}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const n=new ae(new ft([])),r=new Xn(n,e),i=new Xn(n,e+1);let s=ze();return this.Ir.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Xn(e,0),r=this.hr.firstAfterOrEqual(n);return null!==r&&e.isEqual(r.key)}}class Xn{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return ae.comparator(e.key,n.key)||Fe(e.gr,n.gr)}static Tr(e,n){return Fe(e.gr,n.gr)||ae.comparator(e.key,n.key)}}class I8{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new Rt(Xn.Pr)}checkEmpty(e){return N.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,r,i){const s=this.pr;this.pr++;const o=new KD(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.yr=this.yr.add(new Xn(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return N.resolve(o)}lookupMutationBatch(e,n){return N.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){const i=this.Sr(n+1),s=i<0?0:i;return N.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return N.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return N.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Xn(n,0),i=new Xn(n,Number.POSITIVE_INFINITY),s=[];return this.yr.forEachInRange([r,i],o=>{const a=this.wr(o.gr);s.push(a)}),N.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Rt(Fe);return n.forEach(i=>{const s=new Xn(i,0),o=new Xn(i,Number.POSITIVE_INFINITY);this.yr.forEachInRange([s,o],a=>{r=r.add(a.gr)})}),N.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ae.isDocumentKey(s)||(s=s.child(""));const o=new Xn(new ae(s),0);let a=new Rt(Fe);return this.yr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(u.gr)),!0)},o),N.resolve(this.br(a))}br(e){const n=[];return e.forEach(r=>{const i=this.wr(r);null!==i&&n.push(i)}),n}removeMutationBatch(e,n){we(0===this.Dr(n.batchId,"removed")),this.mutationQueue.shift();let r=this.yr;return N.forEach(n.mutations,i=>{const s=new Xn(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.yr=r})}Fn(e){}containsKey(e,n){const r=new Xn(n,0),i=this.yr.firstAfterOrEqual(r);return N.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return N.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class E8{constructor(e){this.Cr=e,this.docs=new Ut(ae.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return N.resolve(r?r.document.mutableCopy():Zt.newInvalidDocument(n))}getEntries(e,n){let r=oi();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Zt.newInvalidDocument(i))}),N.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=oi();const o=n.path,a=new ae(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||kD(mO(f),r)<=0||(i.has(f.key)||mp(n,f))&&(s=s.insert(f.key,f.mutableCopy()))}return N.resolve(s)}getAllFromCollectionGroup(e,n,r,i){pe()}vr(e,n){return N.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new w8(this)}getSize(e){return N.resolve(this.size)}}class w8 extends aL{constructor(e){super(),this._r=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this._r.addEntry(e,i)):this._r.removeEntry(r)}),N.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}}class T8{constructor(e){this.persistence=e,this.Fr=new So(n=>Ku(n),pp),this.lastRemoteSnapshotVersion=Te.min(),this.highestTargetId=0,this.Mr=0,this.Or=new h0,this.targetCount=0,this.Nr=rc.On()}forEachTarget(e,n){return this.Fr.forEach((r,i)=>n(i)),N.resolve()}getLastRemoteSnapshotVersion(e){return N.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return N.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),N.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Mr&&(this.Mr=n),N.resolve()}kn(e){this.Fr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Nr=new rc(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,N.resolve()}updateTargetData(e,n){return this.kn(n),N.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,N.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Fr.forEach((o,a)=>{a.sequenceNumber<=n&&null===r.get(a.targetId)&&(this.Fr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),N.waitFor(s).next(()=>i)}getTargetCount(e){return N.resolve(this.targetCount)}getTargetData(e,n){const r=this.Fr.get(n)||null;return N.resolve(r)}addMatchingKeys(e,n,r){return this.Or.Er(n,r),N.resolve()}removeMatchingKeys(e,n,r){this.Or.Ar(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),N.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),N.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Or.mr(n);return N.resolve(r)}containsKey(e,n){return N.resolve(this.Or.containsKey(n))}}class f0{constructor(e,n){this.Br={},this.overlays={},this.Lr=new mi(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new T8(this),this.indexManager=new c8,this.remoteDocumentCache=new E8(r=>this.referenceDelegate.Qr(r)),this.serializer=new Vk(n),this.Kr=new y8(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new v8,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new I8(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,r){te("MemoryPersistence","Starting transaction:",e);const i=new D8(this.Lr.next());return this.referenceDelegate.$r(),r(i).next(s=>this.referenceDelegate.Ur(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Wr(e,n){return N.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class D8 extends yO{constructor(e){super(),this.currentSequenceNumber=e}}class Yy{constructor(e){this.persistence=e,this.Gr=new h0,this.zr=null}static jr(e){return new Yy(e)}get Hr(){if(this.zr)return this.zr;throw pe()}addReference(e,n,r){return this.Gr.addReference(r,n),this.Hr.delete(r.toString()),N.resolve()}removeReference(e,n,r){return this.Gr.removeReference(r,n),this.Hr.add(r.toString()),N.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),N.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(i=>this.Hr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Hr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return N.forEach(this.Hr,r=>{const i=ae.fromPath(r);return this.Jr(e,i).next(s=>{s||n.removeEntry(i,Te.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(r=>{r?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return N.or([()=>N.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}}class C8{constructor(e){this.serializer=e}N(e,n,r,i){const s=new Sy("createOrUpgrade",n);var u;r<1&&i>=1&&(e.createObjectStore("owner"),(u=e).createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",wO,{unique:!0}),u.createObjectStore("documentMutations"),fL(e),function(u){u.createObjectStore("remoteDocuments")}(e));let o=N.resolve();return r<3&&i>=3&&(0!==r&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),fL(e)),o=o.next(()=>function(u){const d=u.store("targetGlobal"),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Te.min().toTimestamp(),targetCount:0};return d.put("targetGlobalKey",f)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(u,d){return d.store("mutations").W().next(f=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",wO,{unique:!0});const g=d.store("mutations"),_=f.map(y=>g.put(y));return N.waitFor(_)})}(e,s))),o=o.next(()=>{!function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.Zr(s))),r<6&&i>=6&&(o=o.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(s)))),r<7&&i>=7&&(o=o.next(()=>this.ei(s))),r<8&&i>=8&&(o=o.next(()=>this.ti(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.ni(s))),r<11&&i>=11&&(o=o.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(u){const d=u.createObjectStore("documentOverlays",{keyPath:l5});d.createIndex("collectionPathOverlayIndex",d5,{unique:!1}),d.createIndex("collectionGroupOverlayIndex",h5,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(u){const d=u.createObjectStore("remoteDocumentsV14",{keyPath:XG});d.createIndex("documentKeyIndex",e5),d.createIndex("collectionGroupIndex",t5)}(e)).next(()=>this.ri(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ii(e,s))),r<15&&i>=15&&(o=o.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:o5}).createIndex("sequenceNumberIndex",a5,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:u5}).createIndex("documentKeyIndex",c5,{unique:!1})}(e))),o}Xr(e){let n=0;return e.store("remoteDocuments").Y((r,i)=>{n+=Zy(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Zr(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>N.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",o).next(a=>N.forEach(a,u=>{we(u.userId===s.userId);const d=ec(this.serializer,u);return eL(e,s.userId,d).next(()=>{})}))}))}ei(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.Y((o,a)=>{const u=new ft(o),d=[0,Ar(u)];s.push(n.get(d).next(f=>f?N.resolve():n.put({targetId:0,path:Ar(u),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>N.waitFor(s))})}ti(e,n){e.createObjectStore("collectionParents",{keyPath:s5});const r=n.store("collectionParents"),i=new d0,s=o=>{if(i.add(o)){const a=o.lastSegment(),u=o.popLast();return r.put({collectionId:a,parent:Ar(u)})}};return n.store("remoteDocuments").Y({J:!0},(o,a)=>{const u=new ft(o);return s(u.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([o,a,u],d)=>{const f=Hs(a);return s(f.popLast())}))}ni(e){const n=e.store("targets");return n.Y((r,i)=>{const s=bp(i),o=Bk(this.serializer,s);return n.put(o)})}ri(e,n){const r=n.store("remoteDocuments"),i=[];return r.Y((s,o)=>{const a=n.store("remoteDocumentsV14"),u=(g=o,g.document?new ae(ft.fromString(g.document.name).popFirst(5)):g.noDocument?ae.fromSegments(g.noDocument.path):g.unknownDocument?ae.fromSegments(g.unknownDocument.path):pe()).path.toArray(),d={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var g;i.push(a.put(d))}).next(()=>N.waitFor(i))}ii(e,n){const r=n.store("mutations"),i=uL(this.serializer),s=new f0(Yy.jr,this.serializer.ut);return r.W().next(o=>{const a=new Map;return o.forEach(u=>{var d;let f=null!==(d=a.get(u.userId))&&void 0!==d?d:ze();ec(this.serializer,u).keys().forEach(g=>f=f.add(g)),a.set(u.userId,f)}),N.forEach(a,(u,d)=>{const f=new Yn(d),g=zy.ct(this.serializer,f),_=s.getIndexManager(f),y=Ky.ct(f,this.serializer,_,s.referenceDelegate);return new hL(i,y,g,_).recalculateAndSaveOverlaysForDocumentKeys(new VD(n,mi._e),u).next()})})}}function fL(t){t.createObjectStore("targetDocuments",{keyPath:r5}).createIndex("documentTargetsIndex",i5,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",n5,{unique:!0}),t.createObjectStore("targetGlobal")}const p0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class g0{constructor(e,n,r,i,s,o,a,u,d,f,g=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.si=s,this.window=o,this.document=a,this.oi=d,this._i=f,this.ai=g,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=_=>Promise.resolve(),!g0.D())throw new X(L.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new p8(this,i),this.Ii=n+"main",this.serializer=new Vk(u),this.Ti=new cs(this.Ii,this.ai,new C8(this.serializer)),this.qr=new d8(this.referenceDelegate,this.serializer),this.remoteDocumentCache=uL(this.serializer),this.Kr=new r8,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,!1===f&&_n("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new X(L.FAILED_PRECONDITION,p0);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.qr.getHighestSequenceNumber(e))}).then(e=>{this.Lr=new mi(e,this.oi)}).then(()=>{this.kr=!0}).catch(e=>(this.Ti&&this.Ti.close(),Promise.reject(e)))}mi(e){var n=this;return this.Pi=function(){var r=(0,z.Z)(function*(i){if(n.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L(function(){var n=(0,z.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((0,z.Z)(function*(){n.started&&(yield n.di())})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Xy(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(n=>{n||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(e)).next(n=>this.isPrimary&&!n?this.pi(e).next(()=>!1):!!n&&this.yi(e).next(()=>!0))).catch(e=>{if(Ta(e))return te("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return te("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.Pi(e)),this.isPrimary=e})}fi(e){return Np(e).get("owner").next(n=>N.resolve(this.wi(n)))}Si(e){return Xy(e).delete(this.clientId)}bi(){var e=this;return(0,z.Z)(function*(){if(e.isPrimary&&!e.Di(e.hi,18e5)){e.hi=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Jn(r,"clientMetadata");return i.W().next(s=>{const o=e.Ci(s,18e5),a=s.filter(u=>-1===o.indexOf(u));return N.forEach(a,u=>i.delete(u.clientId)).next(()=>a)})}).catch(()=>[]);if(e.Ei)for(const r of n)e.Ei.removeItem(e.vi(r.clientId))}})()}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?N.resolve(!0):Np(e).get("owner").next(n=>{if(null!==n&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)){if(this.wi(n)&&this.networkEnabled)return!0;if(!this.wi(n)){if(!n.allowTabSynchronization)throw new X(L.FAILED_PRECONDITION,p0);return!1}}return!(!this.networkEnabled||!this.inForeground)||Xy(e).W().next(r=>void 0===this.Ci(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(n=>(this.isPrimary!==n&&te("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,z.Z)(function*(){e.kr=!1,e.Mi(),e.li&&(e.li.cancel(),e.li=null),e.xi(),e.Oi(),yield e.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const r=new VD(n,mi._e);return e.pi(r).next(()=>e.Si(r))}),e.Ti.close(),e.Ni()})()}Ci(e,n){return e.filter(r=>this.Di(r.updateTimeMs,n)&&!this.Fi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>Xy(e).W().next(n=>this.Ci(n,18e5).map(r=>r.clientId)))}get started(){return this.kr}getMutationQueue(e,n){return Ky.ct(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new l8(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return zy.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,n,r){te("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===n?"readonly":"readwrite",s=15===(u=this.ai)?p5:14===u?AO:13===u?CO:12===u?f5:11===u?DO:void pe();var u;let o;return this.Ti.runTransaction(e,i,s,a=>(o=new VD(a,this.Lr?this.Lr.next():mi._e),"readwrite-primary"===n?this.fi(o).next(u=>!!u||this.gi(o)).next(u=>{if(!u)throw _n(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new X(L.FAILED_PRECONDITION,_O);return r(o)}).next(u=>this.yi(o).next(()=>u)):this.Li(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Li(e){return Np(e).get("owner").next(n=>{if(null!==n&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)&&!this.wi(n)&&!(this._i||this.allowTabSynchronization&&n.allowTabSynchronization))throw new X(L.FAILED_PRECONDITION,p0)})}yi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Np(e).put("owner",n)}static D(){return cs.D()}pi(e){const n=Np(e);return n.get("owner").next(r=>this.wi(r)?(te("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):N.resolve())}Di(e,n){const r=Date.now();return!(e<r-n||e>r&&(_n(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ai(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Mi();const n=/(?:Version|Mobile)\/1[456]/;(0,rt.G6)()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var n;try{const r=null!==(null===(n=this.Ei)||void 0===n?void 0:n.getItem(this.vi(e)));return te("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return _n("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){_n("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Np(t){return Jn(t,"owner")}function Xy(t){return Jn(t,"clientMetadata")}function m0(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class _0{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ki=r,this.qi=i}static Qi(e,n){let r=ze(),i=ze();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new _0(e,n.fromCache,r,i)}}class A8{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class pL{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,n){this.Gi=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.zi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ji(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new A8;return this.Hi(e,n,o).next(a=>{if(s.result=a,this.$i)return this.Ji(e,n,o,a.size)})}).next(()=>s.result)}Ji(e,n,r,i){return r.documentReadCount<this.Ui?(Ql()<=Us.in.DEBUG&&te("QueryEngine","SDK will not create cache indexes for query:",sd(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),N.resolve()):(Ql()<=Us.in.DEBUG&&te("QueryEngine","Query:",sd(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Wi*i?(Ql()<=Us.in.DEBUG&&te("QueryEngine","The SDK decides to create cache indexes for query:",sd(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zr(n))):N.resolve())}zi(e,n){if(QO(n))return N.resolve(null);let r=zr(n);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==n.limit&&1===i&&(n=Vy(n,null,"F"),r=zr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ze(...s);return this.Gi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.Yi(n,a);return this.Zi(n,d,o,u.readTime)?this.zi(e,Vy(n,null,"F")):this.Xi(e,d,n,u)}))})))}ji(e,n,r,i){return QO(n)||i.isEqual(Te.min())?N.resolve(null):this.Gi.getDocuments(e,r).next(s=>{const o=this.Yi(n,s);return this.Zi(n,o,r,i)?N.resolve(null):(Ql()<=Us.in.DEBUG&&te("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),sd(n)),this.Xi(e,o,n,gO(i,-1)).next(a=>a))})}Yi(e,n){let r=new Rt(ek(e));return n.forEach((i,s)=>{mp(e,s)&&(r=r.add(s))}),r}Zi(e,n,r,i){if(null===e.limit)return!1;if(r.size!==n.size)return!0;const s="F"===e.limitType?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Hi(e,n,r){return Ql()<=Us.in.DEBUG&&te("QueryEngine","Using full collection scan to execute query:",sd(n)),this.Gi.getDocumentsMatchingQuery(e,n,gi.min(),r)}Xi(e,n,r,i){return this.Gi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}class b8{constructor(e,n,r,i){this.persistence=e,this.es=n,this.serializer=i,this.ts=new Ut(Fe),this.ns=new So(s=>Ku(s),pp),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(r)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new hL(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ts))}}function gL(t,e,n,r){return new b8(t,e,n,r)}function mL(t,e){return y0.apply(this,arguments)}function y0(){return y0=(0,z.Z)(function*(t,e){const n=se(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.os(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=ze();for(const d of i){o.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of s){a.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({_s:d,removedBatchIds:o,addedBatchIds:a}))})})}),y0.apply(this,arguments)}function _L(t){const e=se(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function yL(t,e,n){let r=ze(),i=ze();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=oi();return n.forEach((a,u)=>{const d=s.get(a);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(Te.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||0===u.version.compareTo(d.version)&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):te("LocalStore","Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",u.version)}),{us:o,cs:i}})}function P8(t,e){const n=se(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function md(t,e){const n=se(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.qr.getTargetData(r,e).next(s=>s?(i=s,N.resolve(i)):n.qr.allocateTargetId(r).next(o=>(i=new Po(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ts.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ts=n.ts.insert(r.targetId,r),n.ns.set(e,r.targetId)),r})}function _d(t,e,n){return v0.apply(this,arguments)}function v0(){return v0=(0,z.Z)(function*(t,e,n){const r=se(t),i=r.ts.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Ta(o))throw o;te("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ts=r.ts.remove(e),r.ns.delete(i.target)}),v0.apply(this,arguments)}function ev(t,e,n){const r=se(t);let i=Te.min(),s=ze();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,f){const g=se(u),_=g.ns.get(f);return void 0!==_?N.resolve(g.ts.get(_)):g.qr.getTargetData(d,f)}(r,o,zr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.es.getDocumentsMatchingQuery(o,e,n?i:Te.min(),n?s:ze())).next(a=>(EL(r,XO(e),a),{documents:a,ls:s})))}function vL(t,e){const n=se(t),r=se(n.qr),i=n.ts.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r._t(s,e).next(o=>o?o.target:null))}function IL(t,e){const n=se(t),r=n.rs.get(e)||Te.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.ss.getAllFromCollectionGroup(i,e,gO(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(EL(n,e,i),i))}function EL(t,e,n){let r=t.rs.get(e)||Te.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.rs.set(e,r)}function I0(){return I0=(0,z.Z)(function*(t,e,n,r){const i=se(t);let s=ze(),o=oi();for(const d of n){const f=e.hs(d.metadata.name);d.document&&(s=s.add(f));const g=e.Ps(d);g.setReadTime(e.Is(d.metadata.readTime)),o=o.insert(f,g)}const a=i.ss.newChangeBuffer({trackRemovals:!0}),u=yield md(i,(f=r,zr(rd(ft.fromString(`__bundle__/docs/${f}`)))));var f;return i.persistence.runTransaction("Apply bundle documents","readwrite",d=>yL(d,a,o).next(f=>(a.apply(d),f)).next(f=>i.qr.removeMatchingKeysForTargetId(d,u.targetId).next(()=>i.qr.addMatchingKeys(d,s,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(d,f.us,f.cs)).next(()=>f.us)))}),I0.apply(this,arguments)}function N8(t,e){return E0.apply(this,arguments)}function E0(){return E0=(0,z.Z)(function*(t,e,n=ze()){const r=yield md(t,zr(s0(e.bundledQuery))),i=se(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=yn(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Kr.saveNamedQuery(s,e);const a=r.withResumeToken(Hn.EMPTY_BYTE_STRING,o);return i.ts=i.ts.insert(a.targetId,a),i.qr.updateTargetData(s,a).next(()=>i.qr.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.qr.addMatchingKeys(s,n,r.targetId)).next(()=>i.Kr.saveNamedQuery(s,e))})}),E0.apply(this,arguments)}function wL(t,e){return`firestore_clients_${t}_${e}`}function TL(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function w0(t,e){return`firestore_targets_${t}_${e}`}class tv{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ts(e,n,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new X(i.error.code,i.error.message))),o?new tv(e,n,i.state,s):(_n("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Mp{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ts(e,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new X(r.error.code,r.error.message))),s?new Mp(e,r.state,i):(_n("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class nv{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ts(e,n){const r=JSON.parse(n);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=WD();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=IO(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new nv(e,s):(_n("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class T0{constructor(e,n){this.clientId=e,this.onlineState=n}static Ts(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new T0(n.clientId,n.onlineState):(_n("SharedClientState",`Failed to parse online state: ${e}`),null)}}class D0{constructor(){this.activeTargetIds=WD()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class C0{constructor(e,n,r,i,s){this.window=e,this.si=n,this.persistenceKey=r,this.Rs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new Ut(Fe),this.started=!1,this.ps=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ys=wL(this.persistenceKey,this.Rs),this.ws=`firestore_sequence_number_${this.persistenceKey}`,this.gs=this.gs.insert(this.Rs,new D0),this.Ss=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.Cs=`firestore_online_state_${this.persistenceKey}`,this.vs=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,z.Z)(function*(){const n=yield e.syncEngine.Bi();for(const i of n){if(i===e.Rs)continue;const s=e.getItem(wL(e.persistenceKey,i));if(s){const o=nv.Ts(i,s);o&&(e.gs=e.gs.insert(o.clientId,o))}}e.Fs();const r=e.storage.getItem(e.Cs);if(r){const i=e.Ms(r);i&&e.xs(i)}for(const i of e.ps)e.fs(i);e.ps=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let n=!1;return this.gs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,n,r){this.Ns(e,n,r),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(w0(this.persistenceKey,e));if(r){const i=Mp.Ts(e,r);i&&(n=i.state)}}return this.Ls.ds(e),this.Fs(),n}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(w0(this.persistenceKey,e))}updateQueryState(e,n,r){this.ks(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return te("SharedClientState","READ",e,n),n}setItem(e,n){te("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){te("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){var n=this;const r=e;if(r.storageArea===this.storage){if(te("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ys)return void _n("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((0,z.Z)(function*(){if(n.started){if(null!==r.key)if(n.Ss.test(r.key)){if(null==r.newValue){const i=n.Ks(r.key);return n.$s(i,null)}{const i=n.Us(r.key,r.newValue);if(i)return n.$s(i.clientId,i)}}else if(n.bs.test(r.key)){if(null!==r.newValue){const i=n.Ws(r.key,r.newValue);if(i)return n.Gs(i)}}else if(n.Ds.test(r.key)){if(null!==r.newValue){const i=n.zs(r.key,r.newValue);if(i)return n.js(i)}}else if(r.key===n.Cs){if(null!==r.newValue){const i=n.Ms(r.newValue);if(i)return n.xs(i)}}else if(r.key===n.ws){const i=function(o){let a=mi._e;if(null!=o)try{const u=JSON.parse(o);we("number"==typeof u),a=u}catch(u){_n("SharedClientState","Failed to read sequence number from WebStorage",u)}return a}(r.newValue);i!==mi._e&&n.sequenceNumberHandler(i)}else if(r.key===n.vs){const i=n.Hs(r.newValue);yield Promise.all(i.map(s=>n.syncEngine.Js(s)))}}else n.ps.push(r)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,n,r){const i=new tv(this.currentUser,e,n,r),s=TL(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Es())}Bs(e){const n=TL(this.persistenceKey,this.currentUser,e);this.removeItem(n)}qs(e){this.storage.setItem(this.Cs,JSON.stringify({clientId:this.Rs,onlineState:e}))}ks(e,n,r){const i=w0(this.persistenceKey,e),s=new Mp(e,n,r);this.setItem(i,s.Es())}Qs(e){const n=JSON.stringify(Array.from(e));this.setItem(this.vs,n)}Ks(e){const n=this.Ss.exec(e);return n?n[1]:null}Us(e,n){const r=this.Ks(e);return nv.Ts(r,n)}Ws(e,n){const r=this.bs.exec(e),i=Number(r[1]);return tv.Ts(new Yn(void 0!==r[2]?r[2]:null),i,n)}zs(e,n){const r=this.Ds.exec(e),i=Number(r[1]);return Mp.Ts(i,n)}Ms(e){return T0.Ts(e)}Hs(e){return JSON.parse(e)}Gs(e){var n=this;return(0,z.Z)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.Ys(e.batchId,e.state,e.error);te("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,n){const r=n?this.gs.insert(e,n):this.gs.remove(e),i=this.Os(this.gs),s=this.Os(r),o=[],a=[];return s.forEach(u=>{i.has(u)||o.push(u)}),i.forEach(u=>{s.has(u)||a.push(u)}),this.syncEngine.Xs(o,a).then(()=>{this.gs=r})}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let n=WD();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class DL{constructor(){this.eo=new D0,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,n,r){this.no[e]=n}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new D0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class M8{ro(e){}shutdown(){}}class CL{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){te("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){te("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let rv=null;function A0(){return null===rv?rv=268435456+Math.round(2147483648*Math.random()):rv++,"0x"+rv.toString(16)}const O8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class k8{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}const Sr="WebChannelConnection";class L8 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.mo=r+"://"+n.host,this.fo=`projects/${i}/databases/${s}`,this.po="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get yo(){return!1}wo(n,r,i,s,o){const a=A0(),u=this.So(n,r);te("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const d={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(d,s,o),this.Do(n,u,d,i).then(f=>(te("RestConnection",`Received RPC '${n}' ${a}: `,f),f),f=>{throw ii("RestConnection",`RPC '${n}' ${a} failed with error: `,f,"url: ",u,"request:",i),f})}Co(n,r,i,s,o,a){return this.wo(n,r,i,s,o)}bo(n,r,i){n["X-Goog-Api-Client"]="gl-js/ fire/"+Kl,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}So(n,r){return`${this.mo}/v1/${r}:${O8[n]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,n,r,i){const s=A0();return new Promise((o,a)=>{const u=new MG;u.setWithCredentials(!0),u.listenOnce(xG.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case ND.NO_ERROR:const f=u.getResponseJson();te(Sr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case ND.TIMEOUT:te(Sr,`RPC '${e}' ${s} timed out`),a(new X(L.DEADLINE_EXCEEDED,"Request time out"));break;case ND.HTTP_ERROR:const g=u.getStatus();if(te(Sr,`RPC '${e}' ${s} failed with status:`,g,"response text:",u.getResponseText()),g>0){let _=u.getResponseJson();Array.isArray(_)&&(_=_[0]);const y=_?.error;if(y&&y.status&&y.message){const E=function(b){const M=b.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(M)>=0?M:L.UNKNOWN}(y.status);a(new X(E,y.message))}else a(new X(L.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new X(L.UNAVAILABLE,"Connection failed."));break;default:pe()}}finally{te(Sr,`RPC '${e}' ${s} completed.`)}});const d=JSON.stringify(i);te(Sr,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",d,r,15)})}vo(e,n,r){const i=A0(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=RG(),a=PG(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;void 0!==d&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.bo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=s.join("");te(Sr,`Creating RPC '${e}' stream ${i}: ${f}`,u);const g=o.createWebChannel(f,u);let _=!1,y=!1;const E=new k8({co:b=>{y?te(Sr,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(_||(te(Sr,`Opening RPC '${e}' stream ${i} transport.`),g.open(),_=!0),te(Sr,`RPC '${e}' stream ${i} sending:`,b),g.send(b))},lo:()=>g.close()}),D=(b,M,R)=>{b.listen(M,O=>{try{R(O)}catch(K){setTimeout(()=>{throw K},0)}})};return D(g,by.EventType.OPEN,()=>{y||te(Sr,`RPC '${e}' stream ${i} transport opened.`)}),D(g,by.EventType.CLOSE,()=>{y||(y=!0,te(Sr,`RPC '${e}' stream ${i} transport closed`),E.Ro())}),D(g,by.EventType.ERROR,b=>{y||(y=!0,ii(Sr,`RPC '${e}' stream ${i} transport errored:`,b),E.Ro(new X(L.UNAVAILABLE,"The operation could not be completed")))}),D(g,by.EventType.MESSAGE,b=>{var M;if(!y){const R=b.data[0];we(!!R);const K=R.error||(null===(M=R[0])||void 0===M?void 0:M.error);if(K){te(Sr,`RPC '${e}' stream ${i} received error:`,K);const ie=K.status;let Re=function(Vo){const Zv=bn[Vo];if(void 0!==Zv)return yk(Zv)}(ie),lt=K.message;void 0===Re&&(Re=L.INTERNAL,lt="Unknown error status: "+ie+" with message "+K.message),y=!0,E.Ro(new X(Re,lt)),g.close()}else te(Sr,`RPC '${e}' stream ${i} received:`,R),E.Vo(R)}}),D(a,NG.STAT_EVENT,b=>{b.stat===cO.PROXY?te(Sr,`RPC '${e}' stream ${i} detected buffering proxy`):b.stat===cO.NOPROXY&&te(Sr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.Ao()},0),E}}function AL(){return typeof window<"u"?window:null}function iv(){return typeof document<"u"?document:null}function Op(t){return new G5(t,!0)}class b0{constructor(e,n,r=1e3,i=1.5,s=6e4){this.si=e,this.timerId=n,this.Fo=r,this.Mo=i,this.xo=s,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const n=Math.floor(this.Oo+this.qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&te("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Oo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class bL{constructor(e,n,r,i,s,o,a,u){this.si=e,this.Ko=r,this.$o=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new b0(e,n)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}stop(){var e=this;return(0,z.Z)(function*(){e.jo()&&(yield e.close(0))})()}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}Xo(){var e=this;return(0,z.Z)(function*(){if(e.Ho())return e.close(0)})()}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}close(e,n){var r=this;return(0,z.Z)(function*(){r.t_(),r.n_(),r.zo.cancel(),r.Uo++,4!==e?r.zo.reset():n&&n.code===L.RESOURCE_EXHAUSTED?(_n(n.toString()),_n("Using maximum backoff delay to prevent overloading the backend."),r.zo.Lo()):n&&n.code===L.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.r_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Io(n)})()}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),n=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Uo===n&&this.s_(r,i)},r=>{e(()=>{const i=new X(L.UNKNOWN,"Fetching auth token failed: "+r.message);return this.o_(i)})})}s_(e,n){const r=this.i_(this.Uo);this.stream=this.__(e,n),this.stream.ho(()=>{r(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(i=>{r(()=>this.o_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Jo(){var e=this;this.state=5,this.zo.ko((0,z.Z)(function*(){e.state=0,e.start()}))}o_(e){return te("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return n=>{this.si.enqueueAndForget(()=>this.Uo===e?n():(te("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class F8 extends bL{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}__(e,n){return this.connection.vo("Listen",e,n)}onMessage(e){this.zo.reset();const n=function K5(t,e){let n;if("targetChange"in e){const r="NO_CHANGE"===(d=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===d?1:"REMOVE"===d?2:"CURRENT"===d?3:"RESET"===d?4:pe(),i=e.targetChange.targetIds||[],s=function(d,f){return d.useProto3Json?(we(void 0===f||"string"==typeof f),Hn.fromBase64String(f||"")):(we(void 0===f||f instanceof Uint8Array),Hn.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(d){const f=void 0===d.code?L.UNKNOWN:yk(d.code);return new X(f,d.message||"")}(o);n=new Tk(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=Gs(t,r.document.name),s=yn(r.document.updateTime),o=r.document.createTime?yn(r.document.createTime):Te.min(),a=new cr({mapValue:{fields:r.document.fields}}),u=Zt.newFoundDocument(i,s,o,a);n=new Hy(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=Gs(t,r.document),s=r.readTime?yn(r.readTime):Te.min(),o=Zt.newNoDocument(i,s);n=new Hy([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=Gs(t,r.document);n=new Hy([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return pe();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new B5(i,s);n=new wk(r.targetId,o)}}var d;return n}(this.serializer,e),r=function(s){if(!("targetChange"in s))return Te.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Te.min():o.readTime?yn(o.readTime):Te.min()}(e);return this.listener.a_(n,r)}u_(e){const n={};n.database=Cp(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=Ly(u)?{documents:Mk(s,u)}:{query:r0(s,u)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=bk(s,o.resumeToken);const d=XD(s,o.expectedCount);null!==d&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(Te.min())>0){a.readTime=ld(s,o.snapshotVersion.toTimestamp());const d=XD(s,o.expectedCount);null!==d&&(a.expectedCount=d)}return a}(this.serializer,e);const r=function Y5(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pe()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);r&&(n.labels=r),this.e_(n)}c_(e){const n={};n.database=Cp(this.serializer),n.removeTarget=e,this.e_(n)}}class V8 extends bL{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,n){return this.connection.vo("Write",e,n)}onMessage(e){if(we(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const n=function Q5(t,e){return t&&t.length>0?(we(void 0!==e),t.map(n=>function(i,s){let o=yn(i.updateTime?i.updateTime:s);return o.isEqual(Te.min())&&(o=yn(s)),new L5(o,i.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),r=yn(e.commitTime);return this.listener.I_(r,n)}return we(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=Cp(this.serializer),this.e_(e)}P_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Ap(this.serializer,r))};this.e_(n)}}class U8 extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.d_=!1}A_(){if(this.d_)throw new X(L.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,n,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.wo(e,n,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new X(L.UNKNOWN,i.toString())})}Co(e,n,r,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,n,r,s,o,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new X(L.UNKNOWN,s.toString())})}terminate(){this.d_=!0}}class j8{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(_n(n),this.f_=!1):te("OnlineStateTracker",n)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class $8{constructor(e,n,r,i,s){var o=this;this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=s,this.F_.ro(a=>{r.enqueueAndForget((0,z.Z)(function*(){var u;ka(o)&&(te("RemoteStore","Restarting streams for network reachability change."),yield(u=(0,z.Z)(function*(f){const g=se(f);g.C_.add(4),yield yd(g),g.M_.set("Unknown"),g.C_.delete(4),yield kp(g)}),function d(f){return u.apply(this,arguments)})(o))}))}),this.M_=new j8(r,i)}}function kp(t){return R0.apply(this,arguments)}function R0(){return R0=(0,z.Z)(function*(t){if(ka(t))for(const e of t.v_)yield e(!0)}),R0.apply(this,arguments)}function yd(t){return P0.apply(this,arguments)}function P0(){return P0=(0,z.Z)(function*(t){for(const e of t.v_)yield e(!1)}),P0.apply(this,arguments)}function sv(t,e){const n=se(t);n.D_.has(e.targetId)||(n.D_.set(e.targetId,e),M0(n)?N0(n):Id(n).Ho()&&x0(n,e))}function Lp(t,e){const n=se(t),r=Id(n);n.D_.delete(e),r.Ho()&&SL(n,e),0===n.D_.size&&(r.Ho()?r.Zo():ka(n)&&n.M_.set("Unknown"))}function x0(t,e){if(t.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Te.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Id(t).u_(e)}function SL(t,e){t.x_.Oe(e),Id(t).c_(e)}function N0(t){t.x_=new $5({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.D_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),Id(t).start(),t.M_.g_()}function M0(t){return ka(t)&&!Id(t).jo()&&t.D_.size>0}function ka(t){return 0===se(t).C_.size}function RL(t){t.x_=void 0}function H8(t){return O0.apply(this,arguments)}function O0(){return O0=(0,z.Z)(function*(t){t.D_.forEach((e,n)=>{x0(t,e)})}),O0.apply(this,arguments)}function q8(t,e){return k0.apply(this,arguments)}function k0(){return k0=(0,z.Z)(function*(t,e){RL(t),M0(t)?(t.M_.w_(e),N0(t)):t.M_.set("Unknown")}),k0.apply(this,arguments)}function z8(t,e,n){return L0.apply(this,arguments)}function L0(){return L0=(0,z.Z)(function*(t,e,n){if(t.M_.set("Online"),e instanceof Tk&&2===e.state&&e.cause)try{yield(r=(0,z.Z)(function*(s,o){const a=o.cause;for(const u of o.targetIds)s.D_.has(u)&&(yield s.remoteSyncer.rejectListen(u,a),s.D_.delete(u),s.x_.removeTarget(u))}),function i(s,o){return r.apply(this,arguments)})(t,e)}catch(r){te("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield ov(t,r)}else if(e instanceof Hy?t.x_.$e(e):e instanceof wk?t.x_.Je(e):t.x_.Ge(e),!n.isEqual(Te.min()))try{const r=yield _L(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){const a=s.x_.it(o);return a.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=s.D_.get(d);f&&s.D_.set(d,f.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,d)=>{const f=s.D_.get(u);if(!f)return;s.D_.set(u,f.withResumeToken(Hn.EMPTY_BYTE_STRING,f.snapshotVersion)),SL(s,u);const g=new Po(f.target,u,d,f.sequenceNumber);x0(s,g)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){te("RemoteStore","Failed to raise snapshot:",r),yield ov(t,r)}var r}),L0.apply(this,arguments)}function ov(t,e,n){return F0.apply(this,arguments)}function F0(){return F0=(0,z.Z)(function*(t,e,n){if(!Ta(e))throw e;t.C_.add(1),yield yd(t),t.M_.set("Offline"),n||(n=()=>_L(t.localStore)),t.asyncQueue.enqueueRetryable((0,z.Z)(function*(){te("RemoteStore","Retrying IndexedDB access"),yield n(),t.C_.delete(1),yield kp(t)}))}),F0.apply(this,arguments)}function PL(t,e){return e().catch(n=>ov(t,n,e))}function vd(t){return V0.apply(this,arguments)}function V0(){return V0=(0,z.Z)(function*(t){const e=se(t),n=La(e);let r=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;G8(e);)try{const i=yield P8(e.localStore,r);if(null===i){0===e.b_.length&&n.Zo();break}r=i.batchId,W8(e,i)}catch(i){yield ov(e,i)}xL(e)&&NL(e)}),V0.apply(this,arguments)}function G8(t){return ka(t)&&t.b_.length<10}function W8(t,e){t.b_.push(e);const n=La(t);n.Ho()&&n.h_&&n.P_(e.mutations)}function xL(t){return ka(t)&&!La(t).jo()&&t.b_.length>0}function NL(t){La(t).start()}function Z8(t){return U0.apply(this,arguments)}function U0(){return U0=(0,z.Z)(function*(t){La(t).E_()}),U0.apply(this,arguments)}function K8(t){return B0.apply(this,arguments)}function B0(){return B0=(0,z.Z)(function*(t){const e=La(t);for(const n of t.b_)e.P_(n.mutations)}),B0.apply(this,arguments)}function Q8(t,e,n){return j0.apply(this,arguments)}function j0(){return j0=(0,z.Z)(function*(t,e,n){const r=t.b_.shift(),i=QD.from(r,e,n);yield PL(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield vd(t)}),j0.apply(this,arguments)}function Y8(t,e){return $0.apply(this,arguments)}function $0(){return $0=(0,z.Z)(function*(t,e){var n;e&&La(t).h_&&(yield(n=(0,z.Z)(function*(i,s){if(_k(a=s.code)&&a!==L.ABORTED){const o=i.b_.shift();La(i).Yo(),yield PL(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield vd(i)}var a}),function r(i,s){return n.apply(this,arguments)})(t,e)),xL(t)&&NL(t)}),$0.apply(this,arguments)}function ML(t,e){return H0.apply(this,arguments)}function H0(){return H0=(0,z.Z)(function*(t,e){const n=se(t);n.asyncQueue.verifyOperationInProgress(),te("RemoteStore","RemoteStore received new credentials");const r=ka(n);n.C_.add(3),yield yd(n),r&&n.M_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.C_.delete(3),yield kp(n)}),H0.apply(this,arguments)}function q0(t,e){return z0.apply(this,arguments)}function z0(){return z0=(0,z.Z)(function*(t,e){const n=se(t);e?(n.C_.delete(2),yield kp(n)):e||(n.C_.add(2),yield yd(n),n.M_.set("Unknown"))}),z0.apply(this,arguments)}function Id(t){return t.O_||(t.O_=function(n,r,i){const s=se(n);return s.A_(),new F8(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{ho:H8.bind(null,t),Io:q8.bind(null,t),a_:z8.bind(null,t)}),t.v_.push(function(){var e=(0,z.Z)(function*(n){n?(t.O_.Yo(),M0(t)?N0(t):t.M_.set("Unknown")):(yield t.O_.stop(),RL(t))});return function(n){return e.apply(this,arguments)}}())),t.O_}function La(t){return t.N_||(t.N_=function(n,r,i){const s=se(n);return s.A_(),new V8(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{ho:Z8.bind(null,t),Io:Y8.bind(null,t),T_:K8.bind(null,t),I_:Q8.bind(null,t)}),t.v_.push(function(){var e=(0,z.Z)(function*(n){n?(t.N_.Yo(),yield vd(t)):(yield t.N_.stop(),t.b_.length>0&&(te("RemoteStore",`Stopping write stream with ${t.b_.length} pending writes`),t.b_=[]))});return function(n){return e.apply(this,arguments)}}())),t.N_}class G0{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new $n,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new G0(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new X(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ed(t,e){if(_n("AsyncQueue",`${e}: ${t}`),Ta(t))return new X(L.UNAVAILABLE,`${e}: ${t}`);throw t}class wd{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ae.comparator(n.key,r.key):(n,r)=>ae.comparator(n.key,r.key),this.keyedMap=_p(),this.sortedSet=new Ut(this.comparator)}static emptySet(e){return new wd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof wd)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new wd;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class OL{constructor(){this.B_=new Ut(ae.comparator)}track(e){const n=e.doc.key,r=this.B_.get(n);r?0!==e.type&&3===r.type?this.B_=this.B_.insert(n,e):3===e.type&&1!==r.type?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.B_=this.B_.remove(n):1===e.type&&2===r.type?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):pe():this.B_=this.B_.insert(n,e)}L_(){const e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Td{constructor(e,n,r,i,s,o,a,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Td(e,n,wd.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class J8{constructor(){this.k_=void 0,this.listeners=[]}}class X8{constructor(){this.queries=new So(e=>JO(e),gp),this.onlineState="Unknown",this.q_=new Set}}function W0(t,e){return Z0.apply(this,arguments)}function Z0(){return Z0=(0,z.Z)(function*(t,e){const n=se(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new J8),i)try{s.k_=yield n.onListen(r)}catch(o){const a=Ed(o,`Initialization of query '${sd(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.Q_(n.onlineState),s.k_&&e.K_(s.k_)&&Y0(n)}),Z0.apply(this,arguments)}function K0(t,e){return Q0.apply(this,arguments)}function Q0(){return Q0=(0,z.Z)(function*(t,e){const n=se(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}),Q0.apply(this,arguments)}function eW(t,e){const n=se(t);let r=!1;for(const i of e){const o=n.queries.get(i.query);if(o){for(const a of o.listeners)a.K_(i)&&(r=!0);o.k_=i}}r&&Y0(n)}function tW(t,e,n){const r=se(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function Y0(t){t.q_.forEach(e=>{e.next()})}class J0{constructor(e,n,r){this.query=e,this.U_=n,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=r||{}}K_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Td(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.W_?this.z_(e)&&(this.U_.next(e),n=!0):this.j_(e,this.onlineState)&&(this.H_(e),n=!0),this.G_=e,n}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let n=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),n=!0),n}j_(e,n){return!e.fromCache||(!this.options.J_||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}z_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}H_(e){e=Td.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}class nW{constructor(e,n){this.Y_=e,this.byteLength=n}Z_(){return"metadata"in this.Y_}}class kL{constructor(e){this.serializer=e}hs(e){return Gs(this.serializer,e)}Ps(e){return e.metadata.exists?Nk(this.serializer,e.document,!1):Zt.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return yn(e)}}class rW{constructor(e,n,r){this.X_=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=LL(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++n;const r=ft.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ta(e){const n=new Map,r=new kL(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.hs(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||ze()).add(s);n.set(o,a)}}return n}complete(){var e=this;return(0,z.Z)(function*(){const n=yield function x8(t,e,n,r){return I0.apply(this,arguments)}(e.localStore,new kL(e.serializer),e.documents,e.X_.id),r=e.ta(e.documents);for(const i of e.queries)yield N8(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,na:e.collectionGroups,ra:n}})()}}function LL(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}class FL{constructor(e){this.key=e}}class VL{constructor(e){this.key=e}}class UL{constructor(e,n){this.query=e,this.ia=n,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=ze(),this.mutatedKeys=ze(),this._a=ek(e),this.aa=new wd(this._a)}get ua(){return this.ia}ca(e,n){const r=n?n.la:new OL,i=n?n.aa:this.aa;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,d="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,g)=>{const _=i.get(f),y=mp(this.query,g)?g:null,E=!!_&&this.mutatedKeys.has(_.key),D=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let b=!1;_&&y?_.data.isEqual(y.data)?E!==D&&(r.track({type:3,doc:y}),b=!0):this.ha(_,y)||(r.track({type:2,doc:y}),b=!0,(u&&this._a(y,u)>0||d&&this._a(y,d)<0)&&(a=!0)):!_&&y?(r.track({type:0,doc:y}),b=!0):_&&!y&&(r.track({type:1,doc:_}),b=!0,(u||d)&&(a=!0)),b&&(y?(o=o.add(y),s=D?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const f="F"===this.query.limitType?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{aa:o,la:r,Zi:a,mutatedKeys:s}}ha(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const o=e.la.L_();o.sort((f,g)=>function(y,E){const D=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pe()}};return D(y)-D(E)}(f.type,g.type)||this._a(f.doc,g.doc)),this.Pa(r),i=null!=i&&i;const a=n&&!i?this.Ia():[],u=0===this.oa.size&&this.current&&!i?1:0,d=u!==this.sa;return this.sa=u,0!==o.length||d?{snapshot:new Td(this.query,e.aa,s,o,e.mutatedKeys,0===u,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ta:a}:{Ta:a}}Q_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({aa:this.aa,la:new OL,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(n=>this.ia=this.ia.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ia=this.ia.delete(n)),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=ze(),this.aa.forEach(r=>{this.Ea(r.key)&&(this.oa=this.oa.add(r.key))});const n=[];return e.forEach(r=>{this.oa.has(r)||n.push(new VL(r))}),this.oa.forEach(r=>{e.has(r)||n.push(new FL(r))}),n}da(e){this.ia=e.ls,this.oa=ze();const n=this.ca(e.documents);return this.applyChanges(n,!0)}Aa(){return Td.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}class iW{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class sW{constructor(e){this.key=e,this.Ra=!1}}class oW{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Va={},this.ma=new So(a=>JO(a),gp),this.fa=new Map,this.ga=new Set,this.pa=new Ut(ae.comparator),this.ya=new Map,this.wa=new h0,this.Sa={},this.ba=new Map,this.Da=rc.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}function aW(t,e){return X0.apply(this,arguments)}function X0(){return X0=(0,z.Z)(function*(t,e){const n=wC(t);let r,i;const s=n.ma.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Aa();else{const o=yield md(n.localStore,zr(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield eC(n,e,r,"current"===a,o.resumeToken),n.isPrimaryClient&&sv(n.remoteStore,o)}return i}),X0.apply(this,arguments)}function eC(t,e,n,r,i){return tC.apply(this,arguments)}function tC(){return tC=(0,z.Z)(function*(t,e,n,r,i){t.va=(g,_,y)=>{return(E=(0,z.Z)(function*(b,M,R,O){let K=M.view.ca(R);K.Zi&&(K=yield ev(b.localStore,M.query,!1).then(({documents:Qt})=>M.view.ca(Qt,K)));const ie=O&&O.targetChanges.get(M.targetId),Re=O&&null!=O.targetMismatches.get(M.targetId),lt=M.view.applyChanges(K,b.isPrimaryClient,ie,Re);return dC(b,M.targetId,lt.Ta),lt.snapshot}),function D(b,M,R,O){return E.apply(this,arguments)})(t,g,_,y);var E};const s=yield ev(t.localStore,e,!0),o=new UL(e,s.ls),a=o.ca(s.documents),u=Tp.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),d=o.applyChanges(a,t.isPrimaryClient,u);dC(t,n,d.Ta);const f=new iW(e,n,o);return t.ma.set(e,f),t.fa.has(n)?t.fa.get(n).push(e):t.fa.set(n,[e]),d.snapshot}),tC.apply(this,arguments)}function uW(t,e){return nC.apply(this,arguments)}function nC(){return nC=(0,z.Z)(function*(t,e){const n=se(t),r=n.ma.get(e),i=n.fa.get(r.targetId);if(i.length>1)return n.fa.set(r.targetId,i.filter(s=>!gp(s,e))),void n.ma.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield _d(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Lp(n.remoteStore,r.targetId),Dd(n,r.targetId)}).catch(wa))):(Dd(n,r.targetId),yield _d(n.localStore,r.targetId,!0))}),nC.apply(this,arguments)}function rC(){return rC=(0,z.Z)(function*(t,e,n){const r=TC(t);try{const i=yield function(o,a){const u=se(o),d=tn.now(),f=a.reduce((y,E)=>y.add(E.key),ze());let g,_;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let E=oi(),D=ze();return u.ss.getEntries(y,f).next(b=>{E=b,E.forEach((M,R)=>{R.isValidDocument()||(D=D.add(M))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,E)).next(b=>{g=b;const M=[];for(const R of a){const O=V5(R,g.get(R.key).overlayedDocument);null!=O&&M.push(new Ro(R.key,O,FO(O.value.mapValue),nn.exists(!0)))}return u.mutationQueue.addMutationBatch(y,d,M,a)}).next(b=>{_=b;const M=b.applyToLocalDocumentSet(g,D);return u.documentOverlayCache.saveOverlays(y,b.batchId,M)})}).then(()=>({batchId:_.batchId,changes:nk(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let d=o.Sa[o.currentUser.toKey()];d||(d=new Ut(Fe)),d=d.insert(a,u),o.Sa[o.currentUser.toKey()]=d}(r,i.batchId,n),yield xo(r,i.changes),yield vd(r.remoteStore)}catch(i){const s=Ed(i,"Failed to persist write");n.reject(s)}}),rC.apply(this,arguments)}function BL(t,e){return iC.apply(this,arguments)}function iC(){return iC=(0,z.Z)(function*(t,e){const n=se(t);try{const r=yield function R8(t,e){const n=se(t),r=e.snapshotVersion;let i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;const a=[];e.targetChanges.forEach((f,g)=>{const _=i.get(g);if(!_)return;a.push(n.qr.removeMatchingKeys(s,f.removedDocuments,g).next(()=>n.qr.addMatchingKeys(s,f.addedDocuments,g)));let y=_.withSequenceNumber(s.currentSequenceNumber);var D,b,M;null!==e.targetMismatches.get(g)?y=y.withResumeToken(Hn.EMPTY_BYTE_STRING,Te.min()).withLastLimboFreeSnapshotVersion(Te.min()):f.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(f.resumeToken,r)),i=i.insert(g,y),b=y,M=f,(0===(D=_).resumeToken.approximateByteSize()||b.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=3e8||M.addedDocuments.size+M.modifiedDocuments.size+M.removedDocuments.size>0)&&a.push(n.qr.updateTargetData(s,y))});let u=oi(),d=ze();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,f))}),a.push(yL(s,o,e.documentUpdates).next(f=>{u=f.us,d=f.cs})),!r.isEqual(Te.min())){const f=n.qr.getLastRemoteSnapshotVersion(s).next(g=>n.qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(f)}return N.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,d)).next(()=>u)}).then(s=>(n.ts=i,s))}(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.ya.get(s);o&&(we(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Ra=!0:i.modifiedDocuments.size>0?we(o.Ra):i.removedDocuments.size>0&&(we(o.Ra),o.Ra=!1))}),yield xo(n,r,e)}catch(r){yield wa(r)}}),iC.apply(this,arguments)}function jL(t,e,n){const r=se(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const i=[];r.ma.forEach((s,o)=>{const a=o.view.Q_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=se(o);u.onlineState=a;let d=!1;u.queries.forEach((f,g)=>{for(const _ of g.listeners)_.Q_(a)&&(d=!0)}),d&&Y0(u)}(r.eventManager,e),i.length&&r.Va.a_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function lW(t,e,n){return sC.apply(this,arguments)}function sC(){return sC=(0,z.Z)(function*(t,e,n){const r=se(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.ya.get(e),s=i&&i.key;if(s){let o=new Ut(ae.comparator);o=o.insert(s,Zt.newNoDocument(s,Te.min()));const a=ze().add(s),u=new wp(Te.min(),new Map,new Ut(Fe),o,a);yield BL(r,u),r.pa=r.pa.remove(s),r.ya.delete(e),hC(r)}else yield _d(r.localStore,e,!1).then(()=>Dd(r,e,n)).catch(wa)}),sC.apply(this,arguments)}function dW(t,e){return oC.apply(this,arguments)}function oC(){return oC=(0,z.Z)(function*(t,e){const n=se(t),r=e.batch.batchId;try{const i=yield function S8(t,e){const n=se(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.ss.newChangeBuffer({trackRemovals:!0});return function(a,u,d,f){const g=d.batch,_=g.keys();let y=N.resolve();return _.forEach(E=>{y=y.next(()=>f.getEntry(u,E)).next(D=>{const b=d.docVersions.get(E);we(null!==b),D.version.compareTo(b)<0&&(g.applyToRemoteDocument(D,d),D.isValidDocument()&&(D.setReadTime(d.commitVersion),f.addEntry(D)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,g))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=ze();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(u=u.add(a.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}(n.localStore,e);lC(n,r,null),cC(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield xo(n,i)}catch(i){yield wa(i)}}),oC.apply(this,arguments)}function hW(t,e,n){return aC.apply(this,arguments)}function aC(){return aC=(0,z.Z)(function*(t,e,n){const r=se(t);try{const i=yield function(o,a){const u=se(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,a).next(g=>(we(null!==g),f=g.keys(),u.mutationQueue.removeMutationBatch(d,g))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);lC(r,e,n),cC(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield xo(r,i)}catch(i){yield wa(i)}}),aC.apply(this,arguments)}function uC(){return uC=(0,z.Z)(function*(t,e){const n=se(t);ka(n.remoteStore)||te("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const a=se(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(n.localStore);if(-1===r)return void e.resolve();const i=n.ba.get(r)||[];i.push(e),n.ba.set(r,i)}catch(r){const i=Ed(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),uC.apply(this,arguments)}function cC(t,e){(t.ba.get(e)||[]).forEach(n=>{n.resolve()}),t.ba.delete(e)}function lC(t,e,n){const r=se(t);let i=r.Sa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Sa[r.currentUser.toKey()]=i}}function Dd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.fa.get(e))t.ma.delete(r),n&&t.Va.Fa(r,n);t.fa.delete(e),t.isPrimaryClient&&t.wa.Rr(e).forEach(r=>{t.wa.containsKey(r)||$L(t,r)})}function $L(t,e){t.ga.delete(e.path.canonicalString());const n=t.pa.get(e);null!==n&&(Lp(t.remoteStore,n),t.pa=t.pa.remove(e),t.ya.delete(n),hC(t))}function dC(t,e,n){for(const r of n)r instanceof FL?(t.wa.addReference(r.key,e),pW(t,r)):r instanceof VL?(te("SyncEngine","Document no longer in limbo: "+r.key),t.wa.removeReference(r.key,e),t.wa.containsKey(r.key)||$L(t,r.key)):pe()}function pW(t,e){const n=e.key,r=n.path.canonicalString();t.pa.get(n)||t.ga.has(r)||(te("SyncEngine","New document in limbo: "+n),t.ga.add(r),hC(t))}function hC(t){for(;t.ga.size>0&&t.pa.size<t.maxConcurrentLimboResolutions;){const e=t.ga.values().next().value;t.ga.delete(e);const n=new ae(ft.fromString(e)),r=t.Da.next();t.ya.set(r,new sW(n)),t.pa=t.pa.insert(n,r),sv(t.remoteStore,new Po(zr(rd(n.path)),r,"TargetPurposeLimboResolution",mi._e))}}function xo(t,e,n){return fC.apply(this,arguments)}function fC(){return fC=(0,z.Z)(function*(t,e,n){const r=se(t),i=[],s=[],o=[];var a;r.ma.isEmpty()||(r.ma.forEach((a,u)=>{o.push(r.va(u,e,n).then(d=>{if((d||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,d?.fromCache?"not-current":"current"),d){i.push(d);const f=_0.Qi(u.targetId,d);s.push(f)}}))}),yield Promise.all(o),r.Va.a_(i),yield(a=(0,z.Z)(function*(d,f){const g=se(d);try{yield g.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>N.forEach(f,y=>N.forEach(y.ki,E=>g.persistence.referenceDelegate.addReference(_,y.targetId,E)).next(()=>N.forEach(y.qi,E=>g.persistence.referenceDelegate.removeReference(_,y.targetId,E)))))}catch(_){if(!Ta(_))throw _;te("LocalStore","Failed to update sequence numbers: "+_)}for(const _ of f){const y=_.targetId;if(!_.fromCache){const E=g.ts.get(y),b=E.withLastLimboFreeSnapshotVersion(E.snapshotVersion);g.ts=g.ts.insert(y,b)}}}),function u(d,f){return a.apply(this,arguments)})(r.localStore,s))}),fC.apply(this,arguments)}function gW(t,e){return pC.apply(this,arguments)}function pC(){return pC=(0,z.Z)(function*(t,e){const n=se(t);if(!n.currentUser.isEqual(e)){te("SyncEngine","User change. New user:",e.toKey());const r=yield mL(n.localStore,e);n.currentUser=e,(s=n).ba.forEach(a=>{a.forEach(u=>{u.reject(new X(L.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.ba.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield xo(n,r._s)}var s}),pC.apply(this,arguments)}function mW(t,e){const n=se(t),r=n.ya.get(e);if(r&&r.Ra)return ze().add(r.key);{let i=ze();const s=n.fa.get(e);if(!s)return i;for(const o of s){const a=n.ma.get(o);i=i.unionWith(a.view.ua)}return i}}function _W(t,e){return gC.apply(this,arguments)}function gC(){return gC=(0,z.Z)(function*(t,e){const n=se(t),r=yield ev(n.localStore,e.query,!0),i=e.view.da(r);return n.isPrimaryClient&&dC(n,e.targetId,i.Ta),i}),gC.apply(this,arguments)}function yW(t,e){return mC.apply(this,arguments)}function mC(){return mC=(0,z.Z)(function*(t,e){const n=se(t);return IL(n.localStore,e).then(r=>xo(n,r))}),mC.apply(this,arguments)}function vW(t,e,n,r){return _C.apply(this,arguments)}function _C(){return _C=(0,z.Z)(function*(t,e,n,r){const i=se(t),s=yield function(a,u){const d=se(a),f=se(d.mutationQueue);return d.persistence.runTransaction("Lookup mutation documents","readonly",g=>f.Cn(g,u).next(_=>_?d.localDocuments.getDocuments(g,_):N.resolve(null)))}(i.localStore,e);var u;null!==s?("pending"===n?yield vd(i.remoteStore):"acknowledged"===n||"rejected"===n?(lC(i,e,r||null),cC(i,e),u=e,se(se(i.localStore).mutationQueue).Fn(u)):pe(),yield xo(i,s)):te("SyncEngine","Cannot apply mutation batch with id: "+e)}),_C.apply(this,arguments)}function yC(){return yC=(0,z.Z)(function*(t,e){const n=se(t);if(wC(n),TC(n),!0===e&&!0!==n.Ca){const r=n.sharedClientState.getAllActiveQueryTargets(),i=yield HL(n,r.toArray());n.Ca=!0,yield q0(n.remoteStore,!0);for(const s of i)sv(n.remoteStore,s)}else if(!1===e&&!1!==n.Ca){const r=[];let i=Promise.resolve();n.fa.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Dd(n,o),_d(n.localStore,o,!0))),Lp(n.remoteStore,o)}),yield i,yield HL(n,r),function(o){const a=se(o);a.ya.forEach((u,d)=>{Lp(a.remoteStore,d)}),a.wa.Vr(),a.ya=new Map,a.pa=new Ut(ae.comparator)}(n),n.Ca=!1,yield q0(n.remoteStore,!1)}}),yC.apply(this,arguments)}function HL(t,e,n){return vC.apply(this,arguments)}function vC(){return vC=(0,z.Z)(function*(t,e,n){const r=se(t),i=[],s=[];for(const o of e){let a;const u=r.fa.get(o);if(u&&0!==u.length){a=yield md(r.localStore,zr(u[0]));for(const d of u){const f=r.ma.get(d),g=yield _W(r,f);g.snapshot&&s.push(g.snapshot)}}else{const d=yield vL(r.localStore,o);a=yield md(r.localStore,d),yield eC(r,qL(d),o,!1,a.resumeToken)}i.push(a)}return r.Va.a_(s),i}),vC.apply(this,arguments)}function qL(t){return KO(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function EW(t){return n=se(t).localStore,se(se(n).persistence).Bi();var n}function wW(t,e,n,r){return IC.apply(this,arguments)}function IC(){return IC=(0,z.Z)(function*(t,e,n,r){const i=se(t);if(i.Ca)return void te("SyncEngine","Ignoring unexpected query state notification.");const s=i.fa.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=yield IL(i.localStore,XO(s[0])),a=wp.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,Hn.EMPTY_BYTE_STRING);yield xo(i,o,a);break}case"rejected":yield _d(i.localStore,e,!0),Dd(i,e,r);break;default:pe()}}),IC.apply(this,arguments)}function TW(t,e,n){return EC.apply(this,arguments)}function EC(){return EC=(0,z.Z)(function*(t,e,n){const r=wC(t);if(r.Ca){for(const i of e){if(r.fa.has(i)){te("SyncEngine","Adding an already active target "+i);continue}const s=yield vL(r.localStore,i),o=yield md(r.localStore,s);yield eC(r,qL(s),o.targetId,!1,o.resumeToken),sv(r.remoteStore,o)}for(const i of n)r.fa.has(i)&&(yield _d(r.localStore,i,!1).then(()=>{Lp(r.remoteStore,i),Dd(r,i)}).catch(wa))}}),EC.apply(this,arguments)}function wC(t){const e=se(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=BL.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=mW.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lW.bind(null,e),e.Va.a_=eW.bind(null,e.eventManager),e.Va.Fa=tW.bind(null,e.eventManager),e}function TC(t){const e=se(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=dW.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hW.bind(null,e),e}class Fp{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,z.Z)(function*(){n.serializer=Op(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return gL(this.persistence,new pL,e.initialUser,this.serializer)}createPersistence(e){return new f0(Yy.jr,this.serializer)}createSharedClientState(e){return new DL}terminate(){var e=this;return(0,z.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class DC extends Fp{constructor(e,n,r){super(),this.xa=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,r=this;return(0,z.Z)(function*(){yield n().call(r,e),yield r.xa.initialize(r,e),yield TC(r.xa.syncEngine),yield vd(r.xa.remoteStore),yield r.persistence.mi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return gL(this.persistence,new pL,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){return new sL(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const r=new QG(n,this.persistence);return new KG(e.asyncQueue,r)}createPersistence(e){const n=m0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?br.withCacheSize(this.cacheSizeBytes):br.DEFAULT;return new g0(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,AL(),iv(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new DL}}class zL extends DC{constructor(e,n){super(e,n,!1),this.xa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,r=this;return(0,z.Z)(function*(){yield n().call(r,e);const i=r.xa.syncEngine;r.sharedClientState instanceof C0&&(r.sharedClientState.syncEngine={Ys:vW.bind(null,i),Zs:wW.bind(null,i),Xs:TW.bind(null,i),Bi:EW.bind(null,i),Js:yW.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.mi(function(){var s=(0,z.Z)(function*(o){yield function IW(t,e){return yC.apply(this,arguments)}(r.xa.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const n=AL();if(!C0.D(n))throw new X(L.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=m0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new C0(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Cd{initialize(e,n){var r=this;return(0,z.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(n),r.remoteStore=r.createRemoteStore(n),r.eventManager=r.createEventManager(n),r.syncEngine=r.createSyncEngine(n,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>jL(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=gW.bind(null,r.syncEngine),yield q0(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new X8}createDatastore(e){const n=Op(e.databaseInfo.databaseId),r=new L8(e.databaseInfo);return new U8(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return r=this.localStore,i=this.datastore,s=e.asyncQueue,o=n=>jL(this.syncEngine,n,0),a=CL.D()?new CL:new M8,new $8(r,i,s,o,a);var r,i,s,o,a}createSyncEngine(e,n){return function(i,s,o,a,u,d,f){const g=new oW(i,s,o,a,u,d);return f&&(g.Ca=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return(e=(0,z.Z)(function*(r){const i=se(r);te("RemoteStore","RemoteStore shutting down."),i.C_.add(5),yield yd(i),i.F_.shutdown(),i.M_.set("Unknown")}),function n(r){return e.apply(this,arguments)})(this.remoteStore);var e}}function GL(t,e=10240){let n=0;return{read:()=>(0,z.Z)(function*(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}})(),cancel:()=>(0,z.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class av{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):_n("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class AW{constructor(e,n){this.Ba=e,this.serializer=n,this.metadata=new $n,this.buffer=new Uint8Array,this.La=new TextDecoder("utf-8"),this.ka().then(r=>{r&&r.Z_()?this.metadata.resolve(r.Y_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Y_)}`))},r=>this.metadata.reject(r))}close(){return this.Ba.cancel()}getMetadata(){var e=this;return(0,z.Z)(function*(){return e.metadata.promise})()}Ma(){var e=this;return(0,z.Z)(function*(){return yield e.getMetadata(),e.ka()})()}ka(){var e=this;return(0,z.Z)(function*(){const n=yield e.qa();if(null===n)return null;const r=e.La.decode(n),i=Number(r);isNaN(i)&&e.Qa(`length string (${r}) is not valid number`);const s=yield e.Ka(i);return new nW(JSON.parse(s),n.length+i)})()}$a(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}qa(){var e=this;return(0,z.Z)(function*(){for(;e.$a()<0&&!(yield e.Ua()););if(0===e.buffer.length)return null;const n=e.$a();n<0&&e.Qa("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),r})()}Ka(e){var n=this;return(0,z.Z)(function*(){for(;n.buffer.length<e;)(yield n.Ua())&&n.Qa("Reached the end of bundle when more is expected.");const r=n.La.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),r})()}Qa(e){throw this.Ba.cancel(),new Error(`Invalid bundle format: ${e}`)}Ua(){var e=this;return(0,z.Z)(function*(){const n=yield e.Ba.read();if(!n.done){const r=new Uint8Array(e.buffer.length+n.value.length);r.set(e.buffer),r.set(n.value,e.buffer.length),e.buffer=r}return n.done})()}}class bW{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,z.Z)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw new X(L.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,z.Z)(function*(o,a){const u=se(o),d=Cp(u.serializer)+"/documents",f={documents:a.map(E=>Dp(u.serializer,E))},g=yield u.Co("BatchGetDocuments",d,f,a.length),_=new Map;g.forEach(E=>{const D=function Z5(t,e){return"found"in e?function(r,i){we(!!i.found);const s=Gs(r,i.found.name),o=yn(i.found.updateTime),a=i.found.createTime?yn(i.found.createTime):Te.min(),u=new cr({mapValue:{fields:i.found.fields}});return Zt.newFoundDocument(s,o,a,u)}(t,e):"missing"in e?function(r,i){we(!!i.missing),we(!!i.readTime);const s=Gs(r,i.missing),o=yn(i.readTime);return Zt.newNoDocument(s,o)}(t,e):pe()}(u.serializer,E);_.set(D.key.toString(),D)});const y=[];return a.forEach(E=>{const D=_.get(E.toString());we(!!D),y.push(D)}),y}),function s(o,a){return i.apply(this,arguments)})(n.datastore,e);var i;return r.forEach(i=>n.recordVersion(i)),r})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new cd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,z.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const n=e.readVersions;var r;e.mutations.forEach(r=>{n.delete(r.key.toString())}),n.forEach((r,i)=>{const s=ae.fromPath(i);e.mutations.push(new ZD(s,e.precondition(s)))}),yield(r=(0,z.Z)(function*(s,o){const a=se(s),u=Cp(a.serializer)+"/documents",d={writes:o.map(f=>Ap(a.serializer,f))};yield a.wo("Commit",u,d)}),function i(s,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw pe();n=Te.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new X(L.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Te.min())?nn.exists(!1):nn.updateTime(n):nn.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Te.min()))throw new X(L.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return nn.updateTime(n)}return nn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class SW{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.Wa=r.maxAttempts,this.zo=new b0(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){var e=this;this.zo.ko((0,z.Z)(function*(){const n=new bW(e.datastore),r=e.za(n);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.ja(s)}))}).catch(i=>{e.ja(i)})}))}za(e){try{const n=this.updateFunction(e);return!ap(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ga(),Promise.resolve()))):this.deferred.reject(e)}Ha(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||"already-exists"===n||!_k(n)}return!1}}class RW{constructor(e,n,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Yn.UNAUTHENTICATED,this.clientId=fO.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=(0,z.Z)(function*(a){te("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(te("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var e=this;return(0,z.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new X(L.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new $n;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,z.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(r){const i=Ed(r,"Failed to shutdown persistence");n.reject(i)}})),n.promise}}function uv(t,e){return CC.apply(this,arguments)}function CC(){return CC=(0,z.Z)(function*(t,e){t.asyncQueue.verifyOperationInProgress(),te("FirestoreClient","Initializing OfflineComponentProvider");const n=yield t.getConfiguration();yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var i=(0,z.Z)(function*(s){r.isEqual(s)||(yield mL(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}),CC.apply(this,arguments)}function AC(t,e){return bC.apply(this,arguments)}function bC(){return bC=(0,z.Z)(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield SC(t);te("FirestoreClient","Initializing OnlineComponentProvider");const r=yield t.getConfiguration();yield e.initialize(n,r),t.setCredentialChangeListener(i=>ML(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>ML(e.remoteStore,s)),t._onlineComponents=e}),bC.apply(this,arguments)}function WL(t){return"FirebaseError"===t.name?t.code===L.FAILED_PRECONDITION||t.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}function SC(t){return RC.apply(this,arguments)}function RC(){return RC=(0,z.Z)(function*(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){te("FirestoreClient","Using user provided OfflineComponentProvider");try{yield uv(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!WL(n))throw n;ii("Error using user provided cache. Falling back to memory cache: "+n),yield uv(t,new Fp)}}else te("FirestoreClient","Using default OfflineComponentProvider"),yield uv(t,new Fp);return t._offlineComponents}),RC.apply(this,arguments)}function cv(t){return PC.apply(this,arguments)}function PC(){return PC=(0,z.Z)(function*(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(te("FirestoreClient","Using user provided OnlineComponentProvider"),yield AC(t,t._uninitializedComponentsProvider._online)):(te("FirestoreClient","Using default OnlineComponentProvider"),yield AC(t,new Cd))),t._onlineComponents}),PC.apply(this,arguments)}function ZL(t){return SC(t).then(e=>e.persistence)}function Ad(t){return SC(t).then(e=>e.localStore)}function KL(t){return cv(t).then(e=>e.remoteStore)}function xC(t){return cv(t).then(e=>e.syncEngine)}function bd(t){return NC.apply(this,arguments)}function NC(){return NC=(0,z.Z)(function*(t){const e=yield cv(t),n=e.eventManager;return n.onListen=aW.bind(null,e.syncEngine),n.onUnlisten=uW.bind(null,e.syncEngine),n}),NC.apply(this,arguments)}function YL(t,e,n={}){const r=new $n;return t.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return function(s,o,a,u,d){const f=new av({next:_=>{o.enqueueAndForget(()=>K0(s,g));const y=_.docs.has(a);!y&&_.fromCache?d.reject(new X(L.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&_.fromCache&&u&&"server"===u.source?d.reject(new X(L.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(_)},error:_=>d.reject(_)}),g=new J0(rd(a.path),f,{includeMetadataChanges:!0,J_:!0});return W0(s,g)}(yield bd(t),t.asyncQueue,e,n,r)})),r.promise}function JL(t,e,n={}){const r=new $n;return t.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return function(s,o,a,u,d){const f=new av({next:_=>{o.enqueueAndForget(()=>K0(s,g)),_.fromCache&&"server"===u.source?d.reject(new X(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(_)},error:_=>d.reject(_)}),g=new J0(a,f,{includeMetadataChanges:!0,J_:!0});return W0(s,g)}(yield bd(t),t.asyncQueue,e,n,r)})),r.promise}function XL(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const eF=new Map;function MC(t,e,n){if(!n)throw new X(L.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function tF(t,e,n,r){if(!0===e&&!0===r)throw new X(L.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function nF(t){if(!ae.isDocumentKey(t))throw new X(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function rF(t){if(ae.isDocumentKey(t))throw new X(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function lv(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=(r=t).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof t?"a function":pe()}function it(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new X(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=lv(t);throw new X(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function iF(t,e){if(e<=0)throw new X(L.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}class sF{constructor(e){var n,r;if(void 0===e.host){if(void 0!==e.ssl)throw new X(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new X(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}tF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=XL(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new X(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new X(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new X(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Vp{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sF({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new X(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new X(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sF(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new FG;switch(r.type){case"firstParty":return new jG(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new X(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=eF.get(n);r&&(te("ComponentProvider","Removing Datastore"),eF.delete(n),r.terminate())}(this),Promise.resolve()}}class lr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new lr(this.firestore,e,this._query)}}class Kt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ws(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Kt(this.firestore,e,this._key)}}class Ws extends lr{constructor(e,n,r){super(e,n,rd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Kt(this.firestore,null,new ae(e))}withConverter(e){return new Ws(this.firestore,e,this._path)}}function aF(t,e,...n){if(t=(0,rt.m9)(t),MC("collection","path",e),t instanceof Vp){const r=ft.fromString(e,...n);return rF(r),new Ws(t,null,r)}{if(!(t instanceof Kt||t instanceof Ws))throw new X(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ft.fromString(e,...n));return rF(r),new Ws(t.firestore,null,r)}}function dv(t,e,...n){if(t=(0,rt.m9)(t),1===arguments.length&&(e=fO.newId()),MC("doc","path",e),t instanceof Vp){const r=ft.fromString(e,...n);return nF(r),new Kt(t,null,new ae(r))}{if(!(t instanceof Kt||t instanceof Ws))throw new X(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ft.fromString(e,...n));return nF(r),new Kt(t.firestore,t instanceof Ws?t.converter:null,new ae(r))}}function uF(t,e){return t=(0,rt.m9)(t),e=(0,rt.m9)(e),(t instanceof Kt||t instanceof Ws)&&(e instanceof Kt||e instanceof Ws)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function OC(t,e){return t=(0,rt.m9)(t),e=(0,rt.m9)(e),t instanceof lr&&e instanceof lr&&t.firestore===e.firestore&&gp(t._query,e._query)&&t.converter===e.converter}class jW{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new b0(this,"async_queue_retry"),this.iu=()=>{const n=iv();n&&te("AsyncQueue","Visibility state changed to "+n.visibilityState),this.zo.Qo()};const e=iv();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const n=iv();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});const n=new $n;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}_u(){var e=this;return(0,z.Z)(function*(){if(0!==e.Ya.length){try{yield e.Ya[0](),e.Ya.shift(),e.zo.reset()}catch(n){if(!Ta(n))throw n;te("AsyncQueue","Operation failed with retryable error: "+n)}e.Ya.length>0&&e.zo.ko(()=>e._u())}})()}ou(e){const n=this.Ja.then(()=>(this.tu=!0,e().catch(r=>{throw this.eu=r,this.tu=!1,_n("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.tu=!1,r))));return this.Ja=n,n}enqueueAfterDelay(e,n,r){this.su(),this.ru.indexOf(e)>-1&&(n=0);const i=G0.createAndSchedule(this,e,n,r,s=>this.au(s));return this.Xa.push(i),i}su(){this.eu&&pe()}verifyOperationInProgress(){}uu(){var e=this;return(0,z.Z)(function*(){let n;do{n=e.Ja,yield n}while(n!==e.Ja)})()}cu(e){for(const n of this.Xa)if(n.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Xa)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){const n=this.Xa.indexOf(e);this.Xa.splice(n,1)}}function kC(t){return function(n,r){if("object"!=typeof n||null===n)return!1;const i=n;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(t)}class $W{constructor(){this._progressObserver={},this._taskCompletionResolver=new $n,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Bt extends Vp{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new jW,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||cF(this),this._firestoreClient.terminate()}}function hn(t){return t._firestoreClient||cF(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function cF(t){var e,n,r;const i=t._freezeSettings(),s=(u=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new _5(t._databaseId,u,t._persistenceKey,(f=i).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,XL(f.experimentalLongPollingOptions),f.useFetchStreams));var u,f;t._firestoreClient=new RW(t._authCredentials,t._appCheckCredentials,t._queue,s),null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function lF(t,e,n){const r=new $n;return t.asyncQueue.enqueue((0,z.Z)(function*(){try{yield uv(t,n),yield AC(t,e),r.resolve()}catch(i){const s=i;if(!WL(s))throw s;ii("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function dF(t){if(t._initialized||t._terminated)throw new X(L.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Zs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Zs(Hn.fromBase64String(e))}catch(n){throw new X(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Zs(Hn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class No{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new X(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class sc{constructor(e){this._methodName=e}}class hv{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new X(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new X(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Fe(this._lat,e._lat)||Fe(this._long,e._long)}}const XW=/^__.*__$/;class e7{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return null!==this.fieldMask?new Ro(e,this.data,this.fieldMask,n,this.fieldTransforms):new ud(e,this.data,n,this.fieldTransforms)}}class hF{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ro(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function fF(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pe()}}class fv{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.Pu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new fv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Tu({path:r,du:!1});return i.Au(e),i}Ru(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Tu({path:r,du:!1});return i.Pu(),i}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return mv(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(fF(this.Iu)&&XW.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class t7{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Op(e)}pu(e,n,r,i=!1){return new fv({Iu:e,methodName:n,gu:r,path:Wt.emptyPath(),du:!1,fu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function oc(t){const e=t._freezeSettings(),n=Op(t._databaseId);return new t7(t._databaseId,!!e.ignoreUndefinedProperties,n)}function pv(t,e,n,r,i,s={}){const o=t.pu(s.merge||s.mergeFields?2:0,e,n,i);UC("Data must be an object, but it was:",o,r);const a=mF(r,o);let u,d;if(s.merge)u=new si(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){const f=[];for(const g of s.mergeFields){const _=jp(e,g,n);if(!o.contains(_))throw new X(L.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);yF(f,_)||f.push(_)}u=new si(f),d=o.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,d=o.fieldTransforms;return new e7(new cr(a),u,d)}class Bp extends sc{_toFieldTransform(e){if(2!==e.Iu)throw e.mu(1===e.Iu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Bp}}function pF(t,e,n){return new fv({Iu:3,gu:e.settings.gu,methodName:t._methodName,du:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class LC extends sc{_toFieldTransform(e){return new vp(e.path,new od)}isEqual(e){return e instanceof LC}}class n7 extends sc{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=pF(this,e,!0),r=this.yu.map(s=>ac(s,n)),i=new Qu(r);return new vp(e.path,i)}isEqual(e){return this===e}}class r7 extends sc{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=pF(this,e,!0),r=this.yu.map(s=>ac(s,n)),i=new Yu(r);return new vp(e.path,i)}isEqual(e){return this===e}}class i7 extends sc{constructor(e,n){super(e),this.wu=n}_toFieldTransform(e){const n=new ad(e.serializer,ok(e.serializer,this.wu));return new vp(e.path,n)}isEqual(e){return this===e}}function FC(t,e,n,r){const i=t.pu(1,e,n);UC("Data must be an object, but it was:",i,r);const s=[],o=cr.empty();Da(r,(u,d)=>{const f=gv(e,u,n);d=(0,rt.m9)(d);const g=i.Ru(f);if(d instanceof Bp)s.push(f);else{const _=ac(d,g);null!=_&&(s.push(f),o.set(f,_))}});const a=new si(s);return new hF(o,a,i.fieldTransforms)}function VC(t,e,n,r,i,s){const o=t.pu(1,e,n),a=[jp(e,r,n)],u=[i];if(s.length%2!=0)throw new X(L.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<s.length;_+=2)a.push(jp(e,s[_])),u.push(s[_+1]);const d=[],f=cr.empty();for(let _=a.length-1;_>=0;--_)if(!yF(d,a[_])){const y=a[_];let E=u[_];E=(0,rt.m9)(E);const D=o.Ru(y);if(E instanceof Bp)d.push(y);else{const b=ac(E,D);null!=b&&(d.push(y),f.set(y,b))}}const g=new si(d);return new hF(f,g,o.fieldTransforms)}function gF(t,e,n,r=!1){return ac(n,t.pu(r?4:3,e))}function ac(t,e){if(_F(t=(0,rt.m9)(t)))return UC("Unsupported field value:",e,t),mF(t,e);if(t instanceof sc)return function(r,i){if(!fF(i.Iu))throw i.mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.mu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.du&&4!==e.Iu)throw e.mu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=ac(a,i.Vu(o));null==u&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if(null===(r=(0,rt.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return ok(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=tn.fromDate(r);return{timestampValue:ld(i.serializer,s)}}if(r instanceof tn){const s=new tn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ld(i.serializer,s)}}if(r instanceof hv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Zs)return{bytesValue:bk(i.serializer,r._byteString)};if(r instanceof Kt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:e0(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.mu(`Unsupported field value: ${lv(r)}`)}(t,e)}function mF(t,e){const n={};return SO(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Da(t,(r,i)=>{const s=ac(i,e.Eu(r));null!=s&&(n[r]=s)}),{mapValue:{fields:n}}}function _F(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof tn||t instanceof hv||t instanceof Zs||t instanceof Kt||t instanceof sc)}function UC(t,e,n){if(!_F(n)||"object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=lv(n);throw e.mu("an object"===r?t+" a custom object":t+" "+r)}var i}function jp(t,e,n){if((e=(0,rt.m9)(e))instanceof No)return e._internalPath;if("string"==typeof e)return gv(t,e);throw mv("Field path arguments must be of type string or ",t,!1,void 0,n)}const s7=new RegExp("[~\\*/\\[\\]]");function gv(t,e,n){if(e.search(s7)>=0)throw mv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new No(...e.split("."))._internalPath}catch{throw mv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function mv(t,e,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new X(L.INVALID_ARGUMENT,a+t+u)}function yF(t,e){return t.some(n=>n.isEqual(e))}class $p{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Kt(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new o7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(_v("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class o7 extends $p{data(){return super.data()}}function _v(t,e){return"string"==typeof e?gv(t,e):e instanceof No?e._internalPath:e._delegate._internalPath}function vF(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new X(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class BC{}class Hp extends BC{}function Fa(t,e,...n){let r=[];e instanceof BC&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof Sd).length,a=s.filter(u=>u instanceof qp).length;if(o>1||o>0&&a>0)throw new X(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class qp extends Hp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new qp(e,n,r)}_apply(e){const n=this._parse(e);return TF(e._query,n),new lr(e.firestore,e.converter,GD(e._query,n))}_parse(e){const n=oc(e.firestore);return function(s,o,a,u,d,f,g){let _;if(d.isKeyField()){if("array-contains"===f||"array-contains-any"===f)throw new X(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if("in"===f||"not-in"===f){wF(g,f);const y=[];for(const E of g)y.push(EF(u,s,E));_={arrayValue:{values:y}}}else _=EF(u,s,g)}else"in"!==f&&"not-in"!==f&&"array-contains-any"!==f||wF(g,f),_=gF(a,"where",g,"in"===f||"not-in"===f);return ot.create(d,f,_)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class Sd extends BC{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Sd(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===n.length?n[0]:Dt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)TF(o,u),o=GD(o,u)}(e._query,n),new lr(e.firestore,e.converter,GD(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class jC extends Hp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new jC(e,n)}_apply(e){const n=function(i,s,o){if(null!==i.startAt)throw new X(L.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new X(L.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new fp(s,o)}(e._query,this._field,this._direction);return new lr(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new bo(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}class yv extends Hp{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new yv(e,n,r)}_apply(e){return new lr(e.firestore,e.converter,Vy(e._query,this._limit,this._limitType))}}class vv extends Hp{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new vv(e,n,r)}_apply(e){const n=IF(e,this.type,this._docOrFields,this._inclusive);return new lr(e.firestore,e.converter,(s=n,new bo((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class Iv extends Hp{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Iv(e,n,r)}_apply(e){const n=IF(e,this.type,this._docOrFields,this._inclusive);return new lr(e.firestore,e.converter,(s=n,new bo((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function IF(t,e,n,r){if(n[0]=(0,rt.m9)(n[0]),n[0]instanceof $p)return function(s,o,a,u,d){if(!u)throw new X(L.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const f=[];for(const g of id(s))if(g.field.isKeyField())f.push(Zu(o,u.key));else{const _=u.data.field(g.field);if(xy(_))throw new X(L.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===_){const y=g.field.canonicalString();throw new X(L.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}f.push(_)}return new Pa(f,d)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=oc(t.firestore);return function(o,a,u,d,f,g){const _=o.explicitOrderBy;if(f.length>_.length)throw new X(L.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const y=[];for(let E=0;E<f.length;E++){const D=f[E];if(_[E].field.isKeyField()){if("string"!=typeof D)throw new X(L.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof D}`);if(!zD(o)&&-1!==D.indexOf("/"))throw new X(L.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${D}' contains a slash.`);const b=o.path.child(ft.fromString(D));if(!ae.isDocumentKey(b))throw new X(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${b}' is not because it contains an odd number of segments.`);const M=new ae(b);y.push(Zu(a,M))}else{const b=gF(u,d,D);y.push(b)}}return new Pa(y,g)}(t._query,t.firestore._databaseId,i,e,n,r)}}function EF(t,e,n){if("string"==typeof(n=(0,rt.m9)(n))){if(""===n)throw new X(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zD(e)&&-1!==n.indexOf("/"))throw new X(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ft.fromString(n));if(!ae.isDocumentKey(r))throw new X(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Zu(t,new ae(r))}if(n instanceof Kt)return Zu(t,n._key);throw new X(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${lv(n)}.`)}function wF(t,e){if(!Array.isArray(t)||0===t.length)throw new X(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function TF(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new X(L.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class $C{convertValue(e,n="none"){switch(Sa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ao(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw pe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Da(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new hv(dn(e.latitude),dn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Ny(e);return null==r?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(cp(e));default:return null}}convertTimestamp(e){const n=Ca(e);return new tn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ft.fromString(e);we(Fk(r));const i=new Aa(r.get(1),r.get(3)),s=new ae(r.popFirst(5));return i.isEqual(n)||_n(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}function Ev(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class g7 extends $C{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Kt(this.firestore,null,n)}}class uc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Mo extends $p{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new zp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(_v("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class zp extends Mo{data(e={}){return super.data(e)}}class Va{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new uc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new zp(this._firestore,this._userDataWriter,r.key,r,new uc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new X(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new zp(i._firestore,i._userDataWriter,a.doc.key,a.doc,new uc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const u=new zp(i._firestore,i._userDataWriter,a.doc.key,a.doc,new uc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,f=-1;return 0!==a.type&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),f=o.indexOf(a.doc.key)),{type:_7(a.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function _7(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pe()}}function CF(t,e){return t instanceof Mo&&e instanceof Mo?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Va&&e instanceof Va&&t._firestore===e._firestore&&OC(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}class Ua extends $C{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Kt(this.firestore,null,n)}}function AF(t,e,n){t=it(t,Kt);const r=it(t.firestore,Bt),i=Ev(t.converter,e,n);return Rd(r,[pv(oc(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,nn.none())])}function bF(t,e,n,...r){t=it(t,Kt);const i=it(t.firestore,Bt),s=oc(i);let o;return o="string"==typeof(e=(0,rt.m9)(e))||e instanceof No?VC(s,"updateDoc",t._key,e,n,r):FC(s,"updateDoc",t._key,e),Rd(i,[o.toMutation(t._key,nn.exists(!0))])}function SF(t,...e){var n,r,i;t=(0,rt.m9)(t);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||kC(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(kC(e[o])){const g=e[o];e[o]=null===(n=g.next)||void 0===n?void 0:n.bind(g),e[o+1]=null===(r=g.error)||void 0===r?void 0:r.bind(g),e[o+2]=null===(i=g.complete)||void 0===i?void 0:i.bind(g)}let u,d,f;if(t instanceof Kt)d=it(t.firestore,Bt),f=rd(t._key.path),u={next:g=>{e[o]&&e[o](HC(d,t,g))},error:e[o+1],complete:e[o+2]};else{const g=it(t,lr);d=it(g.firestore,Bt),f=g._query;const _=new Ua(d);u={next:y=>{e[o]&&e[o](new Va(d,_,g,y))},error:e[o+1],complete:e[o+2]},vF(t._query)}return function(_,y,E,D){const b=new av(D),M=new J0(y,b,E);return _.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return W0(yield bd(_),M)})),()=>{b.Na(),_.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return K0(yield bd(_),M)}))}}(hn(d),f,a,u)}function Rd(t,e){return function(r,i){const s=new $n;return r.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return function cW(t,e,n){return rC.apply(this,arguments)}(yield xC(r),i,s)})),s.promise}(hn(t),e)}function HC(t,e,n){const r=n.docs.get(e._key),i=new Ua(t);return new Mo(t,i,e._key,r,new uc(n.hasPendingWrites,n.fromCache),e.converter)}const k7={maxAttempts:5};class RF{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=oc(e)}set(e,n,r){this._verifyNotCommitted();const i=Ba(e,this._firestore),s=Ev(i.converter,n,r),o=pv(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,nn.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Ba(e,this._firestore);let o;return o="string"==typeof(n=(0,rt.m9)(n))||n instanceof No?VC(this._dataReader,"WriteBatch.update",s._key,n,r,i):FC(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,nn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Ba(e,this._firestore);return this._mutations=this._mutations.concat(new cd(n._key,nn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new X(L.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ba(t,e){if((t=(0,rt.m9)(t)).firestore!==e)throw new X(L.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}class L7 extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=oc(n)}get(n){const r=Ba(n,this._firestore),i=new g7(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||1!==s.length)return pe();const o=s[0];if(o.isFoundDocument())return new $p(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new $p(this._firestore,i,r._key,null,r.converter);throw pe()})}set(n,r,i){const s=Ba(n,this._firestore),o=Ev(s.converter,r,i),a=pv(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,i);return this._transaction.set(s._key,a),this}update(n,r,i,...s){const o=Ba(n,this._firestore);let a;return a="string"==typeof(r=(0,rt.m9)(r))||r instanceof No?VC(this._dataReader,"Transaction.update",o._key,r,i,s):FC(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){const r=Ba(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Ba(e,this._firestore),r=new Ua(this._firestore);return super.get(e).then(i=>new Mo(this._firestore,r,n._key,i._document,new uc(!1,!1),n.converter))}}function zC(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new X("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function MF(){if(typeof Uint8Array>"u")throw new X("unimplemented","Uint8Arrays are not available in this environment.")}function OF(){if(!function g5(){return typeof atob<"u"}())throw new X("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,n=!0){Kl=Vs.SDK_VERSION,(0,Vs._registerComponent)(new ty.wA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Bt(new UG(r.getProvider("auth-internal")),new $G(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new X(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Aa(d.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,Vs.registerVersion)(lO,"4.4.0",e),(0,Vs.registerVersion)(lO,"4.4.0","esm2017")}();class Gp{constructor(e){this._delegate=e}static fromBase64String(e){return OF(),new Gp(Zs.fromBase64String(e))}static fromUint8Array(e){return MF(),new Gp(Zs.fromUint8Array(e))}toBase64(){return OF(),this._delegate.toBase64()}toUint8Array(){return MF(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function GC(t){return function G7(t,e){if("object"!=typeof t||null===t)return!1;const n=t;for(const r of e)if(r in n&&"function"==typeof n[r])return!0;return!1}(t,["next","error","complete"])}class W7{enableIndexedDbPersistence(e,n){return function qW(t,e){dF(t=it(t,Bt));const n=hn(t);if(n._uninitializedComponentsProvider)throw new X(L.FAILED_PRECONDITION,"SDK cache is already specified.");ii("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings(),i=new Cd;return lF(n,i,new DC(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return function zW(t){dF(t=it(t,Bt));const e=hn(t);if(e._uninitializedComponentsProvider)throw new X(L.FAILED_PRECONDITION,"SDK cache is already specified.");ii("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),r=new Cd;return lF(e,r,new zL(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function GW(t){if(t._initialized&&!t._terminated)throw new X(L.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new $n;return t._queue.enqueueAndForgetEvenWhileRestricted((0,z.Z)(function*(){try{yield(n=(0,z.Z)(function*(i){if(!cs.D())return Promise.resolve();const s=i+"main";yield cs.delete(s)}),function r(i){return n.apply(this,arguments)})(m0(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}(e._delegate)}}class kF{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Aa||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&ii("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},n),e)).merge,this._delegate._setSettings(e)}useEmulator(e,n,r={}){!function oF(t,e,n,r={}){var i;const s=(t=it(t,Vp))._getSettings(),o=`${e}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&ii("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if("string"==typeof r.mockUserToken)a=r.mockUserToken,u=Yn.MOCK_USER;else{a=(0,rt.Sg)(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new X(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Yn(d)}t._authCredentials=new VG(new dO(a,u))}}(this._delegate,e,n,r)}enableNetwork(){return function ZW(t){return function PW(t){return t.asyncQueue.enqueue((0,z.Z)(function*(){const e=yield ZL(t),n=yield KL(t);return e.setNetworkEnabled(!0),function(i){const s=se(i);return s.C_.delete(0),kp(s)}(n)}))}(hn(t=it(t,Bt)))}(this._delegate)}disableNetwork(){return function KW(t){return function xW(t){return t.asyncQueue.enqueue((0,z.Z)(function*(){const e=yield ZL(t),n=yield KL(t);return e.setNetworkEnabled(!1),(r=(0,z.Z)(function*(s){const o=se(s);o.C_.add(0),yield yd(o),o.M_.set("Offline")}),function i(s){return r.apply(this,arguments)})(n);var r}))}(hn(t=it(t,Bt)))}(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,tF("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function WW(t){return function(n){const r=new $n;return n.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return function fW(t,e){return uC.apply(this,arguments)}(yield xC(n),r)})),r.promise}(hn(t=it(t,Bt)))}(this._delegate)}onSnapshotsInSync(e){return function A7(t,e){return function OW(t,e){const n=new av(e);return t.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return i=yield bd(t),s=n,se(i).q_.add(s),void s.next();var i,s})),()=>{n.Na(),t.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return i=yield bd(t),s=n,void se(i).q_.delete(s);var i,s}))}}(hn(t=it(t,Bt)),kC(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new X("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Pd(this,aF(this._delegate,e))}catch(n){throw Gr(n,"collection()","Firestore.collection()")}}doc(e){try{return new Hi(this,dv(this._delegate,e))}catch(n){throw Gr(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Wr(this,function BW(t,e){if(t=it(t,Vp),MC("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new X(L.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new lr(t,null,(r=e,new bo(ft.emptyPath(),r)));var r}(this._delegate,e))}catch(n){throw Gr(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function F7(t,e,n){t=it(t,Bt);const r=Object.assign(Object.assign({},k7),n);return function(s){if(s.maxAttempts<1)throw new X(L.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const u=new $n;return s.asyncQueue.enqueueAndForget((0,z.Z)(function*(){const d=yield function QL(t){return cv(t).then(e=>e.datastore)}(s);new SW(s.asyncQueue,d,a,o,u).run()})),u.promise}(hn(t),i=>e(new L7(t,i)),r)}(this._delegate,n=>e(new LF(this,n)))}batch(){return hn(this._delegate),new FF(new RF(this._delegate,e=>Rd(this._delegate,e)))}loadBundle(e){return function QW(t,e){const n=hn(t=it(t,Bt)),r=new $W;return function kW(t,e,n,r){const i=function(o,a){let u;return u="string"==typeof o?vk().encode(o):o,f=function(f,g){if(f instanceof Uint8Array)return GL(f,g);if(f instanceof ArrayBuffer)return GL(new Uint8Array(f),g);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),new AW(f,a);var f}(n,Op(e));t.asyncQueue.enqueueAndForget((0,z.Z)(function*(){!function DW(t,e,n){const r=se(t);var i;(i=(0,z.Z)(function*(o,a,u){try{const d=yield a.getMetadata();if(yield function(E,D){const b=se(E),M=yn(D.createTime);return b.persistence.runTransaction("hasNewerBundle","readonly",R=>b.Kr.getBundleMetadata(R,D.id)).then(R=>!!R&&R.createTime.compareTo(M)>=0)}(o.localStore,d))return yield a.close(),u._completeWith({taskState:"Success",documentsLoaded:(E=d).totalDocuments,bytesLoaded:E.totalBytes,totalDocuments:E.totalDocuments,totalBytes:E.totalBytes}),Promise.resolve(new Set);u._updateProgress(LL(d));const f=new rW(d,o.localStore,a.serializer);let g=yield a.Ma();for(;g;){const y=yield f.ea(g);y&&u._updateProgress(y),g=yield a.Ma()}const _=yield f.complete();return yield xo(o,_.ra,void 0),yield function(E,D){const b=se(E);return b.persistence.runTransaction("Save bundle","readwrite",M=>b.Kr.saveBundleMetadata(M,D))}(o.localStore,d),u._completeWith(_.progress),Promise.resolve(_.na)}catch(d){return ii("SyncEngine",`Loading bundle failed with ${d}`),u._failWith(d),Promise.resolve(new Set)}var E}),function s(o,a,u){return i.apply(this,arguments)})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield xC(t),i,r)}))}(n,t._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function YW(t,e){return function LW(t,e){return t.asyncQueue.enqueue((0,z.Z)(function*(){return function(r,i){const s=se(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Kr.getNamedQuery(o,i))}(yield Ad(t),e)}))}(hn(t=it(t,Bt)),e).then(n=>n?new lr(t,null,n.query):null)}(this._delegate,e).then(n=>n?new Wr(this,n):null)}}class Tv extends $C{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gp(new Zs(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return Hi.forKey(n,this.firestore,null)}}class LF{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Tv(e)}get(e){const n=lc(e);return this._delegate.get(n).then(r=>new Wp(this._firestore,new Mo(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=lc(e);return r?(zC("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=lc(e);return 2===arguments.length?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=lc(e);return this._delegate.delete(n),this}}class FF{constructor(e){this._delegate=e}set(e,n,r){const i=lc(e);return r?(zC("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=lc(e);return 2===arguments.length?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=lc(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class cc{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new zp(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Zp(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=cc.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new cc(e,new Tv(e),n),i.set(n,s)),s}}cc.INSTANCES=new WeakMap;class Hi{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Tv(e)}static forPath(e,n,r){if(e.length%2!=0)throw new X("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Hi(n,new Kt(n._delegate,r,new ae(e)))}static forKey(e,n,r){return new Hi(n,new Kt(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Pd(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Pd(this.firestore,aF(this._delegate,e))}catch(n){throw Gr(n,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,rt.m9)(e))instanceof Kt&&uF(this._delegate,e)}set(e,n){n=zC("DocumentReference.set",n);try{return n?AF(this._delegate,e,n):AF(this._delegate,e)}catch(r){throw Gr(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return 1===arguments.length?bF(this._delegate,e):bF(this._delegate,e,n,...r)}catch(i){throw Gr(i,"updateDoc()","DocumentReference.update()")}}delete(){return function D7(t){return Rd(it(t.firestore,Bt),[new cd(t._key,nn.none())])}(this._delegate)}onSnapshot(...e){const n=VF(e),r=UF(e,i=>new Wp(this.firestore,new Mo(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return SF(this._delegate,n,r)}get(e){let n;return n="cache"===e?.source?function v7(t){t=it(t,Kt);const e=it(t.firestore,Bt),n=hn(e),r=new Ua(e);return function NW(t,e){const n=new $n;return t.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return(r=(0,z.Z)(function*(s,o,a){try{const u=yield function(f,g){const _=se(f);return _.persistence.runTransaction("read document","readonly",y=>_.localDocuments.getDocument(y,g))}(s,o);u.isFoundDocument()?a.resolve(u):u.isNoDocument()?a.resolve(null):a.reject(new X(L.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const d=Ed(u,`Failed to get document '${o} from cache`);a.reject(d)}}),function i(s,o,a){return r.apply(this,arguments)})(yield Ad(t),e,n);var r})),n.promise}(n,t._key).then(i=>new Mo(e,r,t._key,i,new uc(null!==i&&i.hasLocalMutations,!0),t.converter))}(this._delegate):"server"===e?.source?function I7(t){t=it(t,Kt);const e=it(t.firestore,Bt);return YL(hn(e),t._key,{source:"server"}).then(n=>HC(e,t,n))}(this._delegate):function y7(t){t=it(t,Kt);const e=it(t.firestore,Bt);return YL(hn(e),t._key).then(n=>HC(e,t,n))}(this._delegate),n.then(r=>new Wp(this.firestore,new Mo(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Hi(this.firestore,this._delegate.withConverter(e?cc.getInstance(this.firestore,e):null))}}function Gr(t,e,n){return t.message=t.message.replace(e,n),t}function VF(t){for(const e of t)if("object"==typeof e&&!GC(e))return e;return{}}function UF(t,e){var n,r;let i;return i=GC(t[0])?t[0]:GC(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Wp{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Hi(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return CF(this._delegate,e._delegate)}}class Zp extends Wp{data(e){const n=this._delegate.data(e);return this._delegate._converter||function LG(t,e){t||pe()}(void 0!==n),n}}class Wr{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Tv(e)}where(e,n,r){try{return new Wr(this.firestore,Fa(this._delegate,function a7(t,e,n){const r=e,i=_v("where",t);return qp._create(i,r,n)}(e,n,r)))}catch(i){throw Gr(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Wr(this.firestore,Fa(this._delegate,function u7(t,e="asc"){const n=e,r=_v("orderBy",t);return jC._create(r,n)}(e,n)))}catch(r){throw Gr(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Wr(this.firestore,Fa(this._delegate,function c7(t){return iF("limit",t),yv._create("limit",t,"F")}(e)))}catch(n){throw Gr(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Wr(this.firestore,Fa(this._delegate,function l7(t){return iF("limitToLast",t),yv._create("limitToLast",t,"L")}(e)))}catch(n){throw Gr(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Wr(this.firestore,Fa(this._delegate,function d7(...t){return vv._create("startAt",t,!0)}(...e)))}catch(n){throw Gr(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Wr(this.firestore,Fa(this._delegate,function h7(...t){return vv._create("startAfter",t,!1)}(...e)))}catch(n){throw Gr(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Wr(this.firestore,Fa(this._delegate,function f7(...t){return Iv._create("endBefore",t,!1)}(...e)))}catch(n){throw Gr(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Wr(this.firestore,Fa(this._delegate,function p7(...t){return Iv._create("endAt",t,!0)}(...e)))}catch(n){throw Gr(n,"endAt()","Query.endAt()")}}isEqual(e){return OC(this._delegate,e._delegate)}get(e){let n;return n="cache"===e?.source?function w7(t){t=it(t,lr);const e=it(t.firestore,Bt),n=hn(e),r=new Ua(e);return function MW(t,e){const n=new $n;return t.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return(r=(0,z.Z)(function*(s,o,a){try{const u=yield ev(s,o,!0),d=new UL(o,u.ls),f=d.ca(u.documents),g=d.applyChanges(f,!1);a.resolve(g.snapshot)}catch(u){const d=Ed(u,`Failed to execute query '${o} against cache`);a.reject(d)}}),function i(s,o,a){return r.apply(this,arguments)})(yield Ad(t),e,n);var r})),n.promise}(n,t._query).then(i=>new Va(e,r,t,i))}(this._delegate):"server"===e?.source?function T7(t){t=it(t,lr);const e=it(t.firestore,Bt),n=hn(e),r=new Ua(e);return JL(n,t._query,{source:"server"}).then(i=>new Va(e,r,t,i))}(this._delegate):function E7(t){t=it(t,lr);const e=it(t.firestore,Bt),n=hn(e),r=new Ua(e);return vF(t._query),JL(n,t._query).then(i=>new Va(e,r,t,i))}(this._delegate),n.then(r=>new WC(this.firestore,new Va(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=VF(e),r=UF(e,i=>new WC(this.firestore,new Va(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return SF(this._delegate,n,r)}withConverter(e){return new Wr(this.firestore,this._delegate.withConverter(e?cc.getInstance(this.firestore,e):null))}}class K7{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Zp(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class WC{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Wr(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Zp(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new K7(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Zp(this._firestore,r))})}isEqual(e){return CF(this._delegate,e._delegate)}}class Pd extends Wr{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Hi(this.firestore,e):null}doc(e){try{return new Hi(this.firestore,void 0===e?dv(this._delegate):dv(this._delegate,e))}catch(n){throw Gr(n,"doc()","CollectionReference.doc()")}}add(e){return function C7(t,e){const n=it(t.firestore,Bt),r=dv(t),i=Ev(t.converter,e);return Rd(n,[pv(oc(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,nn.exists(!1))]).then(()=>r)}(this._delegate,e).then(n=>new Hi(this.firestore,n))}isEqual(e){return uF(this._delegate,e._delegate)}withConverter(e){return new Pd(this.firestore,this._delegate.withConverter(e?cc.getInstance(this.firestore,e):null))}}function lc(t){return it(t,Kt)}class ZC{constructor(...e){this._delegate=new No(...e)}static documentId(){return new ZC(Wt.keyField().canonicalString())}isEqual(e){return(e=(0,rt.m9)(e))instanceof No&&this._delegate._internalPath.isEqual(e._internalPath)}}class dc{constructor(e){this._delegate=e}static serverTimestamp(){const e=function U7(){return new LC("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new dc(e)}static delete(){const e=function V7(){return new Bp("deleteField")}();return e._methodName="FieldValue.delete",new dc(e)}static arrayUnion(...e){const n=function B7(...t){return new n7("arrayUnion",t)}(...e);return n._methodName="FieldValue.arrayUnion",new dc(n)}static arrayRemove(...e){const n=function j7(...t){return new r7("arrayRemove",t)}(...e);return n._methodName="FieldValue.arrayRemove",new dc(n)}static increment(e){const n=function $7(t){return new i7("increment",t)}(e);return n._methodName="FieldValue.increment",new dc(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Q7={Firestore:kF,GeoPoint:hv,Timestamp:tn,Blob:Gp,Transaction:LF,WriteBatch:FF,DocumentReference:Hi,DocumentSnapshot:Wp,Query:Wr,QueryDocumentSnapshot:Zp,QuerySnapshot:WC,CollectionReference:Pd,FieldPath:ZC,FieldValue:dc,setLogLevel:function Z7(t){!function kG(t){Ea.setLogLevel(t)}(t)},CACHE_SIZE_UNLIMITED:-1};function BF(t,e){return function X7(t,e=VT){return new st(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}(t,e)}function KC(t,e){return BF(t,e).pipe(ve(n=>({payload:n,type:"query"})))}!function J7(t){(function Y7(t,e){t.INTERNAL.registerComponent(new ty.wA("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},Q7)))})(t,(e,n)=>new kF(e,n,new W7)),t.registerVersion("@firebase/firestore-compat","0.3.23")}(ji.Z);class jF{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){const r=this.ref.collection(e),{ref:i,query:s}=WF(r,n);return new qF(i,s,this.afs)}snapshotChanges(){return function eZ(t,e){return BF(t,e).pipe(X_(void 0),qT(),ve(n=>{const[r,i]=n;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Hr)}valueChanges(e={}){return this.snapshotChanges().pipe(ve(({payload:n})=>e.idField?{...n.data(),[e.idField]:n.id}:n.data()))}get(e){return A(this.ref.get(e)).pipe(Hr)}}function Dv(t,e){return KC(t,e).pipe(X_(void 0),qT(),ve(n=>{const[r,i]=n,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{const d=s.find(g=>g.doc.ref.isEqual(a.ref)),f=r?.payload.docs.find(g=>g.ref.isEqual(a.ref));d&&JSON.stringify(d.doc.metadata)===JSON.stringify(a.metadata)||!d&&f&&JSON.stringify(f.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),o}))}function $F(t,e,n){return Dv(t,n).pipe(ey((r,i)=>function tZ(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=function nZ(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return QC(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return QC(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return QC(t,e.oldIndex,1)}return t}(t,r))}),t}(r,i.map(s=>s.payload),e),[]),qt(),ve(r=>r.map(i=>({type:i.type,payload:i}))))}function QC(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function HF(t){return(!t||0===t.length)&&(t=["added","removed","modified"]),t}class qF{ref;query;afs;constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=Dv(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(ve(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(X_(void 0),qT(),os(([r,i])=>i.length>0||!r),ve(([,r])=>r),Hr)}auditTrail(e){return this.stateChanges(e).pipe(ey((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=HF(e);return $F(this.query,n,this.afs.schedulers.outsideAngular).pipe(Hr)}valueChanges(e={}){return KC(this.query,this.afs.schedulers.outsideAngular).pipe(ve(n=>n.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),Hr)}get(e){return A(this.query.get(e)).pipe(Hr)}add(e){return this.ref.add(e)}doc(e){return new jF(this.ref.doc(e),this.afs)}}class rZ{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return e&&0!==e.length?Dv(this.query,this.afs.schedulers.outsideAngular).pipe(ve(n=>n.filter(r=>e.indexOf(r.type)>-1)),os(n=>n.length>0),Hr):Dv(this.query,this.afs.schedulers.outsideAngular).pipe(Hr)}auditTrail(e){return this.stateChanges(e).pipe(ey((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=HF(e);return $F(this.query,n,this.afs.schedulers.outsideAngular).pipe(Hr)}valueChanges(e={}){return KC(this.query,this.afs.schedulers.outsideAngular).pipe(ve(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),Hr)}get(e){return A(this.query.get(e)).pipe(Hr)}}const zF=new ce("angularfire2.enableFirestorePersistence"),GF=new ce("angularfire2.firestore.persistenceSettings"),iZ=new ce("angularfire2.firestore.settings"),sZ=new ce("angularfire2.firestore.use-emulator");function WF(t,e=(n=>n)){return{query:e(t),ref:t}}let YC=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,r,i,s,o,a,u,d,f,g,_,y,E,D,b,M,R){this.schedulers=u;const O=Q_(n,a,r),K=f;g&&GM(O,a,_,E,D,b,y,M),[this.firestore,this.persistenceEnabled$]=jT(`${O.name}.firestore`,"AngularFirestore",O.name,()=>{const ie=a.runOutsideAngular(()=>O.firestore());if(s&&ie.settings(s),K&&ie.useEmulator(...K),i&&!z_(o)){const Re=()=>{try{return A(ie.enablePersistence(d||void 0).then(()=>!0,()=>!1))}catch(lt){return typeof console<"u"&&console.warn(lt),$(!1)}};return[ie,a.runOutsideAngular(Re)]}return[ie,$(!1)]},[s,K,i])}collection(n,r){let i;i="string"==typeof n?this.firestore.collection(n):n;const{ref:s,query:o}=WF(i,r),a=this.schedulers.ngZone.run(()=>s);return new qF(a,o,this)}collectionGroup(n,r){const i=r||(o=>o),s=this.firestore.collectionGroup(n);return new rZ(i(s),this)}doc(n){let r;r="string"==typeof n?this.firestore.doc(n):n;const i=this.schedulers.ngZone.run(()=>r);return new jF(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||t)(re(kf),re(Lf,8),re(zF,8),re(iZ,8),re(Ms),re(yt),re(BT),re(GF,8),re(sZ,8),re($T,8),re(BM,8),re(jM,8),re($M,8),re(HM,8),re(qM,8),re(zM,8),re(UT,8))};static \u0275prov=De({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),oZ=(()=>{class t{constructor(){ji.Z.registerVersion("angularfire",Of.full,"fst-compat")}static enablePersistence(n){return{ngModule:t,providers:[{provide:zF,useValue:!0},{provide:GF,useValue:n}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=vr({type:t});static \u0275inj=mr({providers:[YC]})}return t})();const ZF="firebasestorage.googleapis.com",KF="storageBucket";class un extends rt.ZR{constructor(e,n,r=0){super(JC(e),`Firebase Storage: ${n} (${JC(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,un.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return JC(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var rn=function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t}(rn||{});function JC(t){return"storage/"+t}function XC(){return new un(rn.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function QF(){return new un(rn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function YF(){return new un(rn.CANCELED,"User canceled the upload/download.")}function JF(){return new un(rn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function xd(t){return new un(rn.INVALID_ARGUMENT,t)}function XF(){return new un(rn.APP_DELETED,"The Firebase app was deleted.")}function eV(t){return new un(rn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Kp(t,e){return new un(rn.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Qp(t){throw new un(rn.INTERNAL_ERROR,"Internal error: "+t)}class Rr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Rr.makeFromUrl(e,n)}catch{return new Rr(e,"")}if(""===r.path)return r;throw function _Z(t){return new un(rn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)",a=new RegExp("^gs://"+i+"(/(.*))?$","i");function d(K){K.path_=decodeURIComponent(K.path)}const g=n.replace(/[.]/g,"\\."),O=[{regex:a,indices:{bucket:1,path:3},postModify:function s(K){"/"===K.path.charAt(K.path.length-1)&&(K.path_=K.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${g}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:d},{regex:new RegExp(`^https?://${n===ZF?"(?:storage.googleapis.com|storage.cloud.google.com)":n}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:d}];for(let K=0;K<O.length;K++){const ie=O[K],Re=ie.regex.exec(e);if(Re){let Qt=Re[ie.indices.path];Qt||(Qt=""),r=new Rr(Re[ie.indices.bucket],Qt),ie.postModify(r);break}}if(null==r)throw function mZ(t){return new un(rn.INVALID_URL,"Invalid URL '"+t+"'.")}(e);return r}}class wZ{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Cv(t){return"string"==typeof t||t instanceof String}function tV(t){return eA()&&t instanceof Blob}function eA(){return typeof Blob<"u"}function tA(t,e,n,r){if(r<e)throw xd(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw xd(`Invalid value for '${t}'. Expected ${n} or less.`)}function Oo(t,e,n){let r=e;return null==n&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function nV(t){const e=encodeURIComponent;let n="?";for(const r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n=n.slice(0,-1),n}var Nd=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}(Nd||{});function rV(t,e){const n=t>=500&&t<600,i=-1!==[408,429].indexOf(t),s=-1!==e.indexOf(t);return n||i||s}class SZ{constructor(e,n,r,i,s,o,a,u,d,f,g,_=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=f,this.connectionFactory_=g,this.retry=_,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,E)=>{this.resolve_=y,this.reject_=E,this.start_()})}start_(){const n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());!function CZ(t){return void 0!==t}(u)?s():s(u)}catch(u){o(u)}else if(null!==a){const u=XC();u.serverResponse=a.getErrorText(),o(this.errorCallback_?this.errorCallback_(a,u):u)}else o(i.canceled?this.appDelete_?XF():YF():QF())};this.canceled_?n(0,new Av(!1,null,!0)):this.backoffId_=function TZ(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return 2===a}let d=!1;function f(...b){d||(d=!0,e.apply(null,b))}function g(b){i=setTimeout(()=>{i=null,t(y,u())},b)}function _(){s&&clearTimeout(s)}function y(b,...M){if(d)return void _();if(b)return _(),void f.call(null,b,...M);if(u()||o)return _(),void f.call(null,b,...M);let O;r<64&&(r*=2),1===a?(a=2,O=0):O=1e3*(r+Math.random()),g(O)}let E=!1;function D(b){E||(E=!0,_(),!d&&(null!==i?(b||(a=2),clearTimeout(i),g(0)):b||(a=1)))}return g(0),s=setTimeout(()=>{o=!0,D(!0)},n),D}((r,i)=>{if(i)return void r(!1,new Av(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{null!==this.progressCallback_&&this.progressCallback_(a.loaded,a.lengthComputable?a.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Nd.NO_ERROR,u=s.getStatus();if(!a||rV(u,this.additionalRetryCodes_)&&this.retry){const f=s.getErrorCode()===Nd.ABORT;return void r(!1,new Av(!1,null,f))}const d=-1!==this.successCodes_.indexOf(u);r(!0,new Av(d,s))})},n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function DZ(t){t(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Av{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function kZ(...t){const e=function OZ(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}if(eA())return new Blob(t);throw new un(rn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const _i={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class nA{constructor(e,n){this.data=e,this.contentType=n||null}}function rA(t,e){switch(t){case _i.RAW:return new nA(iV(e));case _i.BASE64:case _i.BASE64URL:return new nA(sV(t,e));case _i.DATA_URL:return new nA(function UZ(t){const e=new oV(t);return e.base64?sV(_i.BASE64,e.rest):function VZ(t){let e;try{e=decodeURIComponent(t)}catch{throw Kp(_i.DATA_URL,"Malformed data URL.")}return iV(e)}(e.rest)}(e),function BZ(t){return new oV(t).contentType}(e))}throw XC()}function iV(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?n<t.length-1&&56320==(64512&t.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function sV(t,e){switch(t){case _i.BASE64:{const i=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(i||s)throw Kp(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case _i.BASE64URL:{const i=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(i||s)throw Kp(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=function FZ(t){if(typeof atob>"u")throw function EZ(t){return new un(rn.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(t)}(e)}catch(i){throw i.message.includes("polyfill")?i:Kp(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class oV{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(null===n)throw Kp(_i.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;null!=r&&(this.base64=function jZ(t,e){return t.length>=e.length&&t.substring(t.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Ks{constructor(e,n){let r=0,i="";tV(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(tV(this.data_)){const i=function LZ(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}(this.data_,e,n);return null===i?null:new Ks(i)}{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Ks(r,!0)}}static getBlob(...e){if(eA()){const n=e.map(r=>r instanceof Ks?r.data_:r);return new Ks(kZ.apply(null,n))}{const n=e.map(o=>Cv(o)?rA(_i.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Ks(i,!0)}}uploadData(){return this.data_}}function iA(t){let e;try{e=JSON.parse(t)}catch{return null}return function bZ(t){return"object"==typeof t&&!Array.isArray(t)}(e)?e:null}function aV(t){const e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function qZ(t,e){return e}class Zr{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||qZ}}let bv=null;function Yp(){if(bv)return bv;const t=[];t.push(new Zr("bucket")),t.push(new Zr("generation")),t.push(new Zr("metageneration")),t.push(new Zr("name","fullPath",!0));const n=new Zr("name");n.xform=function e(s,o){return function zZ(t){return!Cv(t)||t.length<2?t:aV(t)}(o)},t.push(n);const i=new Zr("size");return i.xform=function r(s,o){return void 0!==o?Number(o):o},t.push(i),t.push(new Zr("timeCreated")),t.push(new Zr("updated")),t.push(new Zr("md5Hash",null,!0)),t.push(new Zr("cacheControl",null,!0)),t.push(new Zr("contentDisposition",null,!0)),t.push(new Zr("contentEncoding",null,!0)),t.push(new Zr("contentLanguage",null,!0)),t.push(new Zr("contentType",null,!0)),t.push(new Zr("metadata","customMetadata",!0)),bv=t,bv}function uV(t,e,n){const r=iA(e);return null===r?null:function WZ(t,e,n){const r={type:"file"},i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return function GZ(t,e){Object.defineProperty(t,"ref",{get:function n(){const s=new Rr(t.bucket,t.fullPath);return e._makeStorageReference(s)}})}(r,t),r}(t,r,n)}function sA(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}const cV="prefixes",lV="items";class Qs{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Ys(t){if(!t)throw XC()}function Sv(t,e){return function n(r,i){const s=uV(t,i,e);return Ys(null!==s),s}}function Md(t){return function e(n,r){let i;return i=401===n.getStatus()?n.getErrorText().includes("Firebase App Check token is invalid")?function pZ(){return new un(rn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function fZ(){return new un(rn.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===n.getStatus()?function hZ(t){return new un(rn.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(t.bucket):403===n.getStatus()?function gZ(t){return new un(rn.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}(t.path):r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}}function Jp(t){const e=Md(t);return function n(r,i){let s=e(r,i);return 404===r.getStatus()&&(s=function dZ(t){return new un(rn.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}(t.path)),s.serverResponse=i.serverResponse,s}}function dV(t,e,n){const i=Oo(e.fullServerUrl(),t.host,t._protocol),o=t.maxOperationRetryTime,a=new Qs(i,"GET",Sv(t,n),o);return a.errorHandler=Jp(e),a}function XZ(t,e,n,r,i){const s={};s.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const a=Oo(e.bucketOnlyServerUrl(),t.host,t._protocol),d=t.maxOperationRetryTime,f=new Qs(a,"GET",function YZ(t,e){return function n(r,i){const s=function QZ(t,e,n){const r=iA(n);return null===r?null:function KZ(t,e,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[cV])for(const i of n[cV]){const s=i.replace(/\/$/,""),o=t._makeStorageReference(new Rr(e,s));r.prefixes.push(o)}if(n[lV])for(const i of n[lV]){const s=t._makeStorageReference(new Rr(e,i.name));r.items.push(s)}return r}(t,e,r)}(t,e,i);return Ys(null!==s),s}}(t,e.bucket),d);return f.urlParams=s,f.errorHandler=Md(e),f}function fV(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function rK(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class Rv{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}}function oA(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Ys(!1)}return Ys(!!n&&-1!==(e||["active"]).indexOf(n)),n}const aK={STATE_CHANGED:"state_changed"},Kr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function aA(t){switch(t){case"running":case"pausing":case"canceling":return Kr.RUNNING;case"paused":return Kr.PAUSED;case"success":return Kr.SUCCESS;case"canceled":return Kr.CANCELED;default:return Kr.ERROR}}class uK{constructor(e,n,r){if(function AZ(t){return"function"==typeof t}(e)||null!=n||null!=r)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function Od(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}let mV=null;class cK{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Nd.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Nd.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Nd.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw Qp("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Qp("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Qp("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Qp("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Qp("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class lK extends cK{initXhr(){this.xhr_.responseType="text"}}function ls(){return mV?mV():new lK}class _V{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=Yp(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(rn.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(rV(i.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=QF()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(rn.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,n)=>{const r=function iK(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o=fV(e,r,i),a={name:o.fullPath},u=Oo(s,t.host,t._protocol),f={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},g=sA(o,n),E=new Qs(u,"POST",function y(D){let b;oA(D);try{b=D.getResponseHeader("X-Goog-Upload-URL")}catch{Ys(!1)}return Ys(Cv(b)),b},t.maxUploadRetryTime);return E.urlParams=a,E.headers=f,E.body=g,E.errorHandler=Md(e),E}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,ls,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const i=function sK(t,e,n,r){const u=new Qs(n,"POST",function s(d){const f=oA(d,["active","final"]);let g=null;try{g=d.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Ys(!1)}g||Ys(!1);const _=Number(g);return Ys(!isNaN(_)),new Rv(_,r.size(),"final"===f)},t.maxUploadRetryTime);return u.headers={"X-Goog-Upload-Command":"query"},u.errorHandler=Md(e),u}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,ls,n,r);this._request=s,s.getPromise().then(o=>{this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,n=new Rv(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=function oK(t,e,n,r,i,s,o,a){const u=new Rv(0,0);if(o?(u.current=o.current,u.total=o.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw function vZ(){return new un(rn.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const d=u.total-u.current;let f=d;i>0&&(f=Math.min(f,i));const g=u.current;let y="";y=0===f?"finalize":d===f?"upload, finalize":"upload";const E={"X-Goog-Upload-Command":y,"X-Goog-Upload-Offset":`${u.current}`},D=r.slice(g,g+f);if(null===D)throw JF();const O=new Qs(n,"POST",function b(K,ie){const Re=oA(K,["active","final"]),lt=u.current+f,Qt=r.size();let Vo;return Vo="final"===Re?Sv(e,s)(K,ie):null,new Rv(lt,Qt,"final"===Re,Vo)},e.maxUploadRetryTime);return O.headers=E,O.body=D.uploadData(),O.progressCallback=a||null,O.errorHandler=Md(t),O}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(u){return this._error=u,void this._transition("error")}const a=this._ref.storage._makeRequest(o,ls,i,s,!1);this._request=a,a.getPromise().then(u=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(u.current),u.finalized?(this._metadata=u.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=dV(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,ls,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=function pV(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},u=function a(){let O="";for(let K=0;K<2;K++)O+=Math.random().toString().slice(2);return O}();o["Content-Type"]="multipart/related; boundary="+u;const d=fV(e,r,i),f=sA(d,n),y=Ks.getBlob("--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+f+"\r\n--"+u+"\r\nContent-Type: "+d.contentType+"\r\n\r\n",r,"\r\n--"+u+"--");if(null===y)throw JF();const E={name:d.fullPath},D=Oo(s,t.host,t._protocol),M=t.maxUploadRetryTime,R=new Qs(D,"POST",Sv(t,n),M);return R.urlParams=E,R.headers=o,R.body=y.uploadData(),R.errorHandler=Md(e),R}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,ls,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n="paused"===this._state;this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=YF(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=aA(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){const s=new uK(n||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);-1!==n&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(aA(this._state)){case Kr.SUCCESS:Od(this._resolve.bind(null,this.snapshot))();break;case Kr.CANCELED:case Kr.ERROR:Od(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(aA(this._state)){case Kr.RUNNING:case Kr.PAUSED:e.next&&Od(e.next.bind(e,this.snapshot))();break;case Kr.SUCCESS:e.complete&&Od(e.complete.bind(e))();break;default:e.error&&Od(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class hc{constructor(e,n){this._service=e,this._location=n instanceof Rr?n:Rr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new hc(e,n)}get root(){const e=new Rr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return aV(this._location.path)}get storage(){return this._service}get parent(){const e=function $Z(t){if(0===t.length)return null;const e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;const n=new Rr(this._location.bucket,e);return new hc(this._service,n)}_throwIfRoot(e){if(""===this._location.path)throw eV(e)}}function vV(t,e,n){return uA.apply(this,arguments)}function uA(){return uA=(0,z.Z)(function*(t,e,n){const i=yield IV(t,{pageToken:n});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield vV(t,e,i.nextPageToken))}),uA.apply(this,arguments)}function IV(t,e){null!=e&&"number"==typeof e.maxResults&&tA("options.maxResults",1,1e3,e.maxResults);const n=e||{},r=XZ(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(r,ls)}function wK(t){t._throwIfRoot("getDownloadURL");const e=function eK(t,e,n){const i=Oo(e.fullServerUrl(),t.host,t._protocol),o=t.maxOperationRetryTime,a=new Qs(i,"GET",function JZ(t,e){return function n(r,i){const s=uV(t,i,e);return Ys(null!==s),function ZZ(t,e,n,r){const i=iA(e);if(null===i||!Cv(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map(d=>{const g=t.fullPath;return Oo("/b/"+o(t.bucket)+"/o/"+o(g),n,r)+nV({alt:"media",token:d})})[0]}(s,i,t.host,t._protocol)}}(t,n),o);return a.errorHandler=Jp(e),a}(t.storage,t._location,Yp());return t.storage.makeRequestWithTokens(e,ls).then(n=>{if(null===n)throw function IZ(){return new un(rn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return n})}function EV(t,e){const n=function HZ(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new Rr(t._location.bucket,n);return new hc(t.storage,r)}function wV(t,e){if(t instanceof cA){const n=t;if(null==n._bucket)throw function yZ(){return new un(rn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+KF+"' property when initializing the app?")}();const r=new hc(n,n._bucket);return null!=e?wV(r,e):r}return void 0!==e?EV(t,e):t}function AK(t,e){if(e&&function DK(t){return/^[A-Za-z]+:\/\//.test(t)}(e)){if(t instanceof cA)return function CK(t,e){return new hc(t,e)}(t,e);throw xd("To use ref(service, url), the first argument must be a Storage instance.")}return wV(t,e)}function TV(t,e){const n=e?.[KF];return null==n?null:Rr.makeFromBucketSpec(n,t)}class cA{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=ZF,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Rr.makeFromBucketSpec(i,this._host):TV(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Rr.makeFromBucketSpec(this._url,e):TV(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){tA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){tA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,z.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const n=e._authProvider.getImmediate({optional:!0});if(n){const r=yield n.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,z.Z)(function*(){const n=e._appCheckProvider.getImmediate({optional:!0});return n?(yield n.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new hc(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new wZ(XF());{const o=function MZ(t,e,n,r,i,s,o=!0){const a=nV(t.urlParams),u=t.url+a,d=Object.assign({},t.headers);return function xZ(t,e){e&&(t["X-Firebase-GMPID"]=e)}(d,e),function RZ(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(d,n),function PZ(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(d,s),function NZ(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(d,r),new SZ(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,n){var r=this;return(0,z.Z)(function*(){const[i,s]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,n,i,s).getPromise()})()}}const DV="@firebase/storage";function bV(t,e){return AK(t=(0,rt.m9)(t),e)}function LK(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new cA(n,r,i,e,Vs.SDK_VERSION)}!function FK(){(0,Vs._registerComponent)(new ty.wA("storage",LK,"PUBLIC").setMultipleInstances(!0)),(0,Vs.registerVersion)(DV,"0.12.0",""),(0,Vs.registerVersion)(DV,"0.12.0","esm2017")}();class Pv{constructor(e,n,r){this._delegate=e,this.task=n,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class RV{constructor(e,n){this._delegate=e,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Pv(this._delegate.snapshot,this,this._ref)}then(e,n){return this._delegate.then(r=>{if(e)return e(new Pv(r,this,this._ref))},n)}on(e,n,r,i){let s;return n&&(s="function"==typeof n?o=>n(new Pv(o,this,this._ref)):{next:n.next?o=>n.next(new Pv(o,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class PV{constructor(e,n){this._delegate=e,this._service=n}get prefixes(){return this._delegate.prefixes.map(e=>new ko(e,this._service))}get items(){return this._delegate.items.map(e=>new ko(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class ko{constructor(e,n){this._delegate=e,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const n=function kK(t,e){return EV(t,e)}(this._delegate,e);return new ko(n,this.storage)}get root(){return new ko(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new ko(e,this.storage)}put(e,n){return this._throwIfRoot("put"),new RV(function SK(t,e,n){return function _K(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new _V(t,new Ks(e),n)}(t=(0,rt.m9)(t),e,n)}(this._delegate,e,n),this)}putString(e,n=_i.RAW,r){this._throwIfRoot("putString");const i=rA(n,e),s=Object.assign({},r);return null==s.contentType&&null!=i.contentType&&(s.contentType=i.contentType),new RV(new _V(this._delegate,new Ks(i.data,!0),s),this)}listAll(){return function NK(t){return function vK(t){const e={prefixes:[],items:[]};return vV(t,e).then(()=>e)}(t=(0,rt.m9)(t))}(this._delegate).then(e=>new PV(e,this.storage))}list(e){return function xK(t,e){return IV(t=(0,rt.m9)(t),e)}(this._delegate,e||void 0).then(n=>new PV(n,this.storage))}getMetadata(){return function RK(t){return function IK(t){t._throwIfRoot("getMetadata");const e=dV(t.storage,t._location,Yp());return t.storage.makeRequestWithTokens(e,ls)}(t=(0,rt.m9)(t))}(this._delegate)}updateMetadata(e){return function PK(t,e){return function EK(t,e){t._throwIfRoot("updateMetadata");const n=function tK(t,e,n,r){const s=Oo(e.fullServerUrl(),t.host,t._protocol),a=sA(n,r),d=t.maxOperationRetryTime,f=new Qs(s,"PATCH",Sv(t,r),d);return f.headers={"Content-Type":"application/json; charset=utf-8"},f.body=a,f.errorHandler=Jp(e),f}(t.storage,t._location,e,Yp());return t.storage.makeRequestWithTokens(n,ls)}(t=(0,rt.m9)(t),e)}(this._delegate,e)}getDownloadURL(){return function MK(t){return wK(t=(0,rt.m9)(t))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function OK(t){return function TK(t){t._throwIfRoot("deleteObject");const e=function nK(t,e){const r=Oo(e.fullServerUrl(),t.host,t._protocol),a=new Qs(r,"DELETE",function o(u,d){},t.maxOperationRetryTime);return a.successCodes=[200,204],a.errorHandler=Jp(e),a}(t.storage,t._location);return t.storage.makeRequestWithTokens(e,ls)}(t=(0,rt.m9)(t))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw eV(e)}}class xV{constructor(e,n){this.app=e,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(NV(e))throw xd("ref() expected a child path but got a URL, use refFromURL instead.");return new ko(bV(this._delegate,e),this)}refFromURL(e){if(!NV(e))throw xd("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Rr.makeFromUrl(e,this._delegate.host)}catch{throw xd("refFromUrl() expected a valid full URL but got an invalid one.")}return new ko(bV(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,n,r={}){!function SV(t,e,n,r={}){!function bK(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken="string"==typeof i?i:(0,rt.Sg)(i,t.app.options.projectId))}(t,e,n,r)}(this._delegate,e,n,r)}}function NV(t){return/^[A-Za-z]+:\/\//.test(t)}function jK(t,{instanceIdentifier:e}){const n=t.getProvider("app-compat").getImmediate(),r=t.getProvider("storage").getImmediate({identifier:e});return new xV(n,r)}function MV(t){const e=function HK(t){return new st(e=>{const n=o=>e.next(o);n(t.snapshot);const s=t.on("state_changed",n);return t.then(o=>{n(o),e.complete()},o=>{n(t.snapshot),(o=>{e.error(o)})(o)}),function(){s()}}).pipe(function aZ(t,e=VT){return U((n,r)=>{let i=null,s=null,o=null;const a=()=>{if(i){i.unsubscribe(),i=null;const d=s;s=null,r.next(d)}};function u(){const d=o+t,f=e.now();if(f<d)return i=this.schedule(void 0,d-f),void r.add(i);a()}n.subscribe(de(r,d=>{s=d,o=e.now(),i||(i=e.schedule(u,t),r.add(i))},()=>{a(),r.complete()},void 0,()=>{s=i=null}))})}(0))}(t);return{task:t,then:t.then.bind(t),catch:t.catch.bind(t),pause:t.pause.bind(t),cancel:t.cancel.bind(t),resume:t.resume.bind(t),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(ve(n=>n.bytesTransferred/n.totalBytes*100))}}function xv(t){return{getDownloadURL:()=>$(void 0).pipe(OM,ut(()=>t.getDownloadURL()),Hr),getMetadata:()=>$(void 0).pipe(OM,ut(()=>t.getMetadata()),Hr),delete:()=>A(t.delete()),child:e=>xv(t.child(e)),updateMetadata:e=>A(t.updateMetadata(e)),put:(e,n)=>MV(t.put(e,n)),putString:(e,n,r)=>MV(t.putString(e,n,r)),list:e=>A(t.list(e)),listAll:()=>A(t.listAll())}}!function $K(t){const e={TaskState:Kr,TaskEvent:aK,StringFormat:_i,Storage:xV,Reference:ko};t.INTERNAL.registerComponent(new ty.wA("storage-compat",jK,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage-compat","0.3.3")}(ji.Z);const qK=new ce("angularfire2.storageBucket"),zK=new ce("angularfire2.storage.maxUploadRetryTime"),GK=new ce("angularfire2.storage.maxOperationRetryTime"),WK=new ce("angularfire2.storage.use-emulator");let ZK=(()=>{class t{storage;constructor(n,r,i,s,o,a,u,d,f,g){const _=Q_(n,o,r);this.storage=jT(`${_.name}.storage.${i}`,"AngularFireStorage",_.name,()=>{const y=o.runOutsideAngular(()=>_.storage(i||void 0)),E=f;return E&&y.useEmulator(...E),u&&y.setMaxUploadRetryTime(u),d&&y.setMaxOperationRetryTime(d),y},[u,d])}ref(n){return xv(this.storage.ref(n))}refFromURL(n){return xv(this.storage.refFromURL(n))}upload(n,r,i){return xv(this.storage.ref(n)).put(r,i)}static \u0275fac=function(r){return new(r||t)(re(kf),re(Lf,8),re(qK,8),re(Ms),re(yt),re(BT),re(zK,8),re(GK,8),re(WK,8),re(UT,8))};static \u0275prov=De({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),KK=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=vr({type:t});static \u0275inj=mr({})}return t})(),QK=(()=>{class t{constructor(){ji.Z.registerVersion("angularfire",Of.full,"gcs-compat")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=vr({type:t});static \u0275inj=mr({providers:[ZK],imports:[KK]})}return t})();const{isArray:JK}=Array,{getPrototypeOf:XK,prototype:eQ,keys:tQ}=Object;const{isArray:iQ}=Array;function lA(...t){const e=ps(t),n=function Wa(t){return I(fs(t))?t.pop():void 0}(t),{args:r,keys:i}=function nQ(t){if(1===t.length){const e=t[0];if(JK(e))return{args:e,keys:null};if(function rQ(t){return t&&"object"==typeof t&&XK(t)===eQ}(e)){const n=tQ(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}(t);if(0===r.length)return A([],e);const s=new st(function uQ(t,e,n=fn){return r=>{OV(e,()=>{const{length:i}=t,s=new Array(i);let o=i,a=i;for(let u=0;u<i;u++)OV(e,()=>{const d=A(t[u],e);let f=!1;d.subscribe(de(r,g=>{s[u]=g,f||(f=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>function aQ(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}(i,o):fn));return n?s.pipe(function oQ(t){return ve(e=>function sQ(t,e){return iQ(e)?t(...e):t(e)}(t,e))}(n)):s}function OV(t,e,n){t?zn(n,t,e):e()}function kV(t){return new st(e=>{En(t()).subscribe(e)})}function Xp(t,e){const n=I(t)?t:()=>t,r=i=>i.error(n());return new st(e?i=>e.schedule(r,0,i):r)}function dA(){return U((t,e)=>{let n=null;t._refCount++;const r=de(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}class LV extends st{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Y(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new dt;const n=this.getSubject();e.add(this.source.subscribe(de(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=dt.EMPTY)}return e}refCount(){return dA()(this)}}function eg(t,e){return I(e)?kt(t,e,1):kt(t,1)}function fc(t){return U((e,n)=>{let s,r=null,i=!1;r=e.subscribe(de(n,void 0,void 0,o=>{s=En(t(o,fc(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function hA(t){return t<=0?()=>wn:U((e,n)=>{let r=[];e.subscribe(de(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function fA(t){return U((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}const Ge="primary",tg=Symbol("RouteTitle");class hQ{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function kd(t){return new hQ(t)}function fQ(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Js(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!FV(t[i],e[i]))return!1;return!0}function FV(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}return t===e}function VV(t){return t.length>0?t[t.length-1]:null}function ja(t){return function YK(t){return!!t&&(t instanceof st||I(t.lift)&&I(t.subscribe))}(t)?t:__(t)?A(Promise.resolve(t)):$(t)}const gQ={exact:function jV(t,e,n){if(!pc(t.segments,e.segments)||!Nv(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!jV(t.children[r],e.children[r],n))return!1;return!0},subset:$V},UV={exact:function mQ(t,e){return Js(t,e)},subset:function _Q(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>FV(t[n],e[n]))},ignored:()=>!0};function BV(t,e,n){return gQ[n.paths](t.root,e.root,n.matrixParams)&&UV[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function $V(t,e,n){return HV(t,e,e.segments,n)}function HV(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!(!pc(i,n)||e.hasChildren()||!Nv(i,n,r))}if(t.segments.length===n.length){if(!pc(t.segments,n)||!Nv(t.segments,n,r))return!1;for(const i in e.children)if(!t.children[i]||!$V(t.children[i],e.children[i],r))return!1;return!0}{const i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!!(pc(t.segments,i)&&Nv(t.segments,i,r)&&t.children[Ge])&&HV(t.children[Ge],e,s,r)}}function Nv(t,e,n){return e.every((r,i)=>UV[n](t[i].parameters,r.parameters))}class Ld{constructor(e=new Ct([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=kd(this.queryParams)),this._queryParamMap}toString(){return IQ.serialize(this)}}class Ct{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Mv(this)}}class ng{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=kd(this.parameters)),this._parameterMap}toString(){return GV(this)}}function pc(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}let rg=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=De({token:t,factory:function(){return new pA},providedIn:"root"})}return t})();class pA{parse(e){const n=new xQ(e);return new Ld(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${ig(e.root,!0)}`,r=function TQ(t){const e=Object.keys(t).map(n=>{const r=t[n];return Array.isArray(r)?r.map(i=>`${Ov(n)}=${Ov(i)}`).join("&"):`${Ov(n)}=${Ov(r)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}(e.queryParams),i="string"==typeof e.fragment?`#${function EQ(t){return encodeURI(t)}(e.fragment)}`:"";return`${n}${r}${i}`}}const IQ=new pA;function Mv(t){return t.segments.map(e=>GV(e)).join("/")}function ig(t,e){if(!t.hasChildren())return Mv(t);if(e){const n=t.children[Ge]?ig(t.children[Ge],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==Ge&&r.push(`${i}:${ig(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function vQ(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===Ge&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==Ge&&(n=n.concat(e(i,r)))}),n}(t,(r,i)=>i===Ge?[ig(t.children[Ge],!1)]:[`${i}:${ig(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[Ge]?`${Mv(t)}/${n[0]}`:`${Mv(t)}/(${n.join("//")})`}}function qV(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ov(t){return qV(t).replace(/%3B/gi,";")}function gA(t){return qV(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function kv(t){return decodeURIComponent(t)}function zV(t){return kv(t.replace(/\+/g,"%20"))}function GV(t){return`${gA(t.path)}${function wQ(t){return Object.keys(t).map(e=>`;${gA(e)}=${gA(t[e])}`).join("")}(t.parameters)}`}const DQ=/^[^\/()?;#]+/;function mA(t){const e=t.match(DQ);return e?e[0]:""}const CQ=/^[^\/()?;=#]+/,bQ=/^[^=?&#]+/,RQ=/^[^&#]+/;class xQ{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ct([],{}):new Ct([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[Ge]=new Ct(e,n)),r}parseSegment(){const e=mA(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new W(4009,!1);return this.capture(e),new ng(kv(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=function AQ(t){const e=t.match(CQ);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=mA(this.remaining);i&&(r=i,this.capture(r))}e[kv(n)]=kv(r)}parseQueryParam(e){const n=function SQ(t){const e=t.match(bQ);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const o=function PQ(t){const e=t.match(RQ);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=zV(n),s=zV(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=mA(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new W(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Ge);const o=this.parseChildren();n[s]=1===Object.keys(o).length?o[Ge]:new Ct([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new W(4011,!1)}}function WV(t){return t.segments.length>0?new Ct([],{[Ge]:t}):t}function ZV(t){const e={};for(const r of Object.keys(t.children)){const s=ZV(t.children[r]);if(r===Ge&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function NQ(t){if(1===t.numberOfChildren&&t.children[Ge]){const e=t.children[Ge];return new Ct(t.segments.concat(e.segments),e.children)}return t}(new Ct(t.segments,e))}function gc(t){return t instanceof Ld}function KV(t){let e;const i=WV(function n(s){const o={};for(const u of s.children){const d=n(u);o[u.outlet]=d}const a=new Ct(s.url,o);return s===t&&(e=a),a}(t.root));return e??i}function QV(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(0===e.length)return _A(i,i,i,n,r);const s=function OQ(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new JV(!0,0,t);let e=0,n=!1;const r=t.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([u,d])=>{a[u]="string"==typeof d?d.split("/"):d}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?n=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new JV(n,e,r)}(e);if(s.toRoot())return _A(i,i,new Ct([],{}),n,r);const o=function kQ(t,e,n){if(t.isAbsolute)return new Fv(e,!0,0);if(!n)return new Fv(e,!1,NaN);if(null===n.parent)return new Fv(n,!0,0);const r=Lv(t.commands[0])?0:1;return function LQ(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new W(4005,!1);i=r.segments.length}return new Fv(r,!1,i-s)}(n,n.segments.length-1+r,t.numberOfDoubleDots)}(s,i,t),a=o.processChildren?og(o.segmentGroup,o.index,s.commands):XV(o.segmentGroup,o.index,s.commands);return _A(i,o.segmentGroup,a,n,r)}function Lv(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function sg(t){return"object"==typeof t&&null!=t&&t.outlets}function _A(t,e,n,r,i){let o,s={};r&&Object.entries(r).forEach(([u,d])=>{s[u]=Array.isArray(d)?d.map(f=>`${f}`):`${d}`}),o=t===e?n:YV(t,e,n);const a=WV(ZV(o));return new Ld(a,s,i)}function YV(t,e,n){const r={};return Object.entries(t.children).forEach(([i,s])=>{r[i]=s===e?n:YV(s,e,n)}),new Ct(t.segments,r)}class JV{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Lv(r[0]))throw new W(4003,!1);const i=r.find(sg);if(i&&i!==VV(r))throw new W(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Fv{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function XV(t,e,n){if(t||(t=new Ct([],{})),0===t.segments.length&&t.hasChildren())return og(t,e,n);const r=function VQ(t,e,n){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;const o=t.segments[i],a=n[r];if(sg(a))break;const u=`${a}`,d=r<n.length-1?n[r+1]:null;if(i>0&&void 0===u)break;if(u&&d&&"object"==typeof d&&void 0===d.outlets){if(!t2(u,d,o))return s;r+=2}else{if(!t2(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const s=new Ct(t.segments.slice(0,r.pathIndex),{});return s.children[Ge]=new Ct(t.segments.slice(r.pathIndex),t.children),og(s,0,i)}return r.match&&0===i.length?new Ct(t.segments,{}):r.match&&!t.hasChildren()?yA(t,e,n):r.match?og(t,0,i):yA(t,e,n)}function og(t,e,n){if(0===n.length)return new Ct(t.segments,{});{const r=function FQ(t){return sg(t[0])?t[0].outlets:{[Ge]:t}}(n),i={};if(Object.keys(r).some(s=>s!==Ge)&&t.children[Ge]&&1===t.numberOfChildren&&0===t.children[Ge].segments.length){const s=og(t.children[Ge],e,n);return new Ct(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=XV(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new Ct(t.segments,i)}}function yA(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const s=n[i];if(sg(s)){const u=UQ(s.outlets);return new Ct(r,u)}if(0===i&&Lv(n[0])){r.push(new ng(t.segments[e].path,e2(n[0]))),i++;continue}const o=sg(s)?s.outlets[Ge]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&Lv(a)?(r.push(new ng(o,e2(a))),i+=2):(r.push(new ng(o,{})),i++)}return new Ct(r,{})}function UQ(t){const e={};return Object.entries(t).forEach(([n,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[n]=yA(new Ct([],{}),0,r))}),e}function e2(t){const e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function t2(t,e,n){return t==n.path&&Js(e,n.parameters)}const ag="imperative";class Xs{constructor(e,n){this.id=e,this.url=n}}class Vv extends Xs{constructor(e,n,r="imperative",i=null){super(e,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class $a extends Xs{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ug extends Xs{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Fd extends Xs{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=16}}class Uv extends Xs{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class n2 extends Xs{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class BQ extends Xs{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jQ extends Xs{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class $Q extends Xs{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class HQ extends Xs{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qQ{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class zQ{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class GQ{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class WQ{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ZQ{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class KQ{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class r2{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class vA{}class IA{constructor(e){this.url=e}}class QQ{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new cg,this.attachRef=null}}let cg=(()=>{class t{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){const i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new QQ,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=De({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class i2{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=EA(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=EA(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=wA(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return wA(e,this._root).map(n=>n.value)}}function EA(t,e){if(t===e.value)return e;for(const n of e.children){const r=EA(t,n);if(r)return r}return null}function wA(t,e){if(t===e.value)return[e];for(const n of e.children){const r=wA(t,n);if(r.length)return r.unshift(e),r}return[]}class Lo{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function Vd(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class s2 extends i2{constructor(e,n){super(e),this.snapshot=n,TA(this,e)}toString(){return this.snapshot.toString()}}function o2(t,e){const n=function YQ(t,e){const o=new Bv([],{},{},"",{},Ge,e,null,{});return new u2("",new Lo(o,[]))}(0,e),r=new x([new ng("",{})]),i=new x({}),s=new x({}),o=new x({}),a=new x(""),u=new Ha(r,i,o,a,s,Ge,e,n.root);return u.snapshot=n.root,new s2(new Lo(u,[]),n)}class Ha{constructor(e,n,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ve(d=>d[tg]))??$(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(ve(e=>kd(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(ve(e=>kd(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function a2(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const i=n[r],s=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function JQ(t){return t.reduce((e,n)=>({params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Bv{get title(){return this.data?.[tg]}constructor(e,n,r,i,s,o,a,u,d){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=kd(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=kd(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class u2 extends i2{constructor(e,n){super(n),this.url=e,TA(this,n)}toString(){return c2(this._root)}}function TA(t,e){e.value._routerState=t,e.children.forEach(n=>TA(t,n))}function c2(t){const e=t.children.length>0?` { ${t.children.map(c2).join(", ")} } `:"";return`${t.value}${e}`}function DA(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Js(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Js(e.params,n.params)||t.paramsSubject.next(n.params),function pQ(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Js(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.urlSubject.next(n.url),Js(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function CA(t,e){const n=Js(t.params,e.params)&&function yQ(t,e){return pc(t,e)&&t.every((n,r)=>Js(n.parameters,e[r].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||CA(t.parent,e.parent))}let AA=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ge,this.activateEvents=new Ur,this.deactivateEvents=new Ur,this.attachEvents=new Ur,this.detachEvents=new Ur,this.parentContexts=he(cg),this.location=he(rs),this.changeDetector=he(eT),this.environmentInjector=he(ki),this.inputBinder=he(jv,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){const{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new W(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new W(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new W(4012,!1);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new W(4013,!1);this._activatedRoute=n;const i=this.location,o=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new XQ(n,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=On({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[As]})}return t})();class XQ{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Ha?this.route:e===cg?this.childContexts:this.parent.get(e,n)}}const jv=new ce("");let l2=(()=>{class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){const{activatedRoute:r}=n,i=lA([r.queryParams,r.params,r.data]).pipe(ut(([s,o,a],u)=>(a={...s,...o,...a},0===u?$(a):Promise.resolve(a)))).subscribe(s=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(n);const o=function Pz(t){const e=et(t);if(!e)return null;const n=new hf(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)n.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(n)});this.outletDataSubscriptions.set(n,i)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=De({token:t,factory:t.\u0275fac})}return t})();function lg(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function tY(t,e,n){return e.children.map(r=>{for(const i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return lg(t,r,i);return lg(t,r)})}(t,e,n);return new Lo(r,i)}{if(t.shouldAttach(e.value)){const s=t.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>lg(t,a)),o}}const r=function nY(t){return new Ha(new x(t.url),new x(t.params),new x(t.queryParams),new x(t.fragment),new x(t.data),t.outlet,t.component,t)}(e.value),i=e.children.map(s=>lg(t,s));return new Lo(r,i)}}const bA="ngNavigationCancelingError";function d2(t,e){const{redirectTo:n,navigationBehaviorOptions:r}=gc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=h2(!1,0,e);return i.url=n,i.navigationBehaviorOptions=r,i}function h2(t,e,n){const r=new Error("NavigationCancelingError: "+(t||""));return r[bA]=!0,r.cancellationCode=e,n&&(r.url=n),r}function f2(t){return t&&t[bA]}let p2=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Zn({type:t,selectors:[["ng-component"]],standalone:!0,features:[px],decls:1,vars:0,template:function(r,i){1&r&&Tr(0,"router-outlet")},dependencies:[AA],encapsulation:2})}return t})();function SA(t){const e=t.children&&t.children.map(SA),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Ge&&(n.component=p2),n}function ds(t){return t.outlet||Ge}function dg(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class lY{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),DA(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const i=Vd(n);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Vd(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Vd(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){const i=Vd(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new KQ(s.value.snapshot))}),e.children.length&&this.forwardEvent(new WQ(e.value.snapshot))}activateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(DA(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),DA(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=dg(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class g2{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class $v{constructor(e,n){this.component=e,this.route=n}}function dY(t,e,n){const r=t._root;return hg(r,e?e._root:null,n,[r.value])}function Ud(t,e){const n=Symbol(),r=e.get(t,n);return r===n?"function"!=typeof t||function eI(t){return null!==Qa(t)}(t)?e.get(t):t:r}function hg(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Vd(e);return t.children.forEach(o=>{(function fY(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function pY(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!pc(t.url,e.url);case"pathParamsOrQueryParamsChange":return!pc(t.url,e.url)||!Js(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!CA(t,e)||!Js(t.queryParams,e.queryParams);default:return!CA(t,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new g2(r)):(s.data=o.data,s._resolvedData=o._resolvedData),hg(t,e,s.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new $v(a.outlet.component,o))}else o&&fg(e,a,i),i.canActivateChecks.push(new g2(r)),hg(t,null,s.component?a?a.children:null:n,r,i)})(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>fg(a,n.getContext(o),i)),i}function fg(t,e,n){const r=Vd(t),i=t.value;Object.entries(r).forEach(([s,o])=>{fg(o,i.component?e?e.children.getContext(s):null:e,n)}),n.canDeactivateChecks.push(new $v(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function pg(t){return"function"==typeof t}function m2(t){return t instanceof Y_||"EmptyError"===t?.name}const Hv=Symbol("INITIAL_VALUE");function Bd(){return ut(t=>lA(t.map(e=>e.pipe(jl(1),X_(Hv)))).pipe(ve(e=>{for(const n of e)if(!0!==n){if(n===Hv)return Hv;if(!1===n||n instanceof Ld)return n}return!0}),os(e=>e!==Hv),jl(1)))}function _2(t){return function yi(...t){return vi(t)}(sr(e=>{if(gc(e))throw d2(0,e)}),ve(e=>!0===e))}class qv{constructor(e){this.segmentGroup=e||null}}class y2{constructor(e){this.urlTree=e}}function jd(t){return Xp(new qv(t))}function v2(t){return Xp(new y2(t))}class OY{constructor(e,n){this.urlSerializer=e,this.urlTree=n}noMatchError(e){return new W(4002,!1)}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return $(r);if(i.numberOfChildren>1||!i.children[Ge])return Xp(new W(4e3,!1));i=i.children[Ge]}}applyRedirectCommands(e,n,r){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r)}applyRedirectCreateUrlTree(e,n,r,i){const s=this.createSegmentGroup(e,n.root,r,i);return new Ld(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){const s=this.createSegments(e,n.segments,r,i);let o={};return Object.entries(n.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new Ct(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){const i=r[n.path.substring(1)];if(!i)throw new W(4001,!1);return i}findOrReturn(e,n){let r=0;for(const i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}}const RA={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function kY(t,e,n,r,i){const s=PA(t,e,n);return s.matched?(r=function iY(t,e){return t.providers&&!t._injector&&(t._injector=Sw(t.providers,e,`Route: ${t.path}`)),t._injector??e}(e,r),function xY(t,e,n,r){const i=e.canMatch;return i&&0!==i.length?$(i.map(o=>{const a=Ud(o,t);return ja(function IY(t){return t&&pg(t.canMatch)}(a)?a.canMatch(e,n):t.runInContext(()=>a(e,n)))})).pipe(Bd(),_2()):$(!0)}(r,e,n).pipe(ve(o=>!0===o?s:{...RA}))):$(s)}function PA(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{...RA}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(e.matcher||fQ)(n,t,e);if(!i)return{...RA};const s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function I2(t,e,n,r){return n.length>0&&function VY(t,e,n){return n.some(r=>zv(t,e,r)&&ds(r)!==Ge)}(t,n,r)?{segmentGroup:new Ct(e,FY(r,new Ct(n,t.children))),slicedSegments:[]}:0===n.length&&function UY(t,e,n){return n.some(r=>zv(t,e,r))}(t,n,r)?{segmentGroup:new Ct(t.segments,LY(t,0,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Ct(t.segments,t.children),slicedSegments:n}}function LY(t,e,n,r,i){const s={};for(const o of r)if(zv(t,n,o)&&!i[ds(o)]){const a=new Ct([],{});s[ds(o)]=a}return{...i,...s}}function FY(t,e){const n={};n[Ge]=e;for(const r of t)if(""===r.path&&ds(r)!==Ge){const i=new Ct([],{});n[ds(r)]=i}return n}function zv(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}class HY{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new OY(this.urlSerializer,this.urlTree)}noMatchError(e){return new W(4002,!1)}recognize(){const e=I2(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Ge).pipe(fc(n=>{if(n instanceof y2)return this.allowRedirects=!1,this.urlTree=n.urlTree,this.match(n.urlTree);throw n instanceof qv?this.noMatchError(n):n}),ve(n=>{const r=new Bv([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ge,this.rootComponentType,null,{}),i=new Lo(r,n),s=new u2("",i),o=function MQ(t,e,n=null,r=null){return QV(KV(t),e,n,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,Ge).pipe(fc(r=>{throw r instanceof qv?this.noMatchError(r):r}))}inheritParamsAndData(e){const n=e.value,r=a2(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0)}processChildren(e,n,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return A(i).pipe(eg(s=>{const o=r.children[s],a=function uY(t,e){const n=t.filter(r=>ds(r)===e);return n.push(...t.filter(r=>ds(r)!==e)),n}(n,s);return this.processSegmentGroup(e,a,o,s)}),ey((s,o)=>(s.push(...o),s)),J_(null),function cQ(t,e){const n=arguments.length>=2;return r=>r.pipe(t?os((i,s)=>t(i,s,r)):fn,hA(1),n?J_(e):VM(()=>new Y_))}(),kt(s=>{if(null===s)return jd(r);const o=E2(s);return function qY(t){t.sort((e,n)=>e.value.outlet===Ge?-1:n.value.outlet===Ge?1:e.value.outlet.localeCompare(n.value.outlet))}(o),$(o)}))}processSegment(e,n,r,i,s,o){return A(n).pipe(eg(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(fc(u=>{if(u instanceof qv)return $(null);throw u}))),ya(a=>!!a),fc(a=>{if(m2(a))return function jY(t,e,n){return 0===e.length&&!t.children[n]}(r,i,s)?$([]):jd(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return function BY(t,e,n,r){return!!(ds(t)===r||r!==Ge&&zv(e,n,t))&&("**"===t.path||PA(e,t,n).matched)}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):jd(i):jd(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?v2(s):this.applyRedirects.lineralizeSegments(r,s).pipe(kt(o=>{const a=new Ct(o,{});return this.processSegment(e,n,a,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){const{matched:a,consumedSegments:u,remainingSegments:d,positionalParamSegments:f}=PA(n,i,s);if(!a)return jd(n);const g=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,f);return i.redirectTo.startsWith("/")?v2(g):this.applyRedirects.lineralizeSegments(i,g).pipe(kt(_=>this.processSegment(e,r,n,_.concat(d),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s,o){let a;if("**"===r.path){const u=i.length>0?VV(i).parameters:{};a=$({snapshot:new Bv(i,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,w2(r),ds(r),r.component??r._loadedComponent??null,r,T2(r)),consumedSegments:[],remainingSegments:[]}),n.children={}}else a=kY(n,r,i,e).pipe(ve(({matched:u,consumedSegments:d,remainingSegments:f,parameters:g})=>u?{snapshot:new Bv(d,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,w2(r),ds(r),r.component??r._loadedComponent??null,r,T2(r)),consumedSegments:d,remainingSegments:f}:null));return a.pipe(ut(u=>null===u?jd(n):this.getChildConfig(e=r._injector??e,r,i).pipe(ut(({routes:d})=>{const f=r._loadedInjector??e,{snapshot:g,consumedSegments:_,remainingSegments:y}=u,{segmentGroup:E,slicedSegments:D}=I2(n,_,y,d);if(0===D.length&&E.hasChildren())return this.processChildren(f,d,E).pipe(ve(M=>null===M?null:[new Lo(g,M)]));if(0===d.length&&0===D.length)return $([new Lo(g,[])]);const b=ds(r)===s;return this.processSegment(f,d,E,D,b?Ge:s,!0).pipe(ve(M=>[new Lo(g,M)]))}))))}getChildConfig(e,n,r){return n.children?$({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?$({routes:n._loadedRoutes,injector:n._loadedInjector}):function PY(t,e,n,r){const i=e.canLoad;return void 0===i||0===i.length?$(!0):$(i.map(o=>{const a=Ud(o,t);return ja(function mY(t){return t&&pg(t.canLoad)}(a)?a.canLoad(e,n):t.runInContext(()=>a(e,n)))})).pipe(Bd(),_2())}(e,n,r).pipe(kt(i=>i?this.configLoader.loadChildren(e,n).pipe(sr(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):function MY(t){return Xp(h2(!1,3))}())):$({routes:[],injector:e})}}function zY(t){const e=t.value.routeConfig;return e&&""===e.path}function E2(t){const e=[],n=new Set;for(const r of t){if(!zY(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):e.push(r)}for(const r of n){const i=E2(r.children);e.push(new Lo(r.value,i))}return e.filter(r=>!n.has(r))}function w2(t){return t.data||{}}function T2(t){return t.resolve||{}}function D2(t){return"string"==typeof t.title||null===t.title}function xA(t){return ut(e=>{const n=t(e);return n?A(n).pipe(ve(()=>e)):$(e)})}const $d=new ce("ROUTES");let NA=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=he(cN)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return $(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=ja(n.loadComponent()).pipe(ve(C2),sr(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),fA(()=>{this.componentLoaders.delete(n)})),i=new LV(r,()=>new j).pipe(dA());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return $({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function JY(t,e,n,r){return ja(t.loadChildren()).pipe(ve(C2),kt(i=>i instanceof hx||Array.isArray(i)?$(i):A(e.compileModuleAsync(i))),ve(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(n).injector,o=s.get($d,[],{optional:!0,self:!0}).flat()),{routes:o.map(SA),injector:s}}))}(r,this.compiler,n,this.onLoadEndListener).pipe(fA(()=>{this.childrenLoaders.delete(r)})),o=new LV(s,()=>new j).pipe(dA());return this.childrenLoaders.set(r,o),o}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=De({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function C2(t){return function XY(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let Gv=(()=>{class t{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new j,this.transitionAbortSubject=new j,this.configLoader=he(NA),this.environmentInjector=he(ki),this.urlSerializer=he(rg),this.rootContexts=he(cg),this.inputBindingEnabled=null!==he(jv,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>$(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new zQ(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new qQ(i))}complete(){this.transitions?.complete()}handleNavigationRequest(n){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...n,id:r})}setupNavigations(n,r,i){return this.transitions=new x({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:n.urlHandlingStrategy.extract(r),urlAfterRedirects:n.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ag,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(os(s=>0!==s.id),ve(s=>({...s,extractedUrl:n.urlHandlingStrategy.extract(s.rawUrl)})),ut(s=>{this.currentTransition=s;let o=!1,a=!1;return $(s).pipe(sr(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),ut(u=>{const d=u.currentBrowserUrl.toString(),f=!n.navigated||u.extractedUrl.toString()!==d||d!==u.currentUrlTree.toString();if(!f&&"reload"!==(u.extras.onSameUrlNavigation??n.onSameUrlNavigation)){const _="";return this.events.next(new Fd(u.id,this.urlSerializer.serialize(u.rawUrl),_,0)),u.resolve(null),wn}if(n.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return $(u).pipe(ut(_=>{const y=this.transitions?.getValue();return this.events.next(new Vv(_.id,this.urlSerializer.serialize(_.extractedUrl),_.source,_.restoredState)),y!==this.transitions?.getValue()?wn:Promise.resolve(_)}),function GY(t,e,n,r,i,s){return kt(o=>function $Y(t,e,n,r,i,s,o="emptyOnly"){return new HY(t,e,n,r,i,o,s).recognize()}(t,e,n,r,o.extractedUrl,i,s).pipe(ve(({state:a,tree:u})=>({...o,targetSnapshot:a,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,n.paramsInheritanceStrategy),sr(_=>{s.targetSnapshot=_.targetSnapshot,s.urlAfterRedirects=_.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:_.urlAfterRedirects};const y=new n2(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects),_.targetSnapshot);this.events.next(y)}));if(f&&n.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){const{id:_,extractedUrl:y,source:E,restoredState:D,extras:b}=u,M=new Vv(_,this.urlSerializer.serialize(y),E,D);this.events.next(M);const R=o2(0,this.rootComponentType).snapshot;return this.currentTransition=s={...u,targetSnapshot:R,urlAfterRedirects:y,extras:{...b,skipLocationChange:!1,replaceUrl:!1}},$(s)}{const _="";return this.events.next(new Fd(u.id,this.urlSerializer.serialize(u.extractedUrl),_,1)),u.resolve(null),wn}}),sr(u=>{const d=new BQ(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),ve(u=>(this.currentTransition=s={...u,guards:dY(u.targetSnapshot,u.currentSnapshot,this.rootContexts)},s)),function wY(t,e){return kt(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?$({...n,guardsResult:!0}):function TY(t,e,n,r){return A(t).pipe(kt(i=>function RY(t,e,n,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?$(s.map(a=>{const u=dg(e)??i,d=Ud(a,u);return ja(function vY(t){return t&&pg(t.canDeactivate)}(d)?d.canDeactivate(t,e,n,r):u.runInContext(()=>d(t,e,n,r))).pipe(ya())})).pipe(Bd()):$(!0)}(i.component,i.route,n,e,r)),ya(i=>!0!==i,!0))}(o,r,i,t).pipe(kt(a=>a&&function gY(t){return"boolean"==typeof t}(a)?function DY(t,e,n,r){return A(e).pipe(eg(i=>HT(function AY(t,e){return null!==t&&e&&e(new GQ(t)),$(!0)}(i.route.parent,r),function CY(t,e){return null!==t&&e&&e(new ZQ(t)),$(!0)}(i.route,r),function SY(t,e,n){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function hY(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(o)).filter(o=>null!==o).map(o=>kV(()=>$(o.guards.map(u=>{const d=dg(o.node)??n,f=Ud(u,d);return ja(function yY(t){return t&&pg(t.canActivateChild)}(f)?f.canActivateChild(r,t):d.runInContext(()=>f(r,t))).pipe(ya())})).pipe(Bd())));return $(s).pipe(Bd())}(t,i.path,n),function bY(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return $(!0);const i=r.map(s=>kV(()=>{const o=dg(e)??n,a=Ud(s,o);return ja(function _Y(t){return t&&pg(t.canActivate)}(a)?a.canActivate(e,t):o.runInContext(()=>a(e,t))).pipe(ya())}));return $(i).pipe(Bd())}(t,i.route,n))),ya(i=>!0!==i,!0))}(r,s,t,e):$(a)),ve(a=>({...n,guardsResult:a})))})}(this.environmentInjector,u=>this.events.next(u)),sr(u=>{if(s.guardsResult=u.guardsResult,gc(u.guardsResult))throw d2(0,u.guardsResult);const d=new jQ(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(d)}),os(u=>!!u.guardsResult||(this.cancelNavigationTransition(u,"",3),!1)),xA(u=>{if(u.guards.canActivateChecks.length)return $(u).pipe(sr(d=>{const f=new $Q(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}),ut(d=>{let f=!1;return $(d).pipe(function WY(t,e){return kt(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return $(n);let s=0;return A(i).pipe(eg(o=>function ZY(t,e,n,r){const i=t.routeConfig,s=t._resolve;return void 0!==i?.title&&!D2(i)&&(s[tg]=i.title),function KY(t,e,n,r){const i=function QY(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}(t);if(0===i.length)return $({});const s={};return A(i).pipe(kt(o=>function YY(t,e,n,r){const i=dg(e)??r,s=Ud(t,i);return ja(s.resolve?s.resolve(e,n):i.runInContext(()=>s(e,n)))}(t[o],e,n,r).pipe(ya(),sr(a=>{s[o]=a}))),hA(1),function lQ(t){return ve(()=>t)}(s),fc(o=>m2(o)?wn:Xp(o)))}(s,t,e,r).pipe(ve(o=>(t._resolvedData=o,t.data=a2(t,n).resolve,i&&D2(i)&&(t.data[tg]=i.title),null)))}(o.route,r,t,e)),sr(()=>s++),hA(1),kt(o=>s===i.length?$(n):wn))})}(n.paramsInheritanceStrategy,this.environmentInjector),sr({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(d,"",2)}}))}),sr(d=>{const f=new HQ(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}))}),xA(u=>{const d=f=>{const g=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(f.routeConfig).pipe(sr(_=>{f.component=_}),ve(()=>{})));for(const _ of f.children)g.push(...d(_));return g};return lA(d(u.targetSnapshot.root)).pipe(J_(),jl(1))}),xA(()=>this.afterPreactivation()),ve(u=>{const d=function eY(t,e,n){const r=lg(t,e._root,n?n._root:void 0);return new s2(r,e)}(n.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s={...u,targetRouterState:d},s}),sr(()=>{this.events.next(new vA)}),((t,e,n,r)=>ve(i=>(new lY(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)))(this.rootContexts,n.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),jl(1),sr({next:u=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new $a(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),n.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{o=!0}}),function dQ(t){return U((e,n)=>{En(t).subscribe(de(n,()=>n.complete(),Ie)),!n.closed&&e.subscribe(n)})}(this.transitionAbortSubject.pipe(sr(u=>{throw u}))),fA(()=>{o||a||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),fc(u=>{if(a=!0,f2(u))this.events.next(new ug(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),function rY(t){return f2(t)&&gc(t.url)}(u)?this.events.next(new IA(u.url)):s.resolve(!1);else{this.events.next(new Uv(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0));try{s.resolve(n.errorHandler(u))}catch(d){s.reject(d)}}return wn}))}))}cancelNavigationTransition(n,r,i){const s=new ug(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(s),n.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=De({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function A2(t){return t!==ag}let b2=(()=>{class t{buildTitle(n){let r,i=n.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Ge);return r}getResolvedTitleForRoute(n){return n.data[tg]}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=De({token:t,factory:function(){return he(eJ)},providedIn:"root"})}return t})(),eJ=(()=>{class t extends b2{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||t)(re(bM))};static#t=this.\u0275prov=De({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),tJ=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=De({token:t,factory:function(){return he(rJ)},providedIn:"root"})}return t})();class nJ{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}let rJ=(()=>{class t extends nJ{static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=function wm(t){return _r(()=>{const e=t.prototype.constructor,n=e[Di]||ia(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const s=i[Di]||ia(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}(t)))(i||t)}}();static#t=this.\u0275prov=De({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Wv=new ce("",{providedIn:"root",factory:()=>({})});let iJ=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=De({token:t,factory:function(){return he(sJ)},providedIn:"root"})}return t})(),sJ=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=De({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var gg=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(gg||{});function S2(t,e){t.events.pipe(os(n=>n instanceof $a||n instanceof ug||n instanceof Uv||n instanceof Fd),ve(n=>n instanceof $a||n instanceof Fd?gg.COMPLETE:n instanceof ug&&(0===n.code||1===n.code)?gg.REDIRECTING:gg.FAILED),os(n=>n!==gg.REDIRECTING),jl(1)).subscribe(()=>{e()})}function oJ(t){throw t}function aJ(t,e,n){return e.parse("/")}const uJ={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},cJ={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let qi=(()=>{class t{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=he(aN),this.isNgZoneEnabled=!1,this._events=new j,this.options=he(Wv,{optional:!0})||{},this.pendingTasks=he(uN),this.errorHandler=this.options.errorHandler||oJ,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||aJ,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=he(iJ),this.routeReuseStrategy=he(tJ),this.titleStrategy=he(b2),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=he($d,{optional:!0})?.flat()??[],this.navigationTransitions=he(Gv),this.urlSerializer=he(rg),this.location=he(lT),this.componentInputBindingEnabled=!!he(jv,{optional:!0}),this.eventsSubscription=new dt,this.isNgZoneEnabled=he(yt)instanceof yt&&yt.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Ld,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=o2(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(n=>{this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const n=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(R2(r)&&this._events.next(r));if(r instanceof Vv)A2(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof Fd)this.rawUrlTree=i.rawUrl;else if(r instanceof n2){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(s,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof vA)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof ug)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof IA){const s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),o={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||A2(i.source)};this.scheduleNavigation(s,ag,null,o,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof Uv&&this.restoreHistory(i,!0),r instanceof $a&&(this.navigated=!0),R2(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const n=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),ag,n)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r="popstate"===n.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(n.url,r,n.state)},0)}))}navigateToSyncWithBrowser(n,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const u={...i};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(s.state=u)}const a=this.parseUrl(n);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(SA),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,d=u?this.currentUrlTree.fragment:o;let g,f=null;switch(a){case"merge":f={...this.currentUrlTree.queryParams,...s};break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}null!==f&&(f=this.removeEmptyProps(f));try{g=KV(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof n[0]||!n[0].startsWith("/"))&&(n=[]),g=this.currentUrlTree.root}return QV(g,n,f,d??null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=gc(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,ag,null,r)}navigate(n,r={skipLocationChange:!1}){return function lJ(t){for(let e=0;e<t.length;e++)if(null==t[e])throw new W(4008,!1)}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,n)}return r}isActive(n,r){let i;if(i=!0===r?{...uJ}:!1===r?{...cJ}:r,gc(n))return BV(this.currentUrlTree,n,i);const s=this.parseUrl(n);return BV(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.keys(n).reduce((r,i)=>{const s=n[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(n,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,d;o?(a=o.resolve,u=o.reject,d=o.promise):d=new Promise((g,_)=>{a=g,u=_});const f=this.pendingTasks.add();return S2(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:n,extras:s,resolve:a,reject:u,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(g=>Promise.reject(g))}setBrowserUrl(n,r){const i=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=De({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function R2(t){return!(t instanceof vA||t instanceof IA)}let Hd=(()=>{class t{constructor(n,r,i,s,o,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new j,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const u=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===u||"area"===u,this.isAnchorElement?this.subscription=n.events.subscribe(d=>{d instanceof $a&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(n){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(n){null!=n?(this.commands=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(n,r,i,s,o){return!!(null===this.urlTree||this.isAnchorElement&&(0!==n||r||i||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const n=null===this.href?null:function cS(t,e,n){return function qU(t,e){return"src"===e&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===e&&("base"===t||"link"===t)?uS:Wm}(e,n)(t)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",n)}applyAttributeValue(n,r){const i=this.renderer,s=this.el.nativeElement;null!==r?i.setAttribute(s,n,r):i.removeAttribute(s,n)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||t)(Ae(qi),Ae(Ha),function nl(t){return function $I(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const r=n.length;let i=0;for(;i<r;){const s=n[i];if(Rg(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(s===e)return n[i+1];i+=2}}}return null}(gn(),t)}("tabindex"),Ae(i_),Ae(fa),Ae(Uu))};static#t=this.\u0275dir=On({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&pw("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&r&&sw("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",oT],skipLocationChange:["skipLocationChange","skipLocationChange",oT],replaceUrl:["replaceUrl","replaceUrl",oT],routerLink:"routerLink"},standalone:!0,features:[CR,As]})}return t})();class P2{}let fJ=(()=>{class t{constructor(n,r,i,s,o){this.router=n,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(os(n=>n instanceof $a),eg(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=Sw(s.providers,n,`Route: ${s.path}`));const o=s._injector??n,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return A(i).pipe(ui())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(n,r):$(null);const s=i.pipe(kt(o=>null===o?$(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??n,o.routes))));return r.loadComponent&&!r._loadedComponent?A([s,this.loader.loadComponent(r)]).pipe(ui()):s})}static#e=this.\u0275fac=function(r){return new(r||t)(re(qi),re(cN),re(ki),re(P2),re(NA))};static#t=this.\u0275prov=De({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const MA=new ce("");let x2=(()=>{class t{constructor(n,r,i,s,o={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof Vv?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof $a?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof Fd&&0===n.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof r2&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new r2(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){!function YS(){throw new Error("invalid")}()};static#t=this.\u0275prov=De({token:t,factory:t.\u0275fac})}return t})();function Fo(t,e){return{\u0275kind:t,\u0275providers:e}}function M2(){const t=he(Li);return e=>{const n=t.get(Ll);if(e!==n.components[0])return;const r=t.get(qi),i=t.get(O2);1===t.get(OA)&&r.initialNavigation(),t.get(k2,null,Je.Optional)?.setUpPreloading(),t.get(MA,null,Je.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const O2=new ce("",{factory:()=>new j}),OA=new ce("",{providedIn:"root",factory:()=>1}),k2=new ce("");function _J(t){return Fo(0,[{provide:k2,useExisting:fJ},{provide:P2,useExisting:t}])}const L2=new ce("ROUTER_FORROOT_GUARD"),vJ=[lT,{provide:rg,useClass:pA},qi,cg,{provide:Ha,useFactory:function N2(t){return t.routerState.root},deps:[qi]},NA,[]];function IJ(){return new mN("Router",qi)}let F2=(()=>{class t{constructor(n){}static forRoot(n,r){return{ngModule:t,providers:[vJ,[],{provide:$d,multi:!0,useValue:n},{provide:L2,useFactory:DJ,deps:[[qi,new Pu,new ol]]},{provide:Wv,useValue:r||{}},r?.useHash?{provide:Uu,useClass:kz}:{provide:Uu,useClass:WN},{provide:MA,useFactory:()=>{const t=he(e9),e=he(yt),n=he(Wv),r=he(Gv),i=he(rg);return n.scrollOffset&&t.setOffset(n.scrollOffset),new x2(i,r,t,e,n)}},r?.preloadingStrategy?_J(r.preloadingStrategy).\u0275providers:[],{provide:mN,multi:!0,useFactory:IJ},r?.initialNavigation?CJ(r):[],r?.bindToComponentInputs?Fo(8,[l2,{provide:jv,useExisting:l2}]).\u0275providers:[],[{provide:V2,useFactory:M2},{provide:Jw,multi:!0,useExisting:V2}]]}}static forChild(n){return{ngModule:t,providers:[{provide:$d,multi:!0,useValue:n}]}}static#e=this.\u0275fac=function(r){return new(r||t)(re(L2,8))};static#t=this.\u0275mod=vr({type:t});static#n=this.\u0275inj=mr({})}return t})();function DJ(t){return"guarded"}function CJ(t){return["disabled"===t.initialNavigation?Fo(3,[{provide:qw,multi:!0,useFactory:()=>{const e=he(qi);return()=>{e.setUpLocationChangeListener()}}},{provide:OA,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?Fo(2,[{provide:OA,useValue:0},{provide:qw,multi:!0,deps:[Li],useFactory:e=>{const n=e.get(Mz,Promise.resolve());return()=>n.then(()=>new Promise(r=>{const i=e.get(qi),s=e.get(O2);S2(i,()=>{r(!0)}),e.get(Gv).afterPreactivation=()=>(r(!0),s.closed?$(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const V2=new ce("");let kA=(()=>{class t{constructor(n){this.afs=n}loadFeatured(){return this.afs.collection("posts",n=>n.where("isFeatured","==",!0).limit(4)).snapshotChanges().pipe(ve(n=>n.map(r=>{const i=r.payload.doc.data();return{id:r.payload.doc.id,data:i}})))}loadLatest(){return this.afs.collection("posts",n=>n.orderBy("createdAt")).snapshotChanges().pipe(ve(n=>n.map(r=>{const i=r.payload.doc.data();return{id:r.payload.doc.id,data:i}})))}loadCategoryPosts(n){return this.afs.collection("posts",r=>r.where("category.categoryId","==",n).limit(4)).snapshotChanges().pipe(ve(r=>r.map(i=>{const s=i.payload.doc.data();return{id:i.payload.doc.id,data:s}})))}loadOnePost(n){return this.afs.doc(`posts/${n}`).valueChanges()}loadSimilar(n){return this.afs.collection("posts",r=>r.where("category.categoryId","==",n).limit(4)).snapshotChanges().pipe(ve(r=>r.map(i=>{const s=i.payload.doc.data();return{id:i.payload.doc.id,data:s}})))}countViews(n){const r={views:ji.Z.firestore.FieldValue.increment(1)};this.afs.doc(`posts/${n}`).update(r).then(()=>{})}static#e=this.\u0275fac=function(r){return new(r||t)(re(YC))};static#t=this.\u0275prov=De({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function bJ(t,e){1&t&&(Ce(0,"small",10),Xe(1," Featured "),be())}const SJ=function(t){return["/post",t]};function RJ(t,e){if(1&t&&(Ce(0,"div",1),Tr(1,"img",2),Ce(2,"div",3)(3,"small",4),Xe(4),be(),_o(5,bJ,2,0,"small",5),Ce(6,"small",6),Xe(7),be(),Ce(8,"h5",7),Xe(9),be(),Ce(10,"p",8),Xe(11),be(),Ce(12,"small",9),Xe(13),Pw(14,"date"),be()()()),2&t){const n=ZR();ir("routerLink",function Ex(t,e,n,r){return Tx(J(),Vn(),t,e,n,r)}(10,SJ,n.postData.id)),St(1),y_("src",n.postData.data.postImgPath,Wm),St(3),yo(" ",n.postData.data.category.category," "),St(1),ir("ngIf",n.postData.data.isFeatured),St(2),yo(" Views - ",n.postData.data.views," "),St(2),ga(n.postData.data.title),St(2),ga(n.postData.data.excerpt),St(2),yo(" LAST UPDATED - ",xw(14,8,n.postData.data.createdAt.toMillis())," ")}}let LA=(()=>{class t{constructor(){}ngOnInit(){}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Zn({type:t,selectors:[["app-post-card"]],inputs:{postData:"postData"},decls:1,vars:1,consts:[["class","card shadow-effect ","style","height: 750px;",3,"routerLink",4,"ngIf"],[1,"card","shadow-effect",2,"height","750px",3,"routerLink"],["alt","post-image",1,"card-img-top",3,"src"],[1,"card-body"],[1,"bg-light","text-danger","text-center"],["class","bg-light text-success text-center ml-3",4,"ngIf"],[1,"bg-light","text-info","text-center","ml-3"],[1,"mt-1","text-uppercase"],[1,"text-justify"],[1,"bg-light","text-warning","text-center"],[1,"bg-light","text-success","text-center","ml-3"]],template:function(r,i){1&r&&_o(0,RJ,15,12,"div",0),2&r&&ir("ngIf",i.postData)},dependencies:[ET,Hd,DT],styles:[".card[_ngcontent-%COMP%]{max-width:400px}"]})}return t})();function PJ(t,e){if(1&t&&(Ce(0,"div",9),Tr(1,"app-post-card",10),be()),2&t){const n=e.$implicit;St(1),ir("postData",n)}}function xJ(t,e){if(1&t&&(Ce(0,"div",11),Tr(1,"app-post-card",10),be()),2&t){const n=e.$implicit;St(1),ir("postData",n)}}let NJ=(()=>{class t{constructor(n){this.postService=n,this.postService.loadFeatured().subscribe(r=>{this.featuredPostArray=r}),this.postService.loadLatest().subscribe(r=>{this.latestPostArray=r})}ngOnInit(){}static#e=this.\u0275fac=function(r){return new(r||t)(Ae(kA))};static#t=this.\u0275cmp=Zn({type:t,selectors:[["app-home"]],decls:18,vars:2,consts:[[1,"featured-section"],[1,"container-fluid"],[1,"row"],[1,"col-md-12","text-center","mt-5"],[1,"text-white"],["class","col-lg-3 mb-3",4,"ngFor","ngForOf"],[1,"container","mt-5"],[1,"col-md-12","text-center"],["class","col-md-4 mt-3",4,"ngFor","ngForOf"],[1,"col-lg-3","mb-3"],[3,"postData"],[1,"col-md-4","mt-3"]],template:function(r,i){1&r&&(Ce(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),Xe(5,"Featured Posts"),be(),Ce(6,"p",4),Xe(7,"Inlcude my featured section"),be()()(),Ce(8,"div",2),_o(9,PJ,2,1,"div",5),be()()(),Ce(10,"section",6)(11,"div",7)(12,"h2"),Xe(13,"Latest Posts"),be(),Ce(14,"p"),Xe(15,"You can view my latest project blog "),be()(),Ce(16,"div",2),_o(17,xJ,2,1,"div",8),be()()),2&r&&(St(9),ir("ngForOf",i.featuredPostArray),St(8),ir("ngForOf",i.latestPostArray))},dependencies:[Pf,LA],styles:[".featured-section[_ngcontent-%COMP%]{padding-left:130px;padding-right:130px;padding-bottom:130px;background-color:var(--primary-color)}"]})}return t})();function MJ(t,e){if(1&t&&(Ce(0,"div",6),Tr(1,"app-post-card",7),be()),2&t){const n=e.$implicit;St(1),ir("postData",n)}}let OJ=(()=>{class t{constructor(n,r){this.route=n,this.postService=r}ngOnInit(){this.route.params.subscribe(n=>{this.postService.loadCategoryPosts(n.id).subscribe(r=>{this.postsArray=r,this.categoryObj=n})})}static#e=this.\u0275fac=function(r){return new(r||t)(Ae(Ha),Ae(kA))};static#t=this.\u0275cmp=Zn({type:t,selectors:[["app-single-category"]],decls:9,vars:3,consts:[[1,"bg-theme","p-5"],[1,"container"],[1,"text-white"],[1,"container","mt-5","mb-5"],[1,"row"],["class","col-md-4 mb-3",4,"ngFor","ngForOf"],[1,"col-md-4","mb-3"],[3,"postData"]],template:function(r,i){1&r&&(Ce(0,"div",0)(1,"div",1)(2,"h1",2),Xe(3),be(),Ce(4,"p",2),Xe(5),be()()(),Ce(6,"div",3)(7,"div",4),_o(8,MJ,2,1,"div",5),be()()),2&r&&(St(3),ga(i.categoryObj.category),St(2),yo("This section show all ",i.categoryObj.category," related project blog "),St(3),ir("ngForOf",i.postsArray))},dependencies:[Pf,LA]})}return t})();function kJ(t,e){1&t&&(Ce(0,"small",14),Xe(1,"Featured"),be())}function LJ(t,e){if(1&t&&(Ce(0,"div",15),Tr(1,"app-post-card",16),be()),2&t){const n=e.$implicit;St(1),ir("postData",n)}}const FJ=[{path:"",component:NJ},{path:"category/:category/:id",component:OJ},{path:"post/:id",component:(()=>{class t{constructor(n,r){this.route=n,this.postService=r}ngOnInit(){this.route.params.subscribe(n=>{this.postService.countViews(n.id),this.postService.loadOnePost(n.id).subscribe(r=>{this.postData=r,this.loadSimilarPost(this.postData.category.categoryId)})})}loadSimilarPost(n){this.postService.loadSimilar(n).subscribe(r=>{this.similarPostArray=r})}static#e=this.\u0275fac=function(r){return new(r||t)(Ae(Ha),Ae(kA))};static#t=this.\u0275cmp=Zn({type:t,selectors:[["app-single-post"]],decls:19,vars:10,consts:[[1,"container"],[1,"row"],[1,"col-md-9"],[1,"card","shadow-effect"],["alt","",3,"src"],[1,"card-body"],[1,"bg-light","text-danger","text-center"],["class","bg-light text-success text-center ml-2",4,"ngIf"],[1,"bg-light","text-info","text-center","ml-2"],[1,"bg-light","text-warning","text-center","ml-2"],[1,"mt-3","mb-3"],[3,"innerHTML"],[1,"col-md-3","mb-5"],["class","mb-3",4,"ngFor","ngForOf"],[1,"bg-light","text-success","text-center","ml-2"],[1,"mb-3"],[3,"postData"]],template:function(r,i){1&r&&(Ce(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),Tr(4,"img",4),Ce(5,"div",5)(6,"small",6),Xe(7),be(),_o(8,kJ,2,0,"small",7),Ce(9,"small",8),Xe(10),be(),Ce(11,"small",9),Xe(12),Pw(13,"date"),be(),Ce(14,"h1",10),Xe(15),be(),Tr(16,"p",11),be()()(),Ce(17,"div",12),_o(18,LJ,2,1,"div",13),be()()()),2&r&&(St(4),y_("src",i.postData.postImgPath,Wm),St(3),ga(i.postData.category.category),St(1),ir("ngIf",i.postData.isFeatured),St(2),yo("View - ",i.postData.views,""),St(2),yo("LAST UPDATED - ",xw(13,8,i.postData.createdAt.toMillis()),""),St(3),ga(i.postData.title),St(1),ir("innerHTML",i.postData.content,aS),St(2),ir("ngForOf",i.similarPostArray))},dependencies:[Pf,ET,LA,DT]})}return t})()},{path:"about",component:(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Zn({type:t,selectors:[["app-about-us"]],decls:14,vars:0,consts:[[1,"mt-5"],[1,"container","mt-5","mb-5","p-5","bg-theme"],[1,"text-white","text-center"],[1,"p-5","mt-4","bg-secondary-theme","text-theme-primary"],[1,"text-center"],[1,"btn","btn-info","btn-sm","mt-4","btn-theme"]],template:function(r,i){1&r&&(Ce(0,"section",0)(1,"div",1)(2,"h1",2),Xe(3,"About Us"),be(),Ce(4,"div",3)(5,"p"),Xe(6,' Georges Duby (1919-1996) has achieved near iconic status as the most original and influential postwar historian of medieval society. He wrote incisively, with flair and elegance, on issues critical to our understanding of the Middle Ages, notably the formation of feudal society, the nature of the aristocratic family, and the relation of "mental attitudes" to the medieval social order. Inspired by Jules Michelet, to whom he frequently alluded and with whom he shared a number of traits,1 his books reached a large general audience, and a few became instant classics. '),be(),Ce(7,"p"),Xe(8," Yet only after taking the turn to social history in the 1960s, partly under the influence of structural anthropology, did he develop the highly personal view of medieval society now associated with his name. While his probing inquiries into the attitudes and practices of medieval people have proved stimulating to medievalists and general readers alike, they have also elicited criticism for both their methodology and substance. Before considering some of the implications of those inquiries, it would be useful to review briefly his major works. "),be(),Ce(9,"p"),Xe(10," While his probing inquiries into the attitudes and practices of medieval people have proved stimulating to medievalists and general readers alike, they have also elicited criticism for both their methodology and substance. Before considering some of the implications of those inquiries, it would be useful to review briefly his major works. "),be(),Ce(11,"div",4)(12,"button",5),Xe(13,"Back to Home"),be()()()()())}})}return t})()},{path:"term-conditions",component:(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Zn({type:t,selectors:[["app-terms-and-condition"]],decls:14,vars:0,consts:[[1,"mt-5"],[1,"container","mt-5","mb-5","p-5","bg-theme"],[1,"text-white","text-center"],[1,"p-5","mt-4","bg-secondary-theme","text-theme-primary"],[1,"text-center"],[1,"btn","btn-info","btn-sm","mt-4","btn-theme"]],template:function(r,i){1&r&&(Ce(0,"section",0)(1,"div",1)(2,"h1",2),Xe(3,"Terms & Condtions"),be(),Ce(4,"div",3)(5,"p"),Xe(6,' Georges Duby (1919-1996) has achieved near iconic status as the most original and influential postwar historian of medieval society. He wrote incisively, with flair and elegance, on issues critical to our understanding of the Middle Ages, notably the formation of feudal society, the nature of the aristocratic family, and the relation of "mental attitudes" to the medieval social order. Inspired by Jules Michelet, to whom he frequently alluded and with whom he shared a number of traits,1 his books reached a large general audience, and a few became instant classics. '),be(),Ce(7,"p"),Xe(8," Yet only after taking the turn to social history in the 1960s, partly under the influence of structural anthropology, did he develop the highly personal view of medieval society now associated with his name. While his probing inquiries into the attitudes and practices of medieval people have proved stimulating to medievalists and general readers alike, they have also elicited criticism for both their methodology and substance. Before considering some of the implications of those inquiries, it would be useful to review briefly his major works. "),be(),Ce(9,"p"),Xe(10," While his probing inquiries into the attitudes and practices of medieval people have proved stimulating to medievalists and general readers alike, they have also elicited criticism for both their methodology and substance. Before considering some of the implications of those inquiries, it would be useful to review briefly his major works. "),be(),Ce(11,"div",4)(12,"button",5),Xe(13,"Back to Home"),be()()()()())}})}return t})()},{path:"contact",component:(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Zn({type:t,selectors:[["app-contact-us"]],decls:2,vars:0,template:function(r,i){1&r&&(Ce(0,"p"),Xe(1,"contact-us works!"),be())}})}return t})()}];let VJ=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=vr({type:t});static#n=this.\u0275inj=mr({imports:[F2.forRoot(FJ),F2]})}return t})(),UJ=(()=>{class t{constructor(n){this.afs=n}loadData(){return this.afs.collection("categories").snapshotChanges().pipe(ve(n=>n.map(r=>{const i=r.payload.doc.data();return{id:r.payload.doc.id,data:i}})))}static#e=this.\u0275fac=function(r){return new(r||t)(re(YC))};static#t=this.\u0275prov=De({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const BJ=function(t,e){return["/category",t,e]};function jJ(t,e){if(1&t&&(Ce(0,"ul",4)(1,"li",5)(2,"a",6),Xe(3),be()()()),2&t){const n=e.$implicit;St(2),ir("routerLink",wx(2,BJ,n.data.category,n.id)),St(1),ga(n.data.category)}}let $J=(()=>{class t{constructor(n){this.categoryService=n}ngOnInit(){this.categoryService.loadData().subscribe(n=>{this.categoryArray=n})}static#e=this.\u0275fac=function(r){return new(r||t)(Ae(UJ))};static#t=this.\u0275cmp=Zn({type:t,selectors:[["app-category-navbar"]],decls:4,vars:1,consts:[[1,"navbar","navbar-expand-lg","fixed-top"],[1,"container"],[1,"collapse","navbar-collapse","justify-content-center"],["class","navbar-nav",4,"ngFor","ngForOf"],[1,"navbar-nav"],[1,"nav-item","ml-3"],["href","",1,"nav-link",3,"routerLink"]],template:function(r,i){1&r&&(Ce(0,"nav",0)(1,"div",1)(2,"div",2),_o(3,jJ,4,5,"ul",3),be()()()),2&r&&(St(3),ir("ngForOf",i.categoryArray))},dependencies:[Pf,Hd],styles:["nav[_ngcontent-%COMP%]{margin-top:100px;height:50px;background-color:var(--navbar-footer-color)}.nav-link[_ngcontent-%COMP%]{text-transform:uppercase;font-weight:400}"]})}return t})(),HJ=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Zn({type:t,selectors:[["app-footer"]],decls:20,vars:0,consts:[[1,"container"],[1,"row"],[1,"col-md-12","text-center"],[1,"site-logo"],[1,"nav","justify-content-center"],[1,"nav-item"],["href","",1,"nav-link"]],template:function(r,i){1&r&&(Ce(0,"footer")(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3),Xe(5,"PROJECT BLOGGER"),be(),Ce(6,"div")(7,"ul",4)(8,"li",5)(9,"a",6),Xe(10,"Home"),be()(),Ce(11,"li",5)(12,"a",6),Xe(13,"About"),be()(),Ce(14,"li",5)(15,"a",6),Xe(16,"Terms & Conditions"),be()(),Ce(17,"li",5)(18,"a",6),Xe(19,"Contact"),be()()()()()()()())},styles:["footer[_ngcontent-%COMP%]{height:130px;padding:15px;background-color:var(--navbar-footer-color)}.site-logo[_ngcontent-%COMP%]{font-size:1.2em}"]})}return t})(),qJ=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Zn({type:t,selectors:[["app-header"]],decls:4,vars:0,consts:[[1,"navbar","navbar-expand-lg","fixed-top","bg-white"],[1,"container","justify-content-center"],["href","","routerLink","/",1,"site-logo"]],template:function(r,i){1&r&&(Ce(0,"header",0)(1,"div",1)(2,"a",2),Xe(3,"Project Blogger"),be()()())},dependencies:[Hd],styles:["header[_ngcontent-%COMP%]{height:100px;font-weight:500;text-transform:uppercase}.site-logo[_ngcontent-%COMP%]{font-size:1.5em}"]})}return t})(),zJ=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Zn({type:t,selectors:[["app-subscription-form"]],decls:15,vars:0,consts:[[1,"card","shadow-effect"],[1,"card-body"],[1,"text-center","mt-3","mb-5"],[1,"m-auto","subs-text"],["action","",1,"form-inline","mb-5"],[1,"form-group","col-md-5"],["type","text","placeholder","Your Name",1,"form-control","shadow-effect"],["type","email","placeholder","Email Address",1,"form-control","shadow-effect"],[1,"col-md-2"],[1,"btn","btn-info","btn-block","btn-sub","btn-theme"]],template:function(r,i){1&r&&(Ce(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),Xe(4,"SUBSCRIPTION FORM"),be(),Ce(5,"p",3),Xe(6," the dictionary has many examples of how words are used "),be(),Ce(7,"form",4)(8,"div",5),Tr(9,"input",6),be(),Ce(10,"div",5),Tr(11,"input",7),be(),Ce(12,"div",8)(13,"button",9),Xe(14,"SUBSCRIBE"),be()()()()()())},styles:[".card[_ngcontent-%COMP%]{background-color:var(--secondary-color);width:1200px}.subs-text[_ngcontent-%COMP%]{width:500px}input[type=text][_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%]{width:100%}"]})}return t})(),GJ=(()=>{class t{constructor(){this.title="chanuth-app-master"}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Zn({type:t,selectors:[["app-root"]],decls:8,vars:0,consts:[[1,"app-body"],[1,"container","mt-5","mb-5"],[1,"row","justify-content-center"]],template:function(r,i){1&r&&(Tr(0,"app-header")(1,"app-category-navbar"),Ce(2,"div",0),Tr(3,"router-outlet"),be(),Ce(4,"div",1)(5,"div",2),Tr(6,"app-subscription-form"),be()(),Tr(7,"app-footer"))},dependencies:[AA,$J,HJ,qJ,zJ],styles:[".app-body[_ngcontent-%COMP%]{min-height:35vh;margin-top:150px}"]})}return t})();const WJ_firebaseConfig={apiKey:"AIzaSyDzfcemqNIemmX82UgA9nNF3qNHDDUT0Ug",authDomain:"project-blogger-738ad.firebaseapp.com",projectId:"project-blogger-738ad",storageBucket:"project-blogger-738ad.appspot.com",messagingSenderId:"875119155595",appId:"1:875119155595:web:753d6534e43bd7b23f378e"};let ZJ=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=vr({type:t,bootstrap:[GJ]});static#n=this.\u0275inj=mr({imports:[Z9,VJ,I6.initializeApp(WJ_firebaseConfig),oZ,QK,A6]})}return t})();G9().bootstrapModule(ZJ).catch(t=>console.error(t))},106:(zi,Sn,Ve)=>{Ve.d(Sn,{Z:()=>Pn});var I=Ve(58),xe=Ve(537),B=Ve(534),Ne=Ve(879);class dt{constructor(ke,$e){this._delegate=ke,this.firebase=$e,(0,B._addComponent)(ke,new xe.wA("app-compat",()=>this,"PUBLIC")),this.container=ke.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ke){this._delegate.automaticDataCollectionEnabled=ke}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ke=>{this._delegate.checkDestroyed(),ke()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,B.deleteApp)(this._delegate)))}_getService(ke,$e=B._DEFAULT_ENTRY_NAME){var xn;this._delegate.checkDestroyed();const Nn=this._delegate.container.getProvider(ke);return!Nn.isInitialized()&&"EXPLICIT"===(null===(xn=Nn.getComponent())||void 0===xn?void 0:xn.instantiationMode)&&Nn.initialize(),Nn.getImmediate({identifier:$e})}_removeServiceInstance(ke,$e=B._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ke).clearInstance($e)}_addComponent(ke){(0,B._addComponent)(this._delegate,ke)}_addOrOverwriteComponent(ke){(0,B._addOrOverwriteComponent)(this._delegate,ke)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Yt=new I.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Q=function Qe(){const gt=function Rn(gt){const ke={},$e={__esModule:!0,initializeApp:function Mt(He,vn={}){const Z=B.initializeApp(He,vn);if((0,I.r3)(ke,Z.name))return ke[Z.name];const $t=new gt(Z,$e);return ke[Z.name]=$t,$t},app:Nn,registerVersion:B.registerVersion,setLogLevel:B.setLogLevel,onLog:B.onLog,apps:null,SDK_VERSION:B.SDK_VERSION,INTERNAL:{registerComponent:function At(He){const vn=He.name,Z=vn.replace("-compat","");if(B._registerComponent(He)&&"PUBLIC"===He.type){const $t=(Ot=Nn())=>{if("function"!=typeof Ot[Z])throw Yt.create("invalid-app-argument",{appName:vn});return Ot[Z]()};void 0!==He.serviceProps&&(0,I.ZB)($t,He.serviceProps),$e[Z]=$t,gt.prototype[Z]=function(...Ot){return this._getService.bind(this,vn).apply(this,He.multipleInstances?Ot:[])}}return"PUBLIC"===He.type?$e[Z]:null},removeApp:function xn(He){delete ke[He]},useAsService:function dr(He,vn){return"serverAuth"===vn?null:vn},modularAPIs:B}};function Nn(He){if(!(0,I.r3)(ke,He=He||B._DEFAULT_ENTRY_NAME))throw Yt.create("no-app",{appName:He});return ke[He]}return $e.default=$e,Object.defineProperty($e,"apps",{get:function mt(){return Object.keys(ke).map(He=>ke[He])}}),Nn.App=gt,$e}(dt);return gt.INTERNAL=Object.assign(Object.assign({},gt.INTERNAL),{createFirebaseNamespace:Qe,extendNamespace:function ke($e){(0,I.ZB)(gt,$e)},createSubscribe:I.ne,ErrorFactory:I.LL,deepExtend:I.ZB}),gt}(),ne=new Ne.Yd("@firebase/app-compat");if((0,I.jU)()&&void 0!==self.firebase){ne.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const gt=self.firebase.SDK_VERSION;gt&&gt.indexOf("LITE")>=0&&ne.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Pn=Q;!function ht(gt){(0,B.registerVersion)("@firebase/app-compat","0.2.24",gt)}()},534:(zi,Sn,Ve)=>{Ve.r(Sn),Ve.d(Sn,{FirebaseError:()=>Ne.ZR,SDK_VERSION:()=>fs,_DEFAULT_ENTRY_NAME:()=>ai,_addComponent:()=>hs,_addOrOverwriteComponent:()=>zn,_apps:()=>fr,_clearComponents:()=>wn,_components:()=>Wi,_getProvider:()=>kt,_registerComponent:()=>to,_removeServiceInstance:()=>ui,deleteApp:()=>Gn,getApp:()=>ps,getApps:()=>jo,initializeApp:()=>Wa,onLog:()=>$o,registerVersion:()=>gs,setLogLevel:()=>mc});var I=Ve(861),xe=Ve(537),B=Ve(879),Ne=Ve(58);const dt=(V,S)=>S.some(ee=>V instanceof ee);let jt,Yt;const Q=new WeakMap,ne=new WeakMap,Ie=new WeakMap,Ze=new WeakMap,ht=new WeakMap;let ke={get(V,S,ee){if(V instanceof IDBTransaction){if("done"===S)return ne.get(V);if("objectStoreNames"===S)return V.objectStoreNames||Ie.get(V);if("store"===S)return ee.objectStoreNames[1]?void 0:ee.objectStore(ee.objectStoreNames[0])}return Mt(V[S])},set:(V,S,ee)=>(V[S]=ee,!0),has:(V,S)=>V instanceof IDBTransaction&&("done"===S||"store"===S)||S in V};function Nn(V){return"function"==typeof V?function xn(V){return V!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Qe(){return Yt||(Yt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(V)?function(...S){return V.apply(mt(this),S),Mt(Q.get(this))}:function(...S){return Mt(V.apply(mt(this),S))}:function(S,...ee){const me=V.call(mt(this),S,...ee);return Ie.set(me,S.sort?S.sort():[S]),Mt(me)}}(V):(V instanceof IDBTransaction&&function gt(V){if(ne.has(V))return;const S=new Promise((ee,me)=>{const Le=()=>{V.removeEventListener("complete",Ye),V.removeEventListener("error",W),V.removeEventListener("abort",W)},Ye=()=>{ee(),Le()},W=()=>{me(V.error||new DOMException("AbortError","AbortError")),Le()};V.addEventListener("complete",Ye),V.addEventListener("error",W),V.addEventListener("abort",W)});ne.set(V,S)}(V),dt(V,function Rn(){return jt||(jt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(V,ke):V)}function Mt(V){if(V instanceof IDBRequest)return function Pn(V){const S=new Promise((ee,me)=>{const Le=()=>{V.removeEventListener("success",Ye),V.removeEventListener("error",W)},Ye=()=>{ee(Mt(V.result)),Le()},W=()=>{me(V.error),Le()};V.addEventListener("success",Ye),V.addEventListener("error",W)});return S.then(ee=>{ee instanceof IDBCursor&&Q.set(ee,V)}).catch(()=>{}),ht.set(S,V),S}(V);if(Ze.has(V))return Ze.get(V);const S=Nn(V);return S!==V&&(Ze.set(V,S),ht.set(S,V)),S}const mt=V=>ht.get(V),He=["get","getKey","getAll","getAllKeys","count"],vn=["put","add","delete","clear"],Z=new Map;function $t(V,S){if(!(V instanceof IDBDatabase)||S in V||"string"!=typeof S)return;if(Z.get(S))return Z.get(S);const ee=S.replace(/FromIndex$/,""),me=S!==ee,Le=vn.includes(ee);if(!(ee in(me?IDBIndex:IDBObjectStore).prototype)||!Le&&!He.includes(ee))return;const Ye=function(){var W=(0,I.Z)(function*(Jt,..._e){const Ke=this.transaction(Jt,Le?"readwrite":"readonly");let qo=Ke.store;return me&&(qo=qo.index(_e.shift())),(yield Promise.all([qo[ee](..._e),Le&&Ke.done]))[0]});return function(_e){return W.apply(this,arguments)}}();return Z.set(S,Ye),Ye}!function $e(V){ke=V(ke)}(V=>({...V,get:(S,ee,me)=>$t(S,ee)||V.get(S,ee,me),has:(S,ee)=>!!$t(S,ee)||V.has(S,ee)}));class Ot{constructor(S){this.container=S}getPlatformInfoString(){return this.container.getProviders().map(ee=>{if(function fn(V){const S=V.getComponent();return"VERSION"===S?.type}(ee)){const me=ee.getImmediate();return`${me.library}/${me.version}`}return null}).filter(ee=>ee).join(" ")}}const yi="@firebase/app",st=new B.Yd("@firebase/app"),ai="[DEFAULT]",Ga={[yi]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},fr=new Map,Wi=new Map;function hs(V,S){try{V.container.addComponent(S)}catch(ee){st.debug(`Component ${S.name} failed to register with FirebaseApp ${V.name}`,ee)}}function zn(V,S){V.container.addOrOverwriteComponent(S)}function to(V){const S=V.name;if(Wi.has(S))return st.debug(`There were multiple attempts to register component ${S}.`),!1;Wi.set(S,V);for(const ee of fr.values())hs(ee,V);return!0}function kt(V,S){const ee=V.container.getProvider("heartbeat").getImmediate({optional:!0});return ee&&ee.triggerHeartbeat(),V.container.getProvider(S)}function ui(V,S,ee=ai){kt(V,S).clearInstance(ee)}function wn(){Wi.clear()}const Qr=new Ne.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Yr{constructor(S,ee,me){this._isDeleted=!1,this._options=Object.assign({},S),this._config=Object.assign({},ee),this._name=ee.name,this._automaticDataCollectionEnabled=ee.automaticDataCollectionEnabled,this._container=me,this.container.addComponent(new xe.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(S){this.checkDestroyed(),this._automaticDataCollectionEnabled=S}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(S){this._isDeleted=S}checkDestroyed(){if(this.isDeleted)throw Qr.create("app-deleted",{appName:this._name})}}const fs="10.7.0";function Wa(V,S={}){let ee=V;"object"!=typeof S&&(S={name:S});const me=Object.assign({name:ai,automaticDataCollectionEnabled:!1},S),Le=me.name;if("string"!=typeof Le||!Le)throw Qr.create("bad-app-name",{appName:String(Le)});if(ee||(ee=(0,Ne.aH)()),!ee)throw Qr.create("no-options");const Ye=fr.get(Le);if(Ye){if((0,Ne.vZ)(ee,Ye.options)&&(0,Ne.vZ)(me,Ye.config))return Ye;throw Qr.create("duplicate-app",{appName:Le})}const W=new xe.H0(Le);for(const _e of Wi.values())W.addComponent(_e);const Jt=new Yr(ee,me,W);return fr.set(Le,Jt),Jt}function ps(V=ai){const S=fr.get(V);if(!S&&V===ai&&(0,Ne.aH)())return Wa();if(!S)throw Qr.create("no-app",{appName:V});return S}function jo(){return Array.from(fr.values())}function Gn(V){return pr.apply(this,arguments)}function pr(){return(pr=(0,I.Z)(function*(V){const S=V.name;fr.has(S)&&(fr.delete(S),yield Promise.all(V.container.getProviders().map(ee=>ee.delete())),V.isDeleted=!0)})).apply(this,arguments)}function gs(V,S,ee){var me;let Le=null!==(me=Ga[V])&&void 0!==me?me:V;ee&&(Le+=`-${ee}`);const Ye=Le.match(/\s|\//),W=S.match(/\s|\//);if(Ye||W){const Jt=[`Unable to register library "${Le}" with version "${S}":`];return Ye&&Jt.push(`library name "${Le}" contains illegal characters (whitespace or "/")`),Ye&&W&&Jt.push("and"),W&&Jt.push(`version name "${S}" contains illegal characters (whitespace or "/")`),void st.warn(Jt.join(" "))}to(new xe.wA(`${Le}-version`,()=>({library:Le,version:S}),"VERSION"))}function $o(V,S){if(null!==V&&"function"!=typeof V)throw Qr.create("invalid-log-argument");(0,B.Am)(V,S)}function mc(V){(0,B.Ub)(V)}const Za="firebase-heartbeat-database",Ho=1,C="firebase-heartbeat-store";let T=null;function A(){return T||(T=function At(V,S,{blocked:ee,upgrade:me,blocking:Le,terminated:Ye}={}){const W=indexedDB.open(V,S),Jt=Mt(W);return me&&W.addEventListener("upgradeneeded",_e=>{me(Mt(W.result),_e.oldVersion,_e.newVersion,Mt(W.transaction),_e)}),ee&&W.addEventListener("blocked",_e=>ee(_e.oldVersion,_e.newVersion,_e)),Jt.then(_e=>{Ye&&_e.addEventListener("close",()=>Ye()),Le&&_e.addEventListener("versionchange",Ke=>Le(Ke.oldVersion,Ke.newVersion,Ke))}).catch(()=>{}),Jt}(Za,Ho,{upgrade:(V,S)=>{0===S&&V.createObjectStore(C)}}).catch(V=>{throw Qr.create("idb-open",{originalErrorMessage:V.message})})),T}function x(){return(x=(0,I.Z)(function*(V){try{return yield(yield A()).transaction(C).objectStore(C).get(qe(V))}catch(S){if(S instanceof Ne.ZR)st.warn(S.message);else{const ee=Qr.create("idb-get",{originalErrorMessage:S?.message});st.warn(ee.message)}}})).apply(this,arguments)}function $(V,S){return Me.apply(this,arguments)}function Me(){return(Me=(0,I.Z)(function*(V,S){try{const me=(yield A()).transaction(C,"readwrite");yield me.objectStore(C).put(S,qe(V)),yield me.done}catch(ee){if(ee instanceof Ne.ZR)st.warn(ee.message);else{const me=Qr.create("idb-set",{originalErrorMessage:ee?.message});st.warn(me.message)}}})).apply(this,arguments)}function qe(V){return`${V.name}!${V.options.appId}`}class Tn{constructor(S){this.container=S,this._heartbeatsCache=null;const ee=this.container.getProvider("app").getImmediate();this._storage=new wt(ee),this._heartbeatsCachePromise=this._storage.read().then(me=>(this._heartbeatsCache=me,me))}triggerHeartbeat(){var S=this;return(0,I.Z)(function*(){var ee,me;const Ye=S.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),W=ge();if((null!=(null===(ee=S._heartbeatsCache)||void 0===ee?void 0:ee.heartbeats)||(S._heartbeatsCache=yield S._heartbeatsCachePromise,null!=(null===(me=S._heartbeatsCache)||void 0===me?void 0:me.heartbeats)))&&S._heartbeatsCache.lastSentHeartbeatDate!==W&&!S._heartbeatsCache.heartbeats.some(Jt=>Jt.date===W))return S._heartbeatsCache.heartbeats.push({date:W,agent:Ye}),S._heartbeatsCache.heartbeats=S._heartbeatsCache.heartbeats.filter(Jt=>{const _e=new Date(Jt.date).valueOf();return Date.now()-_e<=2592e6}),S._storage.overwrite(S._heartbeatsCache)})()}getHeartbeatsHeader(){var S=this;return(0,I.Z)(function*(){var ee;if(null===S._heartbeatsCache&&(yield S._heartbeatsCachePromise),null==(null===(ee=S._heartbeatsCache)||void 0===ee?void 0:ee.heartbeats)||0===S._heartbeatsCache.heartbeats.length)return"";const me=ge(),{heartbeatsToSend:Le,unsentEntries:Ye}=function Mn(V,S=1024){const ee=[];let me=V.slice();for(const Le of V){const Ye=ee.find(W=>W.agent===Le.agent);if(Ye){if(Ye.dates.push(Le.date),Ei(ee)>S){Ye.dates.pop();break}}else if(ee.push({agent:Le.agent,dates:[Le.date]}),Ei(ee)>S){ee.pop();break}me=me.slice(1)}return{heartbeatsToSend:ee,unsentEntries:me}}(S._heartbeatsCache.heartbeats),W=(0,Ne.L)(JSON.stringify({version:2,heartbeats:Le}));return S._heartbeatsCache.lastSentHeartbeatDate=me,Ye.length>0?(S._heartbeatsCache.heartbeats=Ye,yield S._storage.overwrite(S._heartbeatsCache)):(S._heartbeatsCache.heartbeats=[],S._storage.overwrite(S._heartbeatsCache)),W})()}}function ge(){return(new Date).toISOString().substring(0,10)}class wt{constructor(S){this.app=S,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,I.Z)(function*(){return!!(0,Ne.hl)()&&(0,Ne.eu)().then(()=>!0).catch(()=>!1)})()}read(){var S=this;return(0,I.Z)(function*(){if(yield S._canUseIndexedDBPromise){const me=yield function G(V){return x.apply(this,arguments)}(S.app);return me?.heartbeats?me:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(S){var ee=this;return(0,I.Z)(function*(){var me;if(yield ee._canUseIndexedDBPromise){const Ye=yield ee.read();return $(ee.app,{lastSentHeartbeatDate:null!==(me=S.lastSentHeartbeatDate)&&void 0!==me?me:Ye.lastSentHeartbeatDate,heartbeats:S.heartbeats})}})()}add(S){var ee=this;return(0,I.Z)(function*(){var me;if(yield ee._canUseIndexedDBPromise){const Ye=yield ee.read();return $(ee.app,{lastSentHeartbeatDate:null!==(me=S.lastSentHeartbeatDate)&&void 0!==me?me:Ye.lastSentHeartbeatDate,heartbeats:[...Ye.heartbeats,...S.heartbeats]})}})()}}function Ei(V){return(0,Ne.L)(JSON.stringify({version:2,heartbeats:V})).length}!function _c(V){to(new xe.wA("platform-logger",S=>new Ot(S),"PRIVATE")),to(new xe.wA("heartbeat",S=>new Tn(S),"PRIVATE")),gs(yi,"0.9.24",V),gs(yi,"0.9.24","esm2017"),gs("fire-js","")}("")},537:(zi,Sn,Ve)=>{Ve.d(Sn,{H0:()=>Rn,wA:()=>B});var I=Ve(861),xe=Ve(58);class B{constructor(Q,ne,Ie){this.name=Q,this.instanceFactory=ne,this.type=Ie,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Q){return this.instantiationMode=Q,this}setMultipleInstances(Q){return this.multipleInstances=Q,this}setServiceProps(Q){return this.serviceProps=Q,this}setInstanceCreatedCallback(Q){return this.onInstanceCreated=Q,this}}const Ne="[DEFAULT]";class dt{constructor(Q,ne){this.name=Q,this.container=ne,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Q){const ne=this.normalizeInstanceIdentifier(Q);if(!this.instancesDeferred.has(ne)){const Ie=new xe.BH;if(this.instancesDeferred.set(ne,Ie),this.isInitialized(ne)||this.shouldAutoInitialize())try{const Ze=this.getOrInitializeService({instanceIdentifier:ne});Ze&&Ie.resolve(Ze)}catch{}}return this.instancesDeferred.get(ne).promise}getImmediate(Q){var ne;const Ie=this.normalizeInstanceIdentifier(Q?.identifier),Ze=null!==(ne=Q?.optional)&&void 0!==ne&&ne;if(!this.isInitialized(Ie)&&!this.shouldAutoInitialize()){if(Ze)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Ie})}catch(ht){if(Ze)return null;throw ht}}getComponent(){return this.component}setComponent(Q){if(Q.name!==this.name)throw Error(`Mismatching Component ${Q.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Q,this.shouldAutoInitialize()){if(function Yt(Qe){return"EAGER"===Qe.instantiationMode}(Q))try{this.getOrInitializeService({instanceIdentifier:Ne})}catch{}for(const[ne,Ie]of this.instancesDeferred.entries()){const Ze=this.normalizeInstanceIdentifier(ne);try{const ht=this.getOrInitializeService({instanceIdentifier:Ze});Ie.resolve(ht)}catch{}}}}clearInstance(Q=Ne){this.instancesDeferred.delete(Q),this.instancesOptions.delete(Q),this.instances.delete(Q)}delete(){var Q=this;return(0,I.Z)(function*(){const ne=Array.from(Q.instances.values());yield Promise.all([...ne.filter(Ie=>"INTERNAL"in Ie).map(Ie=>Ie.INTERNAL.delete()),...ne.filter(Ie=>"_delete"in Ie).map(Ie=>Ie._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Q=Ne){return this.instances.has(Q)}getOptions(Q=Ne){return this.instancesOptions.get(Q)||{}}initialize(Q={}){const{options:ne={}}=Q,Ie=this.normalizeInstanceIdentifier(Q.instanceIdentifier);if(this.isInitialized(Ie))throw Error(`${this.name}(${Ie}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ze=this.getOrInitializeService({instanceIdentifier:Ie,options:ne});for(const[ht,Pn]of this.instancesDeferred.entries())Ie===this.normalizeInstanceIdentifier(ht)&&Pn.resolve(Ze);return Ze}onInit(Q,ne){var Ie;const Ze=this.normalizeInstanceIdentifier(ne),ht=null!==(Ie=this.onInitCallbacks.get(Ze))&&void 0!==Ie?Ie:new Set;ht.add(Q),this.onInitCallbacks.set(Ze,ht);const Pn=this.instances.get(Ze);return Pn&&Q(Pn,Ze),()=>{ht.delete(Q)}}invokeOnInitCallbacks(Q,ne){const Ie=this.onInitCallbacks.get(ne);if(Ie)for(const Ze of Ie)try{Ze(Q,ne)}catch{}}getOrInitializeService({instanceIdentifier:Q,options:ne={}}){let Ie=this.instances.get(Q);if(!Ie&&this.component&&(Ie=this.component.instanceFactory(this.container,{instanceIdentifier:(Qe=Q,Qe===Ne?void 0:Qe),options:ne}),this.instances.set(Q,Ie),this.instancesOptions.set(Q,ne),this.invokeOnInitCallbacks(Ie,Q),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Q,Ie)}catch{}var Qe;return Ie||null}normalizeInstanceIdentifier(Q=Ne){return this.component?this.component.multipleInstances?Q:Ne:Q}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Rn{constructor(Q){this.name=Q,this.providers=new Map}addComponent(Q){const ne=this.getProvider(Q.name);if(ne.isComponentSet())throw new Error(`Component ${Q.name} has already been registered with ${this.name}`);ne.setComponent(Q)}addOrOverwriteComponent(Q){this.getProvider(Q.name).isComponentSet()&&this.providers.delete(Q.name),this.addComponent(Q)}getProvider(Q){if(this.providers.has(Q))return this.providers.get(Q);const ne=new dt(Q,this);return this.providers.set(Q,ne),ne}getProviders(){return Array.from(this.providers.values())}}},879:(zi,Sn,Ve)=>{Ve.d(Sn,{Am:()=>Qe,Ub:()=>Rn,Yd:()=>Yt,in:()=>xe});const I=[];var xe=function(Q){return Q[Q.DEBUG=0]="DEBUG",Q[Q.VERBOSE=1]="VERBOSE",Q[Q.INFO=2]="INFO",Q[Q.WARN=3]="WARN",Q[Q.ERROR=4]="ERROR",Q[Q.SILENT=5]="SILENT",Q}(xe||{});const B={debug:xe.DEBUG,verbose:xe.VERBOSE,info:xe.INFO,warn:xe.WARN,error:xe.ERROR,silent:xe.SILENT},Ne=xe.INFO,dt={[xe.DEBUG]:"log",[xe.VERBOSE]:"log",[xe.INFO]:"info",[xe.WARN]:"warn",[xe.ERROR]:"error"},jt=(Q,ne,...Ie)=>{if(ne<Q.logLevel)return;const Ze=(new Date).toISOString(),ht=dt[ne];if(!ht)throw new Error(`Attempted to log a message with an invalid logType (value: ${ne})`);console[ht](`[${Ze}]  ${Q.name}:`,...Ie)};class Yt{constructor(ne){this.name=ne,this._logLevel=Ne,this._logHandler=jt,this._userLogHandler=null,I.push(this)}get logLevel(){return this._logLevel}set logLevel(ne){if(!(ne in xe))throw new TypeError(`Invalid value "${ne}" assigned to \`logLevel\``);this._logLevel=ne}setLogLevel(ne){this._logLevel="string"==typeof ne?B[ne]:ne}get logHandler(){return this._logHandler}set logHandler(ne){if("function"!=typeof ne)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ne}get userLogHandler(){return this._userLogHandler}set userLogHandler(ne){this._userLogHandler=ne}debug(...ne){this._userLogHandler&&this._userLogHandler(this,xe.DEBUG,...ne),this._logHandler(this,xe.DEBUG,...ne)}log(...ne){this._userLogHandler&&this._userLogHandler(this,xe.VERBOSE,...ne),this._logHandler(this,xe.VERBOSE,...ne)}info(...ne){this._userLogHandler&&this._userLogHandler(this,xe.INFO,...ne),this._logHandler(this,xe.INFO,...ne)}warn(...ne){this._userLogHandler&&this._userLogHandler(this,xe.WARN,...ne),this._logHandler(this,xe.WARN,...ne)}error(...ne){this._userLogHandler&&this._userLogHandler(this,xe.ERROR,...ne),this._logHandler(this,xe.ERROR,...ne)}}function Rn(Q){I.forEach(ne=>{ne.setLogLevel(Q)})}function Qe(Q,ne){for(const Ie of I){let Ze=null;ne&&ne.level&&(Ze=B[ne.level]),Ie.userLogHandler=null===Q?null:(ht,Pn,...gt)=>{const ke=gt.map($e=>{if(null==$e)return null;if("string"==typeof $e)return $e;if("number"==typeof $e||"boolean"==typeof $e)return $e.toString();if($e instanceof Error)return $e.message;try{return JSON.stringify($e)}catch{return null}}).filter($e=>$e).join(" ");Pn>=(Ze??ht.logLevel)&&Q({level:xe[Pn].toLowerCase(),message:ke,args:gt,type:ht.name})}}}},377:(zi,Sn,Ve)=>{Ve.r(Sn);var I=Ve(861),xe=Ve(106),B=Ve(58),Ne=Ve(534),dt=Ve(879),jt=Ve(582),Yt=Ve(537);const Qe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const Pn=function Ze(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},gt=function ht(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ke=new B.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),xn=new dt.Yd("@firebase/auth");function Mt(h,...c){xn.logLevel<=dt.in.ERROR&&xn.error(`Auth (${Ne.SDK_VERSION}): ${h}`,...c)}function mt(h,...c){throw vn(h,...c)}function At(h,...c){return vn(h,...c)}function dr(h,c,l){const p=Object.assign(Object.assign({},gt()),{[c]:l});return new B.LL("auth","Firebase",p).create(c,{appName:h.name})}function He(h,c,l){if(!(c instanceof l))throw l.name!==c.constructor.name&&mt(h,"argument-error"),dr(h,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function vn(h,...c){if("string"!=typeof h){const l=c[0],p=[...c.slice(1)];return p[0]&&(p[0].appName=h.name),h._errorFactory.create(l,...p)}return ke.create(h,...c)}function Z(h,c,...l){if(!h)throw vn(c,...l)}function $t(h){const c="INTERNAL ASSERTION FAILED: "+h;throw Mt(c),new Error(c)}function Ot(h,c){h||$t(c)}function fn(){var h;return typeof self<"u"&&(null===(h=self.location)||void 0===h?void 0:h.href)||""}function yi(){return"http:"===vi()||"https:"===vi()}function vi(){var h;return typeof self<"u"&&(null===(h=self.location)||void 0===h?void 0:h.protocol)||null}class Ii{constructor(c,l){this.shortDelay=c,this.longDelay=l,Ot(l>c,"Short delay should be less than long delay!"),this.isMobile=(0,B.uI)()||(0,B.b$)()}get(){return function st(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(yi()||(0,B.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function k(h,c){Ot(h.emulator,"Emulator should always be set here");const{url:l}=h.emulator;return c?`${l}${c.startsWith("/")?c.slice(1):c}`:l}class F{static initialize(c,l,p){this.fetchImpl=c,l&&(this.headersImpl=l),p&&(this.responseImpl=p)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void $t("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void $t("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void $t("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const j={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},H=new Ii(3e4,6e4);function Y(h,c){return h.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:h.tenantId}):c}function U(h,c,l,p){return de.apply(this,arguments)}function de(){return(de=(0,I.Z)(function*(h,c,l,p,m={}){return nt(h,m,(0,I.Z)(function*(){let v={},w={};p&&("GET"===c?w=p:v={body:JSON.stringify(p)});const P=(0,B.xO)(Object.assign({key:h.config.apiKey},w)).slice(1),q=yield h._getAdditionalHeaders();return q["Content-Type"]="application/json",h.languageCode&&(q["X-Firebase-Locale"]=h.languageCode),F.fetch()(Ht(h,h.config.apiHost,l,P),Object.assign({method:c,headers:q,referrerPolicy:"no-referrer"},v))}))})).apply(this,arguments)}function nt(h,c,l){return ve.apply(this,arguments)}function ve(){return(ve=(0,I.Z)(function*(h,c,l){h._canInitEmulator=!1;const p=Object.assign(Object.assign({},j),c);try{const m=new qn(h),v=yield Promise.race([l(),m.promise]);m.clearNetworkTimeout();const w=yield v.json();if("needConfirmation"in w)throw In(h,"account-exists-with-different-credential",w);if(v.ok&&!("errorMessage"in w))return w;{const P=v.ok?w.errorMessage:w.error.message,[q,oe]=P.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===q)throw In(h,"credential-already-in-use",w);if("EMAIL_EXISTS"===q)throw In(h,"email-already-in-use",w);if("USER_DISABLED"===q)throw In(h,"user-disabled",w);const fe=p[q]||q.toLowerCase().replace(/[_\s]+/g,"-");if(oe)throw dr(h,fe,oe);mt(h,fe)}}catch(m){if(m instanceof B.ZR)throw m;mt(h,"network-request-failed",{message:String(m)})}})).apply(this,arguments)}function Ee(h,c,l,p){return at.apply(this,arguments)}function at(){return(at=(0,I.Z)(function*(h,c,l,p,m={}){const v=yield U(h,c,l,p,m);return"mfaPendingCredential"in v&&mt(h,"multi-factor-auth-required",{_serverResponse:v}),v})).apply(this,arguments)}function Ht(h,c,l,p){const m=`${c}${l}?${p}`;return h.config.emulator?k(h.config,m):`${h.config.apiScheme}://${m}`}function Pt(h){switch(h){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class qn{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((l,p)=>{this.timer=setTimeout(()=>p(At(this.auth,"network-request-failed")),H.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function In(h,c,l){const p={appName:h.name};l.email&&(p.email=l.email),l.phoneNumber&&(p.phoneNumber=l.phoneNumber);const m=At(h,c,p);return m.customData._tokenResponse=l,m}function er(h){return void 0!==h&&void 0!==h.getResponse}function hr(h){return void 0!==h&&void 0!==h.enterprise}class Pr{constructor(c){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===c.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=c.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=c.recaptchaEnforcementState}getProviderEnforcementState(c){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const l of this.recaptchaEnforcementState)if(l.provider&&l.provider===c)return Pt(l.enforcementState);return null}isProviderEnabled(c){return"ENFORCE"===this.getProviderEnforcementState(c)||"AUDIT"===this.getProviderEnforcementState(c)}}function Gi(){return(Gi=(0,I.Z)(function*(h){return(yield U(h,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function En(h,c){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,I.Z)(function*(h,c){return U(h,"GET","/v2/recaptchaConfig",Y(h,c))})).apply(this,arguments)}function ai(){return(ai=(0,I.Z)(function*(h,c){return U(h,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function fr(){return(fr=(0,I.Z)(function*(h,c){return U(h,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function hs(){return(hs=(0,I.Z)(function*(h,c){return U(h,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function zn(h){if(h)try{const c=new Date(Number(h));if(!isNaN(c.getTime()))return c.toUTCString()}catch{}}function ui(){return(ui=(0,I.Z)(function*(h,c=!1){const l=(0,B.m9)(h),p=yield l.getIdToken(c),m=Bo(p);Z(m&&m.exp&&m.auth_time&&m.iat,l.auth,"internal-error");const v="object"==typeof m.firebase?m.firebase:void 0,w=v?.sign_in_provider;return{claims:m,token:p,authTime:zn(wn(m.auth_time)),issuedAtTime:zn(wn(m.iat)),expirationTime:zn(wn(m.exp)),signInProvider:w||null,signInSecondFactor:v?.sign_in_second_factor||null}})).apply(this,arguments)}function wn(h){return 1e3*Number(h)}function Bo(h){const[c,l,p]=h.split(".");if(void 0===c||void 0===l||void 0===p)return Mt("JWT malformed, contained fewer than 3 sections"),null;try{const m=(0,B.tV)(l);return m?JSON.parse(m):(Mt("Failed to decode base64 JWT payload"),null)}catch(m){return Mt("Caught error parsing JWT payload as JSON",m?.toString()),null}}function Yr(h,c){return fs.apply(this,arguments)}function fs(){return(fs=(0,I.Z)(function*(h,c,l=!1){if(l)return c;try{return yield c}catch(p){throw p instanceof B.ZR&&function Wa({code:h}){return"auth/user-disabled"===h||"auth/user-token-expired"===h}(p)&&h.auth.currentUser===h&&(yield h.auth.signOut()),p}})).apply(this,arguments)}class ps{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var l;if(c){const p=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),p}{this.errorBackoff=3e4;const m=(null!==(l=this.user.stsTokenManager.expirationTime)&&void 0!==l?l:0)-Date.now()-3e5;return Math.max(0,m)}}schedule(c=!1){var l=this;if(!this.isRunning)return;const p=this.getInterval(c);this.timerId=setTimeout((0,I.Z)(function*(){yield l.iteration()}),p)}iteration(){var c=this;return(0,I.Z)(function*(){try{yield c.user.getIdToken(!0)}catch(l){return void("auth/network-request-failed"===l?.code&&c.schedule(!0))}c.schedule()})()}}class jo{constructor(c,l){this.createdAt=c,this.lastLoginAt=l,this._initializeTime()}_initializeTime(){this.lastSignInTime=zn(this.lastLoginAt),this.creationTime=zn(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Gn(h){return pr.apply(this,arguments)}function pr(){return pr=(0,I.Z)(function*(h){var c;const l=h.auth,p=yield h.getIdToken(),m=yield Yr(h,function Wi(h,c){return hs.apply(this,arguments)}(l,{idToken:p}));Z(m?.users.length,l,"internal-error");const v=m.users[0];h._notifyReloadListener(v);const w=null!==(c=v.providerUserInfo)&&void 0!==c&&c.length?function Za(h){return h.map(c=>{var{providerId:l}=c,p=(0,jt._T)(c,["providerId"]);return{providerId:l,uid:p.rawId||"",displayName:p.displayName||null,email:p.email||null,phoneNumber:p.phoneNumber||null,photoURL:p.photoUrl||null}})}(v.providerUserInfo):[],P=function mc(h,c){return[...h.filter(p=>!c.some(m=>m.providerId===p.providerId)),...c]}(h.providerData,w),fe=!!h.isAnonymous&&!(h.email&&v.passwordHash||P?.length),ye={uid:v.localId,displayName:v.displayName||null,photoURL:v.photoUrl||null,email:v.email||null,emailVerified:v.emailVerified||!1,phoneNumber:v.phoneNumber||null,tenantId:v.tenantId||null,providerData:P,metadata:new jo(v.createdAt,v.lastLoginAt),isAnonymous:fe};Object.assign(h,ye)}),pr.apply(this,arguments)}function $o(){return($o=(0,I.Z)(function*(h){const c=(0,B.m9)(h);yield Gn(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function C(){return(C=(0,I.Z)(function*(h,c){const l=yield nt(h,{},(0,I.Z)(function*(){const p=(0,B.xO)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:m,apiKey:v}=h.config,w=Ht(h,m,"/v1/token",`key=${v}`),P=yield h._getAdditionalHeaders();return P["Content-Type"]="application/x-www-form-urlencoded",F.fetch()(w,{method:"POST",headers:P,body:p})}));return{accessToken:l.access_token,expiresIn:l.expires_in,refreshToken:l.refresh_token}})).apply(this,arguments)}function A(){return(A=(0,I.Z)(function*(h,c){return U(h,"POST","/v2/accounts:revokeToken",Y(h,c))})).apply(this,arguments)}class G{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){Z(c.idToken,"internal-error"),Z(typeof c.idToken<"u","internal-error"),Z(typeof c.refreshToken<"u","internal-error");const l="expiresIn"in c&&typeof c.expiresIn<"u"?Number(c.expiresIn):function Qr(h){const c=Bo(h);return Z(c,"internal-error"),Z(typeof c.exp<"u","internal-error"),Z(typeof c.iat<"u","internal-error"),Number(c.exp)-Number(c.iat)}(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,l)}getToken(c,l=!1){var p=this;return(0,I.Z)(function*(){return Z(!p.accessToken||p.refreshToken,c,"user-token-expired"),l||!p.accessToken||p.isExpired?p.refreshToken?(yield p.refresh(c,p.refreshToken),p.accessToken):null:p.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,l){var p=this;return(0,I.Z)(function*(){const{accessToken:m,refreshToken:v,expiresIn:w}=yield function Ho(h,c){return C.apply(this,arguments)}(c,l);p.updateTokensAndExpiration(m,v,Number(w))})()}updateTokensAndExpiration(c,l,p){this.refreshToken=l||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*p}static fromJSON(c,l){const{refreshToken:p,accessToken:m,expirationTime:v}=l,w=new G;return p&&(Z("string"==typeof p,"internal-error",{appName:c}),w.refreshToken=p),m&&(Z("string"==typeof m,"internal-error",{appName:c}),w.accessToken=m),v&&(Z("number"==typeof v,"internal-error",{appName:c}),w.expirationTime=v),w}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new G,this.toJSON())}_performRefresh(){return $t("not implemented")}}function x(h,c){Z("string"==typeof h||typeof h>"u","internal-error",{appName:c})}class ${constructor(c){var{uid:l,auth:p,stsTokenManager:m}=c,v=(0,jt._T)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ps(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=l,this.auth=p,this.stsTokenManager=m,this.accessToken=m.accessToken,this.displayName=v.displayName||null,this.email=v.email||null,this.emailVerified=v.emailVerified||!1,this.phoneNumber=v.phoneNumber||null,this.photoURL=v.photoURL||null,this.isAnonymous=v.isAnonymous||!1,this.tenantId=v.tenantId||null,this.providerData=v.providerData?[...v.providerData]:[],this.metadata=new jo(v.createdAt||void 0,v.lastLoginAt||void 0)}getIdToken(c){var l=this;return(0,I.Z)(function*(){const p=yield Yr(l,l.stsTokenManager.getToken(l.auth,c));return Z(p,l.auth,"internal-error"),l.accessToken!==p&&(l.accessToken=p,yield l.auth._persistUserIfCurrent(l),l.auth._notifyListenersIfCurrent(l)),p})()}getIdTokenResult(c){return function kt(h){return ui.apply(this,arguments)}(this,c)}reload(){return function gs(h){return $o.apply(this,arguments)}(this)}_assign(c){this!==c&&(Z(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(l=>Object.assign({},l)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){const l=new $(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}));return l.metadata._copy(this.metadata),l}_onReload(c){Z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,l=!1){var p=this;return(0,I.Z)(function*(){let m=!1;c.idToken&&c.idToken!==p.stsTokenManager.accessToken&&(p.stsTokenManager.updateFromServerResponse(c),m=!0),l&&(yield Gn(p)),yield p.auth._persistUserIfCurrent(p),m&&p.auth._notifyListenersIfCurrent(p)})()}delete(){var c=this;return(0,I.Z)(function*(){const l=yield c.getIdToken();return yield Yr(c,function za(h,c){return ai.apply(this,arguments)}(c.auth,{idToken:l})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,l){var p,m,v,w,P,q,oe,fe;const ye=null!==(p=l.displayName)&&void 0!==p?p:void 0,en=null!==(m=l.email)&&void 0!==m?m:void 0,di=null!==(v=l.phoneNumber)&&void 0!==v?v:void 0,al=null!==(w=l.photoURL)&&void 0!==w?w:void 0,Pm=null!==(P=l.tenantId)&&void 0!==P?P:void 0,la=null!==(q=l._redirectEventId)&&void 0!==q?q:void 0,Wh=null!==(oe=l.createdAt)&&void 0!==oe?oe:void 0,xm=null!==(fe=l.lastLoginAt)&&void 0!==fe?fe:void 0,{uid:ul,emailVerified:eE,isAnonymous:Zh,providerData:Nm,stsTokenManager:Mm}=l;Z(ul&&Mm,c,"internal-error");const tE=G.fromJSON(this.name,Mm);Z("string"==typeof ul,c,"internal-error"),x(ye,c.name),x(en,c.name),Z("boolean"==typeof eE,c,"internal-error"),Z("boolean"==typeof Zh,c,"internal-error"),x(di,c.name),x(al,c.name),x(Pm,c.name),x(la,c.name),x(Wh,c.name),x(xm,c.name);const xu=new $({uid:ul,auth:c,email:en,emailVerified:eE,displayName:ye,isAnonymous:Zh,photoURL:al,phoneNumber:di,tenantId:Pm,stsTokenManager:tE,createdAt:Wh,lastLoginAt:xm});return Nm&&Array.isArray(Nm)&&(xu.providerData=Nm.map(Ib=>Object.assign({},Ib))),la&&(xu._redirectEventId=la),xu}static _fromIdTokenResponse(c,l,p=!1){return(0,I.Z)(function*(){const m=new G;m.updateFromServerResponse(l);const v=new $({uid:l.localId,auth:c,stsTokenManager:m,isAnonymous:p});return yield Gn(v),v})()}}const Me=new Map;function qe(h){Ot(h instanceof Function,"Expected a class definition");let c=Me.get(h);return c?(Ot(c instanceof h,"Instance stored in cache mismatched with class"),c):(c=new h,Me.set(h,c),c)}const qt=(()=>{class h{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,I.Z)(function*(){return!0})()}_set(l,p){var m=this;return(0,I.Z)(function*(){m.storage[l]=p})()}_get(l){var p=this;return(0,I.Z)(function*(){const m=p.storage[l];return void 0===m?null:m})()}_remove(l){var p=this;return(0,I.Z)(function*(){delete p.storage[l]})()}_addListener(l,p){}_removeListener(l,p){}}return h.type="NONE",h})();function Tn(h,c,l){return`firebase:${h}:${c}:${l}`}class ge{constructor(c,l,p){this.persistence=c,this.auth=l,this.userKey=p;const{config:m,name:v}=this.auth;this.fullUserKey=Tn(this.userKey,m.apiKey,v),this.fullPersistenceKey=Tn("persistence",m.apiKey,v),this.boundEventHandler=l._onStorageEvent.bind(l),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,I.Z)(function*(){const l=yield c.persistence._get(c.fullUserKey);return l?$._fromJSON(c.auth,l):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var l=this;return(0,I.Z)(function*(){if(l.persistence===c)return;const p=yield l.getCurrentUser();return yield l.removeCurrentUser(),l.persistence=c,p?l.setCurrentUser(p):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,l,p="authUser"){return(0,I.Z)(function*(){if(!l.length)return new ge(qe(qt),c,p);const m=(yield Promise.all(l.map(function(){var oe=(0,I.Z)(function*(fe){if(yield fe._isAvailable())return fe});return function(fe){return oe.apply(this,arguments)}}()))).filter(oe=>oe);let v=m[0]||qe(qt);const w=Tn(p,c.config.apiKey,c.name);let P=null;for(const oe of l)try{const fe=yield oe._get(w);if(fe){const ye=$._fromJSON(c,fe);oe!==v&&(P=ye),v=oe;break}}catch{}const q=m.filter(oe=>oe._shouldAllowMigration);return v._shouldAllowMigration&&q.length?(v=q[0],P&&(yield v._set(w,P.toJSON())),yield Promise.all(l.map(function(){var oe=(0,I.Z)(function*(fe){if(fe!==v)try{yield fe._remove(w)}catch{}});return function(fe){return oe.apply(this,arguments)}}())),new ge(v,c,p)):new ge(v,c,p)})()}}function Mn(h){const c=h.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if(V(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(wt(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(ee(c))return"Blackberry";if(me(c))return"Webos";if(Ei(c))return"Safari";if((c.includes("chrome/")||_c(c))&&!c.includes("edge/"))return"Chrome";if(S(c))return"Android";{const p=h.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===p?.length)return p[1]}return"Other"}function wt(h=(0,B.z$)()){return/firefox\//i.test(h)}function Ei(h=(0,B.z$)()){const c=h.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function _c(h=(0,B.z$)()){return/crios\//i.test(h)}function V(h=(0,B.z$)()){return/iemobile/i.test(h)}function S(h=(0,B.z$)()){return/android/i.test(h)}function ee(h=(0,B.z$)()){return/blackberry/i.test(h)}function me(h=(0,B.z$)()){return/webos/i.test(h)}function Le(h=(0,B.z$)()){return/iphone|ipad|ipod/i.test(h)||/macintosh/i.test(h)&&/mobile/i.test(h)}function _e(h=(0,B.z$)()){return Le(h)||S(h)||me(h)||ee(h)||/windows phone/i.test(h)||V(h)}function qo(h,c=[]){let l;switch(h){case"Browser":l=Mn((0,B.z$)());break;case"Worker":l=`${Mn((0,B.z$)())}-${h}`;break;default:l=h}const p=c.length?c.join(","):"FirebaseCore-web";return`${l}/JsCore/${Ne.SDK_VERSION}/${p}`}class FA{constructor(c){this.auth=c,this.queue=[]}pushCallback(c,l){const p=v=>new Promise((w,P)=>{try{w(c(v))}catch(q){P(q)}});p.onAbort=l,this.queue.push(p);const m=this.queue.length-1;return()=>{this.queue[m]=()=>Promise.resolve()}}runMiddleware(c){var l=this;return(0,I.Z)(function*(){if(l.auth.currentUser===c)return;const p=[];try{for(const m of l.queue)yield m(c),m.onAbort&&p.push(m.onAbort)}catch(m){p.reverse();for(const v of p)try{v()}catch{}throw l.auth._errorFactory.create("login-blocked",{originalMessage:m?.message})}})()}}function Ka(){return(Ka=(0,I.Z)(function*(h,c={}){return U(h,"GET","/v2/passwordPolicy",Y(h,c))})).apply(this,arguments)}class VA{constructor(c){var l,p,m,v;const w=c.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(l=w.minPasswordLength)&&void 0!==l?l:6,w.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=w.maxPasswordLength),void 0!==w.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=w.containsLowercaseCharacter),void 0!==w.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=w.containsUppercaseCharacter),void 0!==w.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=w.containsNumericCharacter),void 0!==w.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=w.containsNonAlphanumericCharacter),this.enforcementState=c.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(m=null===(p=c.allowedNonAlphanumericCharacters)||void 0===p?void 0:p.join(""))&&void 0!==m?m:"",this.forceUpgradeOnSignin=null!==(v=c.forceUpgradeOnSignin)&&void 0!==v&&v,this.schemaVersion=c.schemaVersion}validatePassword(c){var l,p,m,v,w,P;const q={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(c,q),this.validatePasswordCharacterOptions(c,q),q.isValid&&(q.isValid=null===(l=q.meetsMinPasswordLength)||void 0===l||l),q.isValid&&(q.isValid=null===(p=q.meetsMaxPasswordLength)||void 0===p||p),q.isValid&&(q.isValid=null===(m=q.containsLowercaseLetter)||void 0===m||m),q.isValid&&(q.isValid=null===(v=q.containsUppercaseLetter)||void 0===v||v),q.isValid&&(q.isValid=null===(w=q.containsNumericCharacter)||void 0===w||w),q.isValid&&(q.isValid=null===(P=q.containsNonAlphanumericCharacter)||void 0===P||P),q}validatePasswordLengthOptions(c,l){const p=this.customStrengthOptions.minPasswordLength,m=this.customStrengthOptions.maxPasswordLength;p&&(l.meetsMinPasswordLength=c.length>=p),m&&(l.meetsMaxPasswordLength=c.length<=m)}validatePasswordCharacterOptions(c,l){let p;this.updatePasswordCharacterOptionsStatuses(l,!1,!1,!1,!1);for(let m=0;m<c.length;m++)p=c.charAt(m),this.updatePasswordCharacterOptionsStatuses(l,p>="a"&&p<="z",p>="A"&&p<="Z",p>="0"&&p<="9",this.allowedNonAlphanumericCharacters.includes(p))}updatePasswordCharacterOptionsStatuses(c,l,p,m,v){this.customStrengthOptions.containsLowercaseLetter&&(c.containsLowercaseLetter||(c.containsLowercaseLetter=l)),this.customStrengthOptions.containsUppercaseLetter&&(c.containsUppercaseLetter||(c.containsUppercaseLetter=p)),this.customStrengthOptions.containsNumericCharacter&&(c.containsNumericCharacter||(c.containsNumericCharacter=m)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(c.containsNonAlphanumericCharacter||(c.containsNonAlphanumericCharacter=v))}}class Qv{constructor(c,l,p,m){this.app=c,this.heartbeatServiceProvider=l,this.appCheckServiceProvider=p,this.config=m,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ms(this),this.idTokenSubscription=new ms(this),this.beforeStateQueue=new FA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ke,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=m.sdkClientVersion}_initializeWithPersistence(c,l){var p=this;return l&&(this._popupRedirectResolver=qe(l)),this._initializationPromise=this.queue((0,I.Z)(function*(){var m,v;if(!p._deleted&&(p.persistenceManager=yield ge.create(p,c),!p._deleted)){if(null!==(m=p._popupRedirectResolver)&&void 0!==m&&m._shouldInitProactively)try{yield p._popupRedirectResolver._initialize(p)}catch{}yield p.initializeCurrentUser(l),p.lastNotifiedUid=(null===(v=p.currentUser)||void 0===v?void 0:v.uid)||null,!p._deleted&&(p._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,I.Z)(function*(){if(c._deleted)return;const l=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||l){if(c.currentUser&&l&&c.currentUser.uid===l.uid)return c._currentUser._assign(l),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(l,!0)}})()}initializeCurrentUser(c){var l=this;return(0,I.Z)(function*(){var p;const m=yield l.assertedPersistence.getCurrentUser();let v=m,w=!1;if(c&&l.config.authDomain){yield l.getOrInitRedirectPersistenceManager();const P=null===(p=l.redirectUser)||void 0===p?void 0:p._redirectEventId,q=v?._redirectEventId,oe=yield l.tryRedirectSignIn(c);(!P||P===q)&&oe?.user&&(v=oe.user,w=!0)}if(!v)return l.directlySetCurrentUser(null);if(!v._redirectEventId){if(w)try{yield l.beforeStateQueue.runMiddleware(v)}catch(P){v=m,l._popupRedirectResolver._overrideRedirectResult(l,()=>Promise.reject(P))}return v?l.reloadAndSetCurrentUserOrClear(v):l.directlySetCurrentUser(null)}return Z(l._popupRedirectResolver,l,"argument-error"),yield l.getOrInitRedirectPersistenceManager(),l.redirectUser&&l.redirectUser._redirectEventId===v._redirectEventId?l.directlySetCurrentUser(v):l.reloadAndSetCurrentUserOrClear(v)})()}tryRedirectSignIn(c){var l=this;return(0,I.Z)(function*(){let p=null;try{p=yield l._popupRedirectResolver._completeRedirectFn(l,c,!0)}catch{yield l._setRedirectUser(null)}return p})()}reloadAndSetCurrentUserOrClear(c){var l=this;return(0,I.Z)(function*(){try{yield Gn(c)}catch(p){if("auth/network-request-failed"!==p?.code)return l.directlySetCurrentUser(null)}return l.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function eo(){if(typeof navigator>"u")return null;const h=navigator;return h.languages&&h.languages[0]||h.language||null}()}_delete(){var c=this;return(0,I.Z)(function*(){c._deleted=!0})()}updateCurrentUser(c){var l=this;return(0,I.Z)(function*(){const p=c?(0,B.m9)(c):null;return p&&Z(p.auth.config.apiKey===l.config.apiKey,l,"invalid-user-token"),l._updateCurrentUser(p&&p._clone(l))})()}_updateCurrentUser(c,l=!1){var p=this;return(0,I.Z)(function*(){if(!p._deleted)return c&&Z(p.tenantId===c.tenantId,p,"tenant-id-mismatch"),l||(yield p.beforeStateQueue.runMiddleware(c)),p.queue((0,I.Z)(function*(){yield p.directlySetCurrentUser(c),p.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,I.Z)(function*(){return yield c.beforeStateQueue.runMiddleware(null),(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null,!0)})()}setPersistence(c){var l=this;return this.queue((0,I.Z)(function*(){yield l.assertedPersistence.setPersistence(qe(c))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(c){var l=this;return(0,I.Z)(function*(){l._getPasswordPolicyInternal()||(yield l._updatePasswordPolicy());const p=l._getPasswordPolicyInternal();return p.schemaVersion!==l.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(l._errorFactory.create("unsupported-password-policy-schema-version",{})):p.validatePassword(c)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var c=this;return(0,I.Z)(function*(){const l=yield function Kv(h){return Ka.apply(this,arguments)}(c),p=new VA(l);null===c.tenantId?c._projectPasswordPolicy=p:c._tenantPasswordPolicies[c.tenantId]=p})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new B.LL("auth","Firebase",c())}onAuthStateChanged(c,l,p){return this.registerStateListener(this.authStateSubscription,c,l,p)}beforeAuthStateChanged(c,l){return this.beforeStateQueue.pushCallback(c,l)}onIdTokenChanged(c,l,p){return this.registerStateListener(this.idTokenSubscription,c,l,p)}authStateReady(){return new Promise((c,l)=>{if(this.currentUser)c();else{const p=this.onAuthStateChanged(()=>{p(),c()},l)}})}revokeAccessToken(c){var l=this;return(0,I.Z)(function*(){if(l.currentUser){const p=yield l.currentUser.getIdToken(),m={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:c,idToken:p};null!=l.tenantId&&(m.tenantId=l.tenantId),yield function T(h,c){return A.apply(this,arguments)}(l,m)}})()}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,l){var p=this;return(0,I.Z)(function*(){const m=yield p.getOrInitRedirectPersistenceManager(l);return null===c?m.removeCurrentUser():m.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var l=this;return(0,I.Z)(function*(){if(!l.redirectPersistenceManager){const p=c&&qe(c)||l._popupRedirectResolver;Z(p,l,"argument-error"),l.redirectPersistenceManager=yield ge.create(l,[qe(p._redirectPersistence)],"redirectUser"),l.redirectUser=yield l.redirectPersistenceManager.getCurrentUser()}return l.redirectPersistenceManager})()}_redirectUserForId(c){var l=this;return(0,I.Z)(function*(){var p,m;return l._isInitialized&&(yield l.queue((0,I.Z)(function*(){}))),(null===(p=l._currentUser)||void 0===p?void 0:p._redirectEventId)===c?l._currentUser:(null===(m=l.redirectUser)||void 0===m?void 0:m._redirectEventId)===c?l.redirectUser:null})()}_persistUserIfCurrent(c){var l=this;return(0,I.Z)(function*(){if(c===l.currentUser)return l.queue((0,I.Z)(function*(){return l.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,l;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const p=null!==(l=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==l?l:null;this.lastNotifiedUid!==p&&(this.lastNotifiedUid=p,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,l,p,m){if(this._deleted)return()=>{};const v="function"==typeof l?l:l.next.bind(l);let w=!1;const P=this._isInitialized?Promise.resolve():this._initializationPromise;if(Z(P,this,"internal-error"),P.then(()=>{w||v(this.currentUser)}),"function"==typeof l){const q=c.addObserver(l,p,m);return()=>{w=!0,q()}}{const q=c.addObserver(l);return()=>{w=!0,q()}}}directlySetCurrentUser(c){var l=this;return(0,I.Z)(function*(){l.currentUser&&l.currentUser!==c&&l._currentUser._stopProactiveRefresh(),c&&l.isProactiveRefreshEnabled&&c._startProactiveRefresh(),l.currentUser=c,c?yield l.assertedPersistence.setCurrentUser(c):yield l.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return Z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=qo(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,I.Z)(function*(){var l;const p={"X-Client-Version":c.clientVersion};c.app.options.appId&&(p["X-Firebase-gmpid"]=c.app.options.appId);const m=yield null===(l=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===l?void 0:l.getHeartbeatsHeader();m&&(p["X-Firebase-Client"]=m);const v=yield c._getAppCheckToken();return v&&(p["X-Firebase-AppCheck"]=v),p})()}_getAppCheckToken(){var c=this;return(0,I.Z)(function*(){var l;const p=yield null===(l=c.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===l?void 0:l.getToken();return p?.error&&function Nn(h,...c){xn.logLevel<=dt.in.WARN&&xn.warn(`Auth (${Ne.SDK_VERSION}): ${h}`,...c)}(`Error while retrieving App Check token: ${p.error}`),p?.token})()}}function Lt(h){return(0,B.m9)(h)}class ms{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,B.ne)(l=>this.observer=l)}get next(){return Z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function mg(h){return new Promise((c,l)=>{const p=document.createElement("script");p.setAttribute("src",h),p.onload=c,p.onerror=m=>{const v=At("internal-error");v.customData=m,l(v)},p.type="text/javascript",p.charset="UTF-8",function UA(){var h,c;return null!==(c=null===(h=document.getElementsByTagName("head"))||void 0===h?void 0:h[0])&&void 0!==c?c:document}().appendChild(p)})}function Yv(h){return`__${h}${Math.floor(1e6*Math.random())}`}class _g{constructor(c){this.type="recaptcha-enterprise",this.auth=Lt(c)}verify(c="verify",l=!1){var p=this;return(0,I.Z)(function*(){function v(){return v=(0,I.Z)(function*(P){if(!l){if(null==P.tenantId&&null!=P._agentRecaptchaConfig)return P._agentRecaptchaConfig.siteKey;if(null!=P.tenantId&&void 0!==P._tenantRecaptchaConfigs[P.tenantId])return P._tenantRecaptchaConfigs[P.tenantId].siteKey}return new Promise(function(){var q=(0,I.Z)(function*(oe,fe){En(P,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(ye=>{if(void 0!==ye.recaptchaKey){const en=new Pr(ye);return null==P.tenantId?P._agentRecaptchaConfig=en:P._tenantRecaptchaConfigs[P.tenantId]=en,oe(en.siteKey)}fe(new Error("recaptcha Enterprise site key undefined"))}).catch(ye=>{fe(ye)})});return function(oe,fe){return q.apply(this,arguments)}}())}),v.apply(this,arguments)}function w(P,q,oe){const fe=window.grecaptcha;hr(fe)?fe.enterprise.ready(()=>{fe.enterprise.execute(P,{action:c}).then(ye=>{q(ye)}).catch(()=>{q("NO_RECAPTCHA")})}):oe(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((P,q)=>{(function m(P){return v.apply(this,arguments)})(p.auth).then(oe=>{if(!l&&hr(window.grecaptcha))w(oe,P,q);else{if(typeof window>"u")return void q(new Error("RecaptchaVerifier is only supported in browser"));mg("https://www.google.com/recaptcha/enterprise.js?render="+oe).then(()=>{w(oe,P,q)}).catch(fe=>{q(fe)})}}).catch(oe=>{q(oe)})})})()}}function Xv(h,c,l){return gr.apply(this,arguments)}function gr(){return(gr=(0,I.Z)(function*(h,c,l,p=!1){const m=new _g(h);let v;try{v=yield m.verify(l)}catch{v=yield m.verify(l,!0)}const w=Object.assign({},c);return Object.assign(w,p?{captchaResp:v}:{captchaResponse:v}),Object.assign(w,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(w,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),w})).apply(this,arguments)}function Se(h,c,l,p){return yg.apply(this,arguments)}function yg(){return yg=(0,I.Z)(function*(h,c,l,p){var m;if(null!==(m=h._getRecaptchaConfig())&&void 0!==m&&m.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const v=yield Xv(h,c,l,"getOobCode"===l);return p(h,v)}return p(h,c).catch(function(){var v=(0,I.Z)(function*(w){if("auth/missing-recaptcha-token"===w.code){console.log(`${l} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const P=yield Xv(h,c,l,"getOobCode"===l);return p(h,P)}return Promise.reject(w)});return function(w){return v.apply(this,arguments)}}())}),yg.apply(this,arguments)}function Qa(h){const c=h.indexOf(":");return c<0?"":h.substr(0,c+1)}function qd(h){if(!h)return null;const c=Number(h);return isNaN(c)?null:c}class Zi{constructor(c,l){this.providerId=c,this.signInMethod=l}toJSON(){return $t("not implemented")}_getIdTokenResponse(c){return $t("not implemented")}_linkToIdToken(c,l){return $t("not implemented")}_getReauthenticationResolver(c){return $t("not implemented")}}function Ya(h,c){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,I.Z)(function*(h,c){return U(h,"POST","/v1/accounts:resetPassword",Y(h,c))})).apply(this,arguments)}function zd(){return(zd=(0,I.Z)(function*(h,c){return U(h,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Je(h,c){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,I.Z)(function*(h,c){return U(h,"POST","/v1/accounts:signUp",c)})).apply(this,arguments)}function Wn(){return(Wn=(0,I.Z)(function*(h,c){return U(h,"POST","/v1/accounts:update",Y(h,c))})).apply(this,arguments)}function wg(h,c){return Tg.apply(this,arguments)}function Tg(){return(Tg=(0,I.Z)(function*(h,c){return Ee(h,"POST","/v1/accounts:signInWithPassword",Y(h,c))})).apply(this,arguments)}function _t(h,c){return Dg.apply(this,arguments)}function Dg(){return(Dg=(0,I.Z)(function*(h,c){return U(h,"POST","/v1/accounts:sendOobCode",Y(h,c))})).apply(this,arguments)}function ce(){return(ce=(0,I.Z)(function*(h,c){return _t(h,c)})).apply(this,arguments)}function Gd(h,c){return eu.apply(this,arguments)}function eu(){return(eu=(0,I.Z)(function*(h,c){return _t(h,c)})).apply(this,arguments)}function Cg(h,c){return tu.apply(this,arguments)}function tu(){return(tu=(0,I.Z)(function*(h,c){return _t(h,c)})).apply(this,arguments)}function nu(){return(nu=(0,I.Z)(function*(h,c){return _t(h,c)})).apply(this,arguments)}function Ag(){return(Ag=(0,I.Z)(function*(h,c){return Ee(h,"POST","/v1/accounts:signInWithEmailLink",Y(h,c))})).apply(this,arguments)}function bg(){return(bg=(0,I.Z)(function*(h,c){return Ee(h,"POST","/v1/accounts:signInWithEmailLink",Y(h,c))})).apply(this,arguments)}class yc extends Zi{constructor(c,l,p,m=null){super("password",p),this._email=c,this._password=l,this._tenantId=m}static _fromEmailAndPassword(c,l){return new yc(c,l,"password")}static _fromEmailAndCode(c,l,p=null){return new yc(c,l,"emailLink",p)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c;if(l?.email&&l?.password){if("password"===l.signInMethod)return this._fromEmailAndPassword(l.email,l.password);if("emailLink"===l.signInMethod)return this._fromEmailAndCode(l.email,l.password,l.tenantId)}return null}_getIdTokenResponse(c){var l=this;return(0,I.Z)(function*(){switch(l.signInMethod){case"password":return Se(c,{returnSecureToken:!0,email:l._email,password:l._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",wg);case"emailLink":return function zA(h,c){return Ag.apply(this,arguments)}(c,{email:l._email,oobCode:l._password});default:mt(c,"internal-error")}})()}_linkToIdToken(c,l){var p=this;return(0,I.Z)(function*(){switch(p.signInMethod){case"password":return Se(c,{idToken:l,returnSecureToken:!0,email:p._email,password:p._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Je);case"emailLink":return function GA(h,c){return bg.apply(this,arguments)}(c,{idToken:l,email:p._email,oobCode:p._password});default:mt(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function Nr(h,c){return ru.apply(this,arguments)}function ru(){return(ru=(0,I.Z)(function*(h,c){return Ee(h,"POST","/v1/accounts:signInWithIdp",Y(h,c))})).apply(this,arguments)}class wi extends Zi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const l=new wi(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(l.idToken=c.idToken),c.accessToken&&(l.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(l.nonce=c.nonce),c.pendingToken&&(l.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(l.accessToken=c.oauthToken,l.secret=c.oauthTokenSecret):mt("argument-error"),l}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c,{providerId:p,signInMethod:m}=l,v=(0,jt._T)(l,["providerId","signInMethod"]);if(!p||!m)return null;const w=new wi(p,m);return w.idToken=v.idToken||void 0,w.accessToken=v.accessToken||void 0,w.secret=v.secret,w.nonce=v.nonce,w.pendingToken=v.pendingToken||null,w}_getIdTokenResponse(c){return Nr(c,this.buildRequest())}_linkToIdToken(c,l){const p=this.buildRequest();return p.idToken=l,Nr(c,p)}_getReauthenticationResolver(c){const l=this.buildRequest();return l.autoCreate=!1,Nr(c,l)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const l={};this.idToken&&(l.id_token=this.idToken),this.accessToken&&(l.access_token=this.accessToken),this.secret&&(l.oauth_token_secret=this.secret),l.providerId=this.providerId,this.nonce&&!this.pendingToken&&(l.nonce=this.nonce),c.postBody=(0,B.xO)(l)}return c}}function Wd(){return(Wd=(0,I.Z)(function*(h,c){return U(h,"POST","/v1/accounts:sendVerificationCode",Y(h,c))})).apply(this,arguments)}function _s(){return(_s=(0,I.Z)(function*(h,c){return Ee(h,"POST","/v1/accounts:signInWithPhoneNumber",Y(h,c))})).apply(this,arguments)}function Ti(){return(Ti=(0,I.Z)(function*(h,c){const l=yield Ee(h,"POST","/v1/accounts:signInWithPhoneNumber",Y(h,c));if(l.temporaryProof)throw In(h,"account-exists-with-different-credential",l);return l})).apply(this,arguments)}const sI={USER_NOT_FOUND:"user-not-found"};function Ic(){return(Ic=(0,I.Z)(function*(h,c){return Ee(h,"POST","/v1/accounts:signInWithPhoneNumber",Y(h,Object.assign(Object.assign({},c),{operation:"REAUTH"})),sI)})).apply(this,arguments)}class he extends Zi{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,l){return new he({verificationId:c,verificationCode:l})}static _fromTokenResponse(c,l){return new he({phoneNumber:c,temporaryProof:l})}_getIdTokenResponse(c){return function Sg(h,c){return _s.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,l){return function iI(h,c){return Ti.apply(this,arguments)}(c,Object.assign({idToken:l},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function re(h,c){return Ic.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:l,verificationId:p,verificationCode:m}=this.params;return c&&l?{temporaryProof:c,phoneNumber:l}:{sessionInfo:p,code:m}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:l,verificationCode:p,phoneNumber:m,temporaryProof:v}=c;return p||l||m||v?new he({verificationId:l,verificationCode:p,phoneNumber:m,temporaryProof:v}):null}}class Ki{constructor(c){var l,p,m,v,w,P;const q=(0,B.zd)((0,B.pd)(c)),oe=null!==(l=q.apiKey)&&void 0!==l?l:null,fe=null!==(p=q.oobCode)&&void 0!==p?p:null,ye=function Ec(h){switch(h){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(m=q.mode)&&void 0!==m?m:null);Z(oe&&fe&&ye,"argument-error"),this.apiKey=oe,this.operation=ye,this.code=fe,this.continueUrl=null!==(v=q.continueUrl)&&void 0!==v?v:null,this.languageCode=null!==(w=q.languageCode)&&void 0!==w?w:null,this.tenantId=null!==(P=q.tenantId)&&void 0!==P?P:null}static parseLink(c){const l=function Zd(h){const c=(0,B.zd)((0,B.pd)(h)).link,l=c?(0,B.zd)((0,B.pd)(c)).deep_link_id:null,p=(0,B.zd)((0,B.pd)(h)).deep_link_id;return(p?(0,B.zd)((0,B.pd)(p)).link:null)||p||l||c||h}(c);try{return new Ki(l)}catch{return null}}}let Kd=(()=>{class h{constructor(){this.providerId=h.PROVIDER_ID}static credential(l,p){return yc._fromEmailAndPassword(l,p)}static credentialWithLink(l,p){const m=Ki.parseLink(p);return Z(m,"argument-error"),yc._fromEmailAndCode(l,m.code,m.tenantId)}}return h.PROVIDER_ID="password",h.EMAIL_PASSWORD_SIGN_IN_METHOD="password",h.EMAIL_LINK_SIGN_IN_METHOD="emailLink",h})();class Qi{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class _r extends Qi{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class Yi extends _r{static credentialFromJSON(c){const l="string"==typeof c?JSON.parse(c):c;return Z("providerId"in l&&"signInMethod"in l,"argument-error"),wi._fromParams(l)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return Z(c.idToken||c.accessToken,"argument-error"),wi._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return Yi.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return Yi.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:l,oauthAccessToken:p,oauthTokenSecret:m,pendingToken:v,nonce:w,providerId:P}=c;if(!p&&!m&&!l&&!v||!P)return null;try{return new Yi(P)._credential({idToken:l,accessToken:p,nonce:w,pendingToken:v})}catch{return null}}}let Jr=(()=>{class h extends _r{constructor(){super("facebook.com")}static credential(l){return wi._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.FACEBOOK_SIGN_IN_METHOD,accessToken:l})}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l||!("oauthAccessToken"in l)||!l.oauthAccessToken)return null;try{return h.credential(l.oauthAccessToken)}catch{return null}}}return h.FACEBOOK_SIGN_IN_METHOD="facebook.com",h.PROVIDER_ID="facebook.com",h})(),ci=(()=>{class h extends _r{constructor(){super("google.com"),this.addScope("profile")}static credential(l,p){return wi._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.GOOGLE_SIGN_IN_METHOD,idToken:l,accessToken:p})}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthIdToken:p,oauthAccessToken:m}=l;if(!p&&!m)return null;try{return h.credential(p,m)}catch{return null}}}return h.GOOGLE_SIGN_IN_METHOD="google.com",h.PROVIDER_ID="google.com",h})(),ct=(()=>{class h extends _r{constructor(){super("github.com")}static credential(l){return wi._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.GITHUB_SIGN_IN_METHOD,accessToken:l})}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l||!("oauthAccessToken"in l)||!l.oauthAccessToken)return null;try{return h.credential(l.oauthAccessToken)}catch{return null}}}return h.GITHUB_SIGN_IN_METHOD="github.com",h.PROVIDER_ID="github.com",h})();class ys extends Zi{constructor(c,l){super(c,c),this.pendingToken=l}_getIdTokenResponse(c){return Nr(c,this.buildRequest())}_linkToIdToken(c,l){const p=this.buildRequest();return p.idToken=l,Nr(c,p)}_getReauthenticationResolver(c){const l=this.buildRequest();return l.autoCreate=!1,Nr(c,l)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c,{providerId:p,signInMethod:m,pendingToken:v}=l;return p&&m&&v&&p===m?new ys(p,v):null}static _create(c,l){return new ys(c,l)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class iu extends Qi{constructor(c){Z(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return iu.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return iu.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const l=ys.fromJSON(c);return Z(l,"argument-error"),l}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:l,providerId:p}=c;if(!l||!p)return null;try{return ys._create(p,l)}catch{return null}}}let Di=(()=>{class h extends _r{constructor(){super("twitter.com")}static credential(l,p){return wi._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.TWITTER_SIGN_IN_METHOD,oauthToken:l,oauthTokenSecret:p})}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthAccessToken:p,oauthTokenSecret:m}=l;if(!p||!m)return null;try{return h.credential(p,m)}catch{return null}}}return h.TWITTER_SIGN_IN_METHOD="twitter.com",h.PROVIDER_ID="twitter.com",h})();function zo(h,c){return Tc.apply(this,arguments)}function Tc(){return(Tc=(0,I.Z)(function*(h,c){return Ee(h,"POST","/v1/accounts:signUp",Y(h,c))})).apply(this,arguments)}class Mr{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,l,p,m=!1){return(0,I.Z)(function*(){const v=yield $._fromIdTokenResponse(c,p,m),w=Dc(p);return new Mr({user:v,providerId:w,_tokenResponse:p,operationType:l})})()}static _forOperation(c,l,p){return(0,I.Z)(function*(){yield c._updateTokensIfNecessary(p,!0);const m=Dc(p);return new Mr({user:c,providerId:m,_tokenResponse:p,operationType:l})})()}}function Dc(h){return h.providerId?h.providerId:"phoneNumber"in h?"phone":null}function Cc(){return(Cc=(0,I.Z)(function*(h){var c;const l=Lt(h);if(yield l._initializationPromise,null!==(c=l.currentUser)&&void 0!==c&&c.isAnonymous)return new Mr({user:l.currentUser,providerId:null,operationType:"signIn"});const p=yield zo(l,{returnSecureToken:!0}),m=yield Mr._fromIdTokenResponse(l,"signIn",p,!0);return yield l._updateCurrentUser(m.user),m})).apply(this,arguments)}class vs extends B.ZR{constructor(c,l,p,m){var v;super(l.code,l.message),this.operationType=p,this.user=m,Object.setPrototypeOf(this,vs.prototype),this.customData={appName:c.name,tenantId:null!==(v=c.tenantId)&&void 0!==v?v:void 0,_serverResponse:l.customData._serverResponse,operationType:p}}static _fromErrorAndOperation(c,l,p,m){return new vs(c,l,p,m)}}function Yd(h,c,l,p){return("reauthenticate"===c?l._getReauthenticationResolver(h):l._getIdTokenResponse(h)).catch(v=>{throw"auth/multi-factor-auth-required"===v.code?vs._fromErrorAndOperation(h,v,c,p):v})}function Jd(h){return new Set(h.map(({providerId:c})=>c).filter(c=>!!c))}function Ac(){return Ac=(0,I.Z)(function*(h,c){const l=(0,B.m9)(h);yield yr(!0,l,c);const{providerUserInfo:p}=yield function Ga(h,c){return fr.apply(this,arguments)}(l.auth,{idToken:yield l.getIdToken(),deleteProvider:[c]}),m=Jd(p||[]);return l.providerData=l.providerData.filter(v=>m.has(v.providerId)),m.has("phone")||(l.phoneNumber=null),yield l.auth._persistUserIfCurrent(l),l}),Ac.apply(this,arguments)}function Xd(h,c){return eh.apply(this,arguments)}function eh(){return(eh=(0,I.Z)(function*(h,c,l=!1){const p=yield Yr(h,c._linkToIdToken(h.auth,yield h.getIdToken()),l);return Mr._forOperation(h,"link",p)})).apply(this,arguments)}function yr(h,c,l){return th.apply(this,arguments)}function th(){return(th=(0,I.Z)(function*(h,c,l){yield Gn(c);const m=!1===h?"provider-already-linked":"no-such-provider";Z(Jd(c.providerData).has(l)===h,c.auth,m)})).apply(this,arguments)}function nh(h,c){return rh.apply(this,arguments)}function rh(){return(rh=(0,I.Z)(function*(h,c,l=!1){const{auth:p}=h,m="reauthenticate";try{const v=yield Yr(h,Yd(p,m,c,h),l);Z(v.idToken,p,"internal-error");const w=Bo(v.idToken);Z(w,p,"internal-error");const{sub:P}=w;return Z(h.uid===P,p,"user-mismatch"),Mr._forOperation(h,m,v)}catch(v){throw"auth/user-not-found"===v?.code&&mt(p,"user-mismatch"),v}})).apply(this,arguments)}function Pg(h,c){return ih.apply(this,arguments)}function ih(){return(ih=(0,I.Z)(function*(h,c,l=!1){const p="signIn",m=yield Yd(h,p,c),v=yield Mr._fromIdTokenResponse(h,p,m);return l||(yield h._updateCurrentUser(v.user)),v})).apply(this,arguments)}function bc(h,c){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,I.Z)(function*(h,c){return Pg(Lt(h),c)})).apply(this,arguments)}function xg(h,c){return sh.apply(this,arguments)}function sh(){return(sh=(0,I.Z)(function*(h,c){const l=(0,B.m9)(h);return yield yr(!1,l,c.providerId),Xd(l,c)})).apply(this,arguments)}function Ng(h,c){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,I.Z)(function*(h,c){return nh((0,B.m9)(h),c)})).apply(this,arguments)}function oh(){return(oh=(0,I.Z)(function*(h,c){return Ee(h,"POST","/v1/accounts:signInWithCustomToken",Y(h,c))})).apply(this,arguments)}function vr(){return vr=(0,I.Z)(function*(h,c){const l=Lt(h),p=yield function aI(h,c){return oh.apply(this,arguments)}(l,{token:c,returnSecureToken:!0}),m=yield Mr._fromIdTokenResponse(l,"signIn",p);return yield l._updateCurrentUser(m.user),m}),vr.apply(this,arguments)}class su{constructor(c,l){this.factorId=c,this.uid=l.mfaEnrollmentId,this.enrollmentTime=new Date(l.enrolledAt).toUTCString(),this.displayName=l.displayName}static _fromServerResponse(c,l){return"phoneInfo"in l?Rc._fromServerResponse(c,l):"totpInfo"in l?On._fromServerResponse(c,l):mt(c,"internal-error")}}class Rc extends su{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,l){return new Rc(l)}}class On extends su{constructor(c){super("totp",c)}static _fromServerResponse(c,l){return new On(l)}}function kn(h,c,l){var p;Z((null===(p=l.url)||void 0===p?void 0:p.length)>0,h,"invalid-continue-uri"),Z(typeof l.dynamicLinkDomain>"u"||l.dynamicLinkDomain.length>0,h,"invalid-dynamic-link-domain"),c.continueUrl=l.url,c.dynamicLinkDomain=l.dynamicLinkDomain,c.canHandleCodeInApp=l.handleCodeInApp,l.iOS&&(Z(l.iOS.bundleId.length>0,h,"missing-ios-bundle-id"),c.iOSBundleId=l.iOS.bundleId),l.android&&(Z(l.android.packageName.length>0,h,"missing-android-pkg-name"),c.androidInstallApp=l.android.installApp,c.androidMinimumVersionCode=l.android.minimumVersion,c.androidPackageName=l.android.packageName)}function et(h){return pn.apply(this,arguments)}function pn(){return(pn=(0,I.Z)(function*(h){const c=Lt(h);c._getPasswordPolicyInternal()&&(yield c._updatePasswordPolicy())})).apply(this,arguments)}function Is(){return(Is=(0,I.Z)(function*(h,c,l){const p=Lt(h),m={requestType:"PASSWORD_RESET",email:c,clientType:"CLIENT_TYPE_WEB"};l&&kn(p,m,l),yield Se(p,m,"getOobCode",Gd)})).apply(this,arguments)}function Pc(){return Pc=(0,I.Z)(function*(h,c,l){yield Ya((0,B.m9)(h),{oobCode:c,newPassword:l}).catch(function(){var p=(0,I.Z)(function*(m){throw"auth/password-does-not-meet-requirements"===m.code&&et(h),m});return function(m){return p.apply(this,arguments)}}())}),Pc.apply(this,arguments)}function Go(){return Go=(0,I.Z)(function*(h,c){yield function Eg(h,c){return Wn.apply(this,arguments)}((0,B.m9)(h),{oobCode:c})}),Go.apply(this,arguments)}function Og(h,c){return ah.apply(this,arguments)}function ah(){return(ah=(0,I.Z)(function*(h,c){const l=(0,B.m9)(h),p=yield Ya(l,{oobCode:c}),m=p.requestType;switch(Z(m,l,"internal-error"),m){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Z(p.newEmail,l,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Z(p.mfaInfo,l,"internal-error");default:Z(p.email,l,"internal-error")}let v=null;return p.mfaInfo&&(v=su._fromServerResponse(Lt(l),p.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===p.requestType?p.newEmail:p.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===p.requestType?p.email:p.newEmail)||null,multiFactorInfo:v},operation:m}})).apply(this,arguments)}function ue(){return(ue=(0,I.Z)(function*(h,c){const{data:l}=yield Og((0,B.m9)(h),c);return l.email})).apply(this,arguments)}function bt(){return(bt=(0,I.Z)(function*(h,c,l){const p=Lt(h),w=yield Se(p,{returnSecureToken:!0,email:c,password:l,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",zo).catch(q=>{throw"auth/password-does-not-meet-requirements"===q.code&&et(h),q}),P=yield Mr._fromIdTokenResponse(p,"signIn",w);return yield p._updateCurrentUser(P.user),P})).apply(this,arguments)}function Dn(){return(Dn=(0,I.Z)(function*(h,c,l){const p=Lt(h),m={requestType:"EMAIL_SIGNIN",email:c,clientType:"CLIENT_TYPE_WEB"};(function v(w,P){Z(P.handleCodeInApp,p,"argument-error"),P&&kn(p,w,P)})(m,l),yield Se(p,m,"getOobCode",Cg)})).apply(this,arguments)}function Ci(){return(Ci=(0,I.Z)(function*(h,c,l){const p=(0,B.m9)(h),m=Kd.credentialWithLink(c,l||fn());return Z(m._tenantId===(p.tenantId||null),p,"tenant-id-mismatch"),bc(p,m)})).apply(this,arguments)}function Oe(){return(Oe=(0,I.Z)(function*(h,c){return U(h,"POST","/v1/accounts:createAuthUri",Y(h,c))})).apply(this,arguments)}function xc(){return xc=(0,I.Z)(function*(h,c){const p={identifier:c,continueUri:yi()?fn():"http://localhost"},{signinMethods:m}=yield function Zo(h,c){return Oe.apply(this,arguments)}((0,B.m9)(h),p);return m||[]}),xc.apply(this,arguments)}function zt(){return zt=(0,I.Z)(function*(h,c){const l=(0,B.m9)(h),m={requestType:"VERIFY_EMAIL",idToken:yield h.getIdToken()};c&&kn(l.auth,m,c);const{email:v}=yield function qA(h,c){return ce.apply(this,arguments)}(l.auth,m);v!==h.email&&(yield h.reload())}),zt.apply(this,arguments)}function Es(){return Es=(0,I.Z)(function*(h,c,l){const p=(0,B.m9)(h),v={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield h.getIdToken(),newEmail:c};l&&kn(p.auth,v,l);const{email:w}=yield function nI(h,c){return nu.apply(this,arguments)}(p.auth,v);w!==h.email&&(yield h.reload())}),Es.apply(this,arguments)}function no(){return(no=(0,I.Z)(function*(h,c){return U(h,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function bi(){return bi=(0,I.Z)(function*(h,{displayName:c,photoURL:l}){if(void 0===c&&void 0===l)return;const p=(0,B.m9)(h),v={idToken:yield p.getIdToken(),displayName:c,photoUrl:l,returnSecureToken:!0},w=yield Yr(p,function Ai(h,c){return no.apply(this,arguments)}(p.auth,v));p.displayName=w.displayName||null,p.photoURL=w.photoUrl||null;const P=p.providerData.find(({providerId:q})=>"password"===q);P&&(P.displayName=p.displayName,P.photoURL=p.photoURL),yield p._updateTokensIfNecessary(w)}),bi.apply(this,arguments)}function Qo(h,c,l){return We.apply(this,arguments)}function We(){return We=(0,I.Z)(function*(h,c,l){const{auth:p}=h,v={idToken:yield h.getIdToken(),returnSecureToken:!0};c&&(v.email=c),l&&(v.password=l);const w=yield Yr(h,function Ig(h,c){return zd.apply(this,arguments)}(p,v));yield h._updateTokensIfNecessary(w,!0)}),We.apply(this,arguments)}class ws{constructor(c,l,p={}){this.isNewUser=c,this.providerId=l,this.profile=p}}class uh extends ws{constructor(c,l,p,m){super(c,l,p),this.username=m}}class Si extends ws{constructor(c,l){super(c,"facebook.com",l)}}class Nc extends uh{constructor(c,l){super(c,"github.com",l,"string"==typeof l?.login?l?.login:null)}}class Yo extends ws{constructor(c,l){super(c,"google.com",l)}}class lu extends uh{constructor(c,l,p){super(c,"twitter.com",l,p)}}function Ln(h){const{user:c,_tokenResponse:l}=h;return c.isAnonymous&&!l?{providerId:null,isNewUser:!1,profile:null}:function ZA(h){var c,l;if(!h)return null;const{providerId:p}=h,m=h.rawUserInfo?JSON.parse(h.rawUserInfo):{},v=h.isNewUser||"identitytoolkit#SignupNewUserResponse"===h.kind;if(!p&&h?.idToken){const w=null===(l=null===(c=Bo(h.idToken))||void 0===c?void 0:c.firebase)||void 0===l?void 0:l.sign_in_provider;if(w)return new ws(v,"anonymous"!==w&&"custom"!==w?w:null)}if(!p)return null;switch(p){case"facebook.com":return new Si(v,m);case"github.com":return new Nc(v,m);case"google.com":return new Yo(v,m);case"twitter.com":return new lu(v,m,h.screenName||null);case"custom":case"anonymous":return new ws(v,null);default:return new ws(v,p,m)}}(l)}class Jo{constructor(c,l,p){this.type=c,this.credential=l,this.user=p}static _fromIdtoken(c,l){return new Jo("enroll",c,l)}static _fromMfaPendingCredential(c){return new Jo("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var l,p;if(c?.multiFactorSession){if(null!==(l=c.multiFactorSession)&&void 0!==l&&l.pendingCredential)return Jo._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null!==(p=c.multiFactorSession)&&void 0!==p&&p.idToken)return Jo._fromIdtoken(c.multiFactorSession.idToken)}return null}}class Fg{constructor(c,l,p){this.session=c,this.hints=l,this.signInResolver=p}static _fromError(c,l){const p=Lt(c),m=l.customData._serverResponse,v=(m.mfaInfo||[]).map(P=>su._fromServerResponse(p,P));Z(m.mfaPendingCredential,p,"internal-error");const w=Jo._fromMfaPendingCredential(m.mfaPendingCredential);return new Fg(w,v,function(){var P=(0,I.Z)(function*(q){const oe=yield q._process(p,w);delete m.mfaInfo,delete m.mfaPendingCredential;const fe=Object.assign(Object.assign({},m),{idToken:oe.idToken,refreshToken:oe.refreshToken});switch(l.operationType){case"signIn":const ye=yield Mr._fromIdTokenResponse(p,l.operationType,fe);return yield p._updateCurrentUser(ye.user),ye;case"reauthenticate":return Z(l.user,p,"internal-error"),Mr._forOperation(l.user,l.operationType,fe);default:mt(p,"internal-error")}});return function(q){return P.apply(this,arguments)}}())}resolveSignIn(c){var l=this;return(0,I.Z)(function*(){return l.signInResolver(c)})()}}class Vg{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(l=>{l.mfaInfo&&(this.enrolledFactors=l.mfaInfo.map(p=>su._fromServerResponse(c.auth,p)))})}static _fromUser(c){return new Vg(c)}getSession(){var c=this;return(0,I.Z)(function*(){return Jo._fromIdtoken(yield c.user.getIdToken(),c.user)})()}enroll(c,l){var p=this;return(0,I.Z)(function*(){const m=c,v=yield p.getSession(),w=yield Yr(p.user,m._process(p.user.auth,v,l));return yield p.user._updateTokensIfNecessary(w),p.user.reload()})()}unenroll(c){var l=this;return(0,I.Z)(function*(){const p="string"==typeof c?c:c.uid,m=yield l.user.getIdToken();try{const v=yield Yr(l.user,function nb(h,c){return U(h,"POST","/v2/accounts/mfaEnrollment:withdraw",Y(h,c))}(l.user.auth,{idToken:m,mfaEnrollmentId:p}));l.enrolledFactors=l.enrolledFactors.filter(({uid:w})=>w!==p),yield l.user._updateTokensIfNecessary(v),yield l.user.reload()}catch(v){throw v}})()}}const Ug=new WeakMap,lh="__sak";class dh{constructor(c,l){this.storageRetriever=c,this.type=l}_isAvailable(){try{return this.storage?(this.storage.setItem(lh,"1"),this.storage.removeItem(lh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(c,l){return this.storage.setItem(c,JSON.stringify(l)),Promise.resolve()}_get(c){const l=this.storage.getItem(c);return Promise.resolve(l?JSON.parse(l):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const Pi=(()=>{class h extends dh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(l,p)=>this.onStorageEvent(l,p),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Bg(){const h=(0,B.z$)();return Ei(h)||Le(h)}()&&function Ke(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=_e(),this._shouldAllowMigration=!0}forAllChangedKeys(l){for(const p of Object.keys(this.listeners)){const m=this.storage.getItem(p),v=this.localCache[p];m!==v&&l(p,v,m)}}onStorageEvent(l,p=!1){if(!l.key)return void this.forAllChangedKeys((P,q,oe)=>{this.notifyListeners(P,oe)});const m=l.key;if(p?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const P=this.storage.getItem(m);if(l.newValue!==P)null!==l.newValue?this.storage.setItem(m,l.newValue):this.storage.removeItem(m);else if(this.localCache[m]===l.newValue&&!p)return}const v=()=>{const P=this.storage.getItem(m);!p&&this.localCache[m]===P||this.notifyListeners(m,P)},w=this.storage.getItem(m);!function Jt(){return(0,B.w1)()&&10===document.documentMode}()||w===l.newValue||l.newValue===l.oldValue?v():setTimeout(v,10)}notifyListeners(l,p){this.localCache[l]=p;const m=this.listeners[l];if(m)for(const v of Array.from(m))v(p&&JSON.parse(p))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((l,p,m)=>{this.onStorageEvent(new StorageEvent("storage",{key:l,oldValue:p,newValue:m}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(l,p){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[l]||(this.listeners[l]=new Set,this.localCache[l]=this.storage.getItem(l)),this.listeners[l].add(p)}_removeListener(l,p){this.listeners[l]&&(this.listeners[l].delete(p),0===this.listeners[l].size&&delete this.listeners[l]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(l,p){var m=()=>super._set,v=this;return(0,I.Z)(function*(){yield m().call(v,l,p),v.localCache[l]=JSON.stringify(p)})()}_get(l){var p=()=>super._get,m=this;return(0,I.Z)(function*(){const v=yield p().call(m,l);return m.localCache[l]=JSON.stringify(v),v})()}_remove(l){var p=()=>super._remove,m=this;return(0,I.Z)(function*(){yield p().call(m,l),delete m.localCache[l]})()}}return h.type="LOCAL",h})(),so=(()=>{class h extends dh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(l,p){}_removeListener(l,p){}}return h.type="SESSION",h})();let Fn=(()=>{class h{constructor(l){this.eventTarget=l,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(l){const p=this.receivers.find(v=>v.isListeningto(l));if(p)return p;const m=new h(l);return this.receivers.push(m),m}isListeningto(l){return this.eventTarget===l}handleEvent(l){var p=this;return(0,I.Z)(function*(){const m=l,{eventId:v,eventType:w,data:P}=m.data,q=p.handlersMap[w];if(!q?.size)return;m.ports[0].postMessage({status:"ack",eventId:v,eventType:w});const oe=Array.from(q).map(function(){var ye=(0,I.Z)(function*(en){return en(m.origin,P)});return function(en){return ye.apply(this,arguments)}}()),fe=yield function ob(h){return Promise.all(h.map(function(){var c=(0,I.Z)(function*(l){try{return{fulfilled:!0,value:yield l}}catch(p){return{fulfilled:!1,reason:p}}});return function(l){return c.apply(this,arguments)}}()))}(oe);m.ports[0].postMessage({status:"done",eventId:v,eventType:w,response:fe})})()}_subscribe(l,p){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[l]||(this.handlersMap[l]=new Set),this.handlersMap[l].add(p)}_unsubscribe(l,p){this.handlersMap[l]&&p&&this.handlersMap[l].delete(p),(!p||0===this.handlersMap[l].size)&&delete this.handlersMap[l],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return h.receivers=[],h})();function Ts(h="",c=10){let l="";for(let p=0;p<c;p++)l+=Math.floor(10*Math.random());return h+l}class Xr{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,l,p=50){var m=this;return(0,I.Z)(function*(){const v=typeof MessageChannel<"u"?new MessageChannel:null;if(!v)throw new Error("connection_unavailable");let w,P;return new Promise((q,oe)=>{const fe=Ts("",20);v.port1.start();const ye=setTimeout(()=>{oe(new Error("unsupported_event"))},p);P={messageChannel:v,onMessage(en){const di=en;if(di.data.eventId===fe)switch(di.data.status){case"ack":clearTimeout(ye),w=setTimeout(()=>{oe(new Error("timeout"))},3e3);break;case"done":clearTimeout(w),q(di.data.response);break;default:clearTimeout(ye),clearTimeout(w),oe(new Error("invalid_response"))}}},m.handlers.add(P),v.port1.addEventListener("message",P.onMessage),m.target.postMessage({eventType:c,eventId:fe,data:l},[v.port2])}).finally(()=>{P&&m.removeMessageHandler(P)})})()}}function on(){return window}function Oc(){return typeof on().WorkerGlobalScope<"u"&&"function"==typeof on().importScripts}function hu(){return(hu=(0,I.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const kc="firebaseLocalStorageDb",fu="firebaseLocalStorage",fh="fbase_key";class Ds{constructor(c){this.request=c}toPromise(){return new Promise((c,l)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{l(this.request.error)})})}}function Cs(h,c){return h.transaction([fu],c?"readwrite":"readonly").objectStore(fu)}function Lc(){const h=indexedDB.open(kc,1);return new Promise((c,l)=>{h.addEventListener("error",()=>{l(h.error)}),h.addEventListener("upgradeneeded",()=>{const p=h.result;try{p.createObjectStore(fu,{keyPath:fh})}catch(m){l(m)}}),h.addEventListener("success",(0,I.Z)(function*(){const p=h.result;p.objectStoreNames.contains(fu)?c(p):(p.close(),yield function Xo(){const h=indexedDB.deleteDatabase(kc);return new Ds(h).toPromise()}(),c(yield Lc()))}))})}function cI(h,c,l){return zg.apply(this,arguments)}function zg(){return(zg=(0,I.Z)(function*(h,c,l){const p=Cs(h,!0).put({[fh]:c,value:l});return new Ds(p).toPromise()})).apply(this,arguments)}function ph(){return(ph=(0,I.Z)(function*(h,c){const l=Cs(h,!1).get(c),p=yield new Ds(l).toPromise();return void 0===p?null:p.value})).apply(this,arguments)}function Gg(h,c){const l=Cs(h,!0).delete(c);return new Ds(l).toPromise()}const ea=(()=>{class h{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var l=this;return(0,I.Z)(function*(){return l.db||(l.db=yield Lc()),l.db})()}_withRetries(l){var p=this;return(0,I.Z)(function*(){let m=0;for(;;)try{const v=yield p._openDb();return yield l(v)}catch(v){if(m++>3)throw v;p.db&&(p.db.close(),p.db=void 0)}})()}initializeServiceWorkerMessaging(){var l=this;return(0,I.Z)(function*(){return Oc()?l.initializeReceiver():l.initializeSender()})()}initializeReceiver(){var l=this;return(0,I.Z)(function*(){l.receiver=Fn._getInstance(function hh(){return Oc()?self:null}()),l.receiver._subscribe("keyChanged",function(){var p=(0,I.Z)(function*(m,v){return{keyProcessed:(yield l._poll()).includes(v.key)}});return function(m,v){return p.apply(this,arguments)}}()),l.receiver._subscribe("ping",function(){var p=(0,I.Z)(function*(m,v){return["keyChanged"]});return function(m,v){return p.apply(this,arguments)}}())})()}initializeSender(){var l=this;return(0,I.Z)(function*(){var p,m;if(l.activeServiceWorker=yield function $g(){return hu.apply(this,arguments)}(),!l.activeServiceWorker)return;l.sender=new Xr(l.activeServiceWorker);const v=yield l.sender._send("ping",{},800);v&&null!==(p=v[0])&&void 0!==p&&p.fulfilled&&null!==(m=v[0])&&void 0!==m&&m.value.includes("keyChanged")&&(l.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(l){var p=this;return(0,I.Z)(function*(){if(p.sender&&p.activeServiceWorker&&function Hg(){var h;return(null===(h=navigator?.serviceWorker)||void 0===h?void 0:h.controller)||null}()===p.activeServiceWorker)try{yield p.sender._send("keyChanged",{key:l},p.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,I.Z)(function*(){try{if(!indexedDB)return!1;const l=yield Lc();return yield cI(l,lh,"1"),yield Gg(l,lh),!0}catch{}return!1})()}_withPendingWrite(l){var p=this;return(0,I.Z)(function*(){p.pendingWrites++;try{yield l()}finally{p.pendingWrites--}})()}_set(l,p){var m=this;return(0,I.Z)(function*(){return m._withPendingWrite((0,I.Z)(function*(){return yield m._withRetries(v=>cI(v,l,p)),m.localCache[l]=p,m.notifyServiceWorker(l)}))})()}_get(l){var p=this;return(0,I.Z)(function*(){const m=yield p._withRetries(v=>function ab(h,c){return ph.apply(this,arguments)}(v,l));return p.localCache[l]=m,m})()}_remove(l){var p=this;return(0,I.Z)(function*(){return p._withPendingWrite((0,I.Z)(function*(){return yield p._withRetries(m=>Gg(m,l)),delete p.localCache[l],p.notifyServiceWorker(l)}))})()}_poll(){var l=this;return(0,I.Z)(function*(){const p=yield l._withRetries(w=>{const P=Cs(w,!1).getAll();return new Ds(P).toPromise()});if(!p)return[];if(0!==l.pendingWrites)return[];const m=[],v=new Set;for(const{fbase_key:w,value:P}of p)v.add(w),JSON.stringify(l.localCache[w])!==JSON.stringify(P)&&(l.notifyListeners(w,P),m.push(w));for(const w of Object.keys(l.localCache))l.localCache[w]&&!v.has(w)&&(l.notifyListeners(w,null),m.push(w));return m})()}notifyListeners(l,p){this.localCache[l]=p;const m=this.listeners[l];if(m)for(const v of Array.from(m))v(p)}startPolling(){var l=this;this.stopPolling(),this.pollTimer=setInterval((0,I.Z)(function*(){return l._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(l,p){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[l]||(this.listeners[l]=new Set,this._get(l)),this.listeners[l].add(p)}_removeListener(l,p){this.listeners[l]&&(this.listeners[l].delete(p),0===this.listeners[l].size&&delete this.listeners[l]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return h.type="LOCAL",h})(),pu=1e12;class dI{constructor(c){this.auth=c,this.counter=pu,this._widgets=new Map}render(c,l){const p=this.counter;return this._widgets.set(p,new hI(c,this.auth.name,l||{})),this.counter++,p}reset(c){var l;const p=c||pu;null===(l=this._widgets.get(p))||void 0===l||l.delete(),this._widgets.delete(p)}getResponse(c){var l;return(null===(l=this._widgets.get(c||pu))||void 0===l?void 0:l.getResponse())||""}execute(c){var l=this;return(0,I.Z)(function*(){var p;return null===(p=l._widgets.get(c||pu))||void 0===p||p.execute(),""})()}}class hI{constructor(c,l,p){this.params=p,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const m="string"==typeof c?document.getElementById(c):c;Z(m,"argument-error",{appName:l}),this.container=m,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function fI(h){const c=[],l="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<h;p++)c.push(l.charAt(Math.floor(62*Math.random())));return c.join("")}(50);const{callback:c,"expired-callback":l}=this.params;if(c)try{c(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,l)try{l()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Fc=Yv("rcb"),pI=new Ii(3e4,6e4);class gI{constructor(){var c;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(c=on().grecaptcha)||void 0===c||!c.render)}load(c,l=""){return Z(function db(h){return h.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(h)}(l),c,"argument-error"),this.shouldResolveImmediately(l)&&er(on().grecaptcha)?Promise.resolve(on().grecaptcha):new Promise((p,m)=>{const v=on().setTimeout(()=>{m(At(c,"network-request-failed"))},pI.get());on()[Fc]=()=>{on().clearTimeout(v),delete on()[Fc];const P=on().grecaptcha;if(!P||!er(P))return void m(At(c,"internal-error"));const q=P.render;P.render=(oe,fe)=>{const ye=q(oe,fe);return this.counter++,ye},this.hostLanguage=l,p(P)},mg(`https://www.google.com/recaptcha/api.js??${(0,B.xO)({onload:Fc,render:"explicit",hl:l})}`).catch(()=>{clearTimeout(v),m(At(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){var l;return!(null===(l=on().grecaptcha)||void 0===l||!l.render)&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class mI{load(c){return(0,I.Z)(function*(){return new dI(c)})()}clearedOneInstance(){}}const As="recaptcha",Yg={theme:"light",type:"image"};class _I{constructor(c,l,p=Object.assign({},Yg)){this.parameters=p,this.type=As,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Lt(c),this.isInvisible="invisible"===this.parameters.size,Z(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const m="string"==typeof l?document.getElementById(l):l;Z(m,this.auth,"argument-error"),this.container=m,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new mI:new gI,this.validateStartingState()}verify(){var c=this;return(0,I.Z)(function*(){c.assertNotDestroyed();const l=yield c.render(),p=c.getAssertedRecaptcha();return p.getResponse(l)||new Promise(v=>{const w=P=>{P&&(c.tokenChangeListeners.delete(w),v(P))};c.tokenChangeListeners.add(w),c.isInvisible&&p.execute(l)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){Z(!this.parameters.sitekey,this.auth,"argument-error"),Z(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Z(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return l=>{if(this.tokenChangeListeners.forEach(p=>p(l)),"function"==typeof c)c(l);else if("string"==typeof c){const p=on()[c];"function"==typeof p&&p(l)}}}assertNotDestroyed(){Z(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,I.Z)(function*(){if(yield c.init(),!c.widgetId){let l=c.container;if(!c.isInvisible){const p=document.createElement("div");l.appendChild(p),l=p}c.widgetId=c.getAssertedRecaptcha().render(l,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,I.Z)(function*(){Z(yi()&&!Oc(),c.auth,"internal-error"),yield function yI(){let h=null;return new Promise(c=>{"complete"!==document.readyState?(h=()=>c(),window.addEventListener("load",h)):c()}).catch(c=>{throw h&&window.removeEventListener("load",h),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const l=yield function qa(h){return Gi.apply(this,arguments)}(c.auth);Z(l,c.auth,"internal-error"),c.parameters.sitekey=l})()}getAssertedRecaptcha(){return Z(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Vc{constructor(c,l){this.verificationId=c,this.onConfirmation=l}confirm(c){const l=he._fromVerification(this.verificationId,c);return this.onConfirmation(l)}}function mh(){return(mh=(0,I.Z)(function*(h,c,l){const p=Lt(h),m=yield gu(p,c,(0,B.m9)(l));return new Vc(m,v=>bc(p,v))})).apply(this,arguments)}function yh(){return(yh=(0,I.Z)(function*(h,c,l){const p=(0,B.m9)(h);yield yr(!1,p,"phone");const m=yield gu(p.auth,c,(0,B.m9)(l));return new Vc(m,v=>xg(p,v))})).apply(this,arguments)}function Uc(){return(Uc=(0,I.Z)(function*(h,c,l){const p=(0,B.m9)(h),m=yield gu(p.auth,c,(0,B.m9)(l));return new Vc(m,v=>Ng(p,v))})).apply(this,arguments)}function gu(h,c,l){return Et.apply(this,arguments)}function Et(){return Et=(0,I.Z)(function*(h,c,l){var p;const m=yield l.verify();try{let v;if(Z("string"==typeof m,h,"argument-error"),Z(l.type===As,h,"argument-error"),v="string"==typeof c?{phoneNumber:c}:c,"session"in v){const w=v.session;if("phoneNumber"in v)return Z("enroll"===w.type,h,"internal-error"),(yield function XA(h,c){return U(h,"POST","/v2/accounts/mfaEnrollment:start",Y(h,c))}(h,{idToken:w.credential,phoneEnrollmentInfo:{phoneNumber:v.phoneNumber,recaptchaToken:m}})).phoneSessionInfo.sessionInfo;{Z("signin"===w.type,h,"internal-error");const P=(null===(p=v.multiFactorHint)||void 0===p?void 0:p.uid)||v.multiFactorUid;return Z(P,h,"missing-multi-factor-info"),(yield function gh(h,c){return U(h,"POST","/v2/accounts/mfaSignIn:start",Y(h,c))}(h,{mfaPendingCredential:w.credential,mfaEnrollmentId:P,phoneSignInInfo:{recaptchaToken:m}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:w}=yield function rI(h,c){return Wd.apply(this,arguments)}(h,{phoneNumber:v.phoneNumber,recaptchaToken:m});return w}}finally{l._reset()}}),Et.apply(this,arguments)}function ta(){return(ta=(0,I.Z)(function*(h,c){yield Xd((0,B.m9)(h),c)})).apply(this,arguments)}let Cn=(()=>{class h{constructor(l){this.providerId=h.PROVIDER_ID,this.auth=Lt(l)}verifyPhoneNumber(l,p){return gu(this.auth,l,(0,B.m9)(p))}static credential(l,p){return he._fromVerification(l,p)}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{phoneNumber:p,temporaryProof:m}=l;return p&&m?he._fromTokenResponse(p,m):null}}return h.PROVIDER_ID="phone",h.PHONE_SIGN_IN_METHOD="phone",h})();function oo(h,c){return c?qe(c):(Z(h._popupRedirectResolver,h,"argument-error"),h._popupRedirectResolver)}class Bc extends Zi{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return Nr(c,this._buildIdpRequest())}_linkToIdToken(c,l){return Nr(c,this._buildIdpRequest(l))}_getReauthenticationResolver(c){return Nr(c,this._buildIdpRequest())}_buildIdpRequest(c){const l={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(l.idToken=c),l}}function na(h){return Pg(h.auth,new Bc(h),h.bypassAuthState)}function Lr(h){const{auth:c,user:l}=h;return Z(l,c,"internal-error"),nh(l,new Bc(h),h.bypassAuthState)}function vI(h){return Ih.apply(this,arguments)}function Ih(){return(Ih=(0,I.Z)(function*(h){const{auth:c,user:l}=h;return Z(l,c,"internal-error"),Xd(l,new Bc(h),h.bypassAuthState)})).apply(this,arguments)}class Xg{constructor(c,l,p,m,v=!1){this.auth=c,this.resolver=p,this.user=m,this.bypassAuthState=v,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(l)?l:[l]}execute(){var c=this;return new Promise(function(){var l=(0,I.Z)(function*(p,m){c.pendingPromise={resolve:p,reject:m};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(v){c.reject(v)}});return function(p,m){return l.apply(this,arguments)}}())}onAuthEvent(c){var l=this;return(0,I.Z)(function*(){const{urlResponse:p,sessionId:m,postBody:v,tenantId:w,error:P,type:q}=c;if(P)return void l.reject(P);const oe={auth:l.auth,requestUri:p,sessionId:m,tenantId:w||void 0,postBody:v||void 0,user:l.user,bypassAuthState:l.bypassAuthState};try{l.resolve(yield l.getIdpTask(q)(oe))}catch(fe){l.reject(fe)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return na;case"linkViaPopup":case"linkViaRedirect":return vI;case"reauthViaPopup":case"reauthViaRedirect":return Lr;default:mt(this.auth,"internal-error")}}resolve(c){Ot(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){Ot(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const bs=new Ii(2e3,1e4);function Eh(){return(Eh=(0,I.Z)(function*(h,c,l){const p=Lt(h);He(h,c,Qi);const m=oo(p,l);return new Pe(p,"signInViaPopup",c,m).executeNotNull()})).apply(this,arguments)}function jc(){return(jc=(0,I.Z)(function*(h,c,l){const p=(0,B.m9)(h);He(p.auth,c,Qi);const m=oo(p.auth,l);return new Pe(p.auth,"reauthViaPopup",c,m,p).executeNotNull()})).apply(this,arguments)}function wh(){return(wh=(0,I.Z)(function*(h,c,l){const p=(0,B.m9)(h);He(p.auth,c,Qi);const m=oo(p.auth,l);return new Pe(p.auth,"linkViaPopup",c,m,p).executeNotNull()})).apply(this,arguments)}let Pe=(()=>{class h extends Xg{constructor(l,p,m,v,w){super(l,p,v,w),this.provider=m,this.authWindow=null,this.pollId=null,h.currentPopupAction&&h.currentPopupAction.cancel(),h.currentPopupAction=this}executeNotNull(){var l=this;return(0,I.Z)(function*(){const p=yield l.execute();return Z(p,l.auth,"internal-error"),p})()}onExecution(){var l=this;return(0,I.Z)(function*(){Ot(1===l.filter.length,"Popup operations only handle one event");const p=Ts();l.authWindow=yield l.resolver._openPopup(l.auth,l.provider,l.filter[0],p),l.authWindow.associatedEvent=p,l.resolver._originValidation(l.auth).catch(m=>{l.reject(m)}),l.resolver._isIframeWebStorageSupported(l.auth,m=>{m||l.reject(At(l.auth,"web-storage-unsupported"))}),l.pollUserCancellation()})()}get eventId(){var l;return(null===(l=this.authWindow)||void 0===l?void 0:l.associatedEvent)||null}cancel(){this.reject(At(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,h.currentPopupAction=null}pollUserCancellation(){const l=()=>{var p,m;this.pollId=null!==(m=null===(p=this.authWindow)||void 0===p?void 0:p.window)&&void 0!==m&&m.closed?window.setTimeout(()=>{this.pollId=null,this.reject(At(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(l,bs.get())};l()}}return h.currentPopupAction=null,h})();const rm="pendingRedirect",$c=new Map;class II extends Xg{constructor(c,l,p=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],l,void 0,p),this.eventId=null}execute(){var c=()=>super.execute,l=this;return(0,I.Z)(function*(){let p=$c.get(l.auth._key());if(!p){try{const v=(yield function EI(h,c){return Th.apply(this,arguments)}(l.resolver,l.auth))?yield c().call(l):null;p=()=>Promise.resolve(v)}catch(m){p=()=>Promise.reject(m)}$c.set(l.auth._key(),p)}return l.bypassAuthState||$c.set(l.auth._key(),()=>Promise.resolve(null)),p()})()}onAuthEvent(c){var l=()=>super.onAuthEvent,p=this;return(0,I.Z)(function*(){if("signInViaRedirect"===c.type)return l().call(p,c);if("unknown"!==c.type){if(c.eventId){const m=yield p.auth._redirectUserForId(c.eventId);if(m)return p.user=m,l().call(p,c);p.resolve(null)}}else p.resolve(null)})()}onExecution(){return(0,I.Z)(function*(){})()}cleanUp(){}}function Th(){return(Th=(0,I.Z)(function*(h,c){const l=sm(c),p=im(h);if(!(yield p._isAvailable()))return!1;const m="true"===(yield p._get(l));return yield p._remove(l),m})).apply(this,arguments)}function Hc(h,c){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,I.Z)(function*(h,c){return im(h)._set(sm(c),"true")})).apply(this,arguments)}function Dh(h,c){$c.set(h._key(),c)}function im(h){return qe(h._redirectPersistence)}function sm(h){return Tn(rm,h.config.apiKey,h.name)}function TI(h,c,l){return function J(h,c,l){return tt.apply(this,arguments)}(h,c,l)}function tt(){return(tt=(0,I.Z)(function*(h,c,l){const p=Lt(h);He(h,c,Qi),yield p._initializationPromise;const m=oo(p,l);return yield Hc(m,p),m._openRedirect(p,c,"signInViaRedirect")})).apply(this,arguments)}function DI(h,c,l){return function CI(h,c,l){return gn.apply(this,arguments)}(h,c,l)}function gn(){return(gn=(0,I.Z)(function*(h,c,l){const p=(0,B.m9)(h);He(p.auth,c,Qi),yield p.auth._initializationPromise;const m=oo(p.auth,l);yield Hc(m,p.auth);const v=yield Ah(p);return m._openRedirect(p.auth,c,"reauthViaRedirect",v)})).apply(this,arguments)}function om(h,c,l){return function mu(h,c,l){return ei.apply(this,arguments)}(h,c,l)}function ei(){return(ei=(0,I.Z)(function*(h,c,l){const p=(0,B.m9)(h);He(p.auth,c,Qi),yield p.auth._initializationPromise;const m=oo(p.auth,l);yield yr(!1,p,c.providerId),yield Hc(m,p.auth);const v=yield Ah(p);return m._openRedirect(p.auth,c,"linkViaRedirect",v)})).apply(this,arguments)}function _u(){return(_u=(0,I.Z)(function*(h,c){return yield Lt(h)._initializationPromise,qc(h,c,!1)})).apply(this,arguments)}function qc(h,c){return am.apply(this,arguments)}function am(){return(am=(0,I.Z)(function*(h,c,l=!1){const p=Lt(h),m=oo(p,c),w=yield new II(p,m,l).execute();return w&&!l&&(delete w.user._redirectEventId,yield p._persistUserIfCurrent(w.user),yield p._setRedirectUser(null,c)),w})).apply(this,arguments)}function Ah(h){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,I.Z)(function*(h){const c=Ts(`${h.uid}:::`);return h._redirectEventId=c,yield h.auth._setRedirectUser(h),yield h.auth._persistUserIfCurrent(h),c})).apply(this,arguments)}class bh{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let l=!1;return this.consumers.forEach(p=>{this.isEventForConsumer(c,p)&&(l=!0,this.sendToConsumer(c,p),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function AI(h){switch(h.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ni(h);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,l||(this.queuedRedirectEvent=c,l=!0)),l}sendToConsumer(c,l){var p;if(c.error&&!Ni(c)){const m=(null===(p=c.error.code)||void 0===p?void 0:p.split("auth/")[1])||"internal-error";l.onError(At(this.auth,m))}else l.onAuthEvent(c)}isEventForConsumer(c,l){const p=null===l.eventId||!!c.eventId&&c.eventId===l.eventId;return l.filter.includes(c.type)&&p}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ao(c))}saveEventToCache(c){this.cachedEventUids.add(ao(c)),this.lastProcessedEventTime=Date.now()}}function ao(h){return[h.type,h.eventId,h.sessionId,h.tenantId].filter(c=>c).join("-")}function Ni({type:h,error:c}){return"unknown"===h&&"auth/no-auth-event"===c?.code}function Sh(h){return Rh.apply(this,arguments)}function Rh(){return(Rh=(0,I.Z)(function*(h,c={}){return U(h,"GET","/v1/projects",c)})).apply(this,arguments)}const bI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ph=/^https?/;function zc(){return(zc=(0,I.Z)(function*(h){if(h.config.emulator)return;const{authorizedDomains:c}=yield Sh(h);for(const l of c)try{if(Nh(l))return}catch{}mt(h,"unauthorized-domain")})).apply(this,arguments)}function Nh(h){const c=fn(),{protocol:l,hostname:p}=new URL(c);if(h.startsWith("chrome-extension://")){const w=new URL(h);return""===w.hostname&&""===p?"chrome-extension:"===l&&h.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===l&&w.hostname===p}if(!Ph.test(l))return!1;if(bI.test(h))return p===h;const m=h.replace(/\./g,"\\.");return new RegExp("^(.+\\."+m+"|"+m+")$","i").test(p)}const SI=new Ii(3e4,6e4);function Mh(){const h=on().___jsl;if(h?.H)for(const c of Object.keys(h.H))if(h.H[c].r=h.H[c].r||[],h.H[c].L=h.H[c].L||[],h.H[c].r=[...h.H[c].L],h.CP)for(let l=0;l<h.CP.length;l++)h.CP[l]=null}let yu=null;const cm=new Ii(5e3,15e3),lm="__/auth/iframe",kh="emulator/auth/iframe",RI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},PI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nr(h){const c=h.config;Z(c.authDomain,h,"auth-domain-config-required");const l=c.emulator?k(c,kh):`https://${h.config.authDomain}/${lm}`,p={apiKey:c.apiKey,appName:h.name,v:Ne.SDK_VERSION},m=PI.get(h.config.apiHost);m&&(p.eid=m);const v=h._getFrameworks();return v.length&&(p.fw=v.join(",")),`${l}?${(0,B.xO)(p).slice(1)}`}function xt(){return xt=(0,I.Z)(function*(h){const c=yield function um(h){return yu=yu||function Oh(h){return new Promise((c,l)=>{var p,m,v;function w(){Mh(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{Mh(),l(At(h,"network-request-failed"))},timeout:SI.get()})}if(null!==(m=null===(p=on().gapi)||void 0===p?void 0:p.iframes)&&void 0!==m&&m.Iframe)c(gapi.iframes.getContext());else{if(null===(v=on().gapi)||void 0===v||!v.load){const P=Yv("iframefcb");return on()[P]=()=>{gapi.load?w():l(At(h,"network-request-failed"))},mg(`https://apis.google.com/js/api.js?onload=${P}`).catch(q=>l(q))}w()}}).catch(c=>{throw yu=null,c})}(h),yu}(h),l=on().gapi;return Z(l,h,"internal-error"),c.open({where:document.body,url:nr(h),messageHandlersFilter:l.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:RI,dontclear:!0},p=>new Promise(function(){var m=(0,I.Z)(function*(v,w){yield p.restyle({setHideOnLeave:!1});const P=At(h,"network-request-failed"),q=on().setTimeout(()=>{w(P)},cm.get());function oe(){on().clearTimeout(q),v(p)}p.ping(oe).then(oe,()=>{w(P)})});return function(v,w){return m.apply(this,arguments)}}()))}),xt.apply(this,arguments)}const xI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Lh{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const kI="__/auth/handler",Wc="emulator/auth/handler",Zc=encodeURIComponent("fac");function ra(h,c,l,p,m,v){return vu.apply(this,arguments)}function vu(){return(vu=(0,I.Z)(function*(h,c,l,p,m,v){Z(h.config.authDomain,h,"auth-domain-config-required"),Z(h.config.apiKey,h,"invalid-api-key");const w={apiKey:h.config.apiKey,appName:h.name,authType:l,redirectUrl:p,v:Ne.SDK_VERSION,eventId:m};if(c instanceof Qi){c.setDefaultLanguage(h.languageCode),w.providerId=c.providerId||"",(0,B.xb)(c.getCustomParameters())||(w.customParameters=JSON.stringify(c.getCustomParameters()));for(const[fe,ye]of Object.entries(v||{}))w[fe]=ye}if(c instanceof _r){const fe=c.getScopes().filter(ye=>""!==ye);fe.length>0&&(w.scopes=fe.join(","))}h.tenantId&&(w.tid=h.tenantId);const P=w;for(const fe of Object.keys(P))void 0===P[fe]&&delete P[fe];const q=yield h._getAppCheckToken(),oe=q?`#${Zc}=${encodeURIComponent(q)}`:"";return`${function hm({config:h}){return h.emulator?k(h,Wc):`https://${h.authDomain}/${kI}`}(h)}?${(0,B.xO)(P).slice(1)}${oe}`})).apply(this,arguments)}const Kc="webStorageSupport",co=class LI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=so,this._completeRedirectFn=qc,this._overrideRedirectResult=Dh}_openPopup(c,l,p,m){var v=this;return(0,I.Z)(function*(){var w;Ot(null===(w=v.eventManagers[c._key()])||void 0===w?void 0:w.manager,"_initialize() not called before _openPopup()");const P=yield ra(c,l,p,fn(),m);return function Gc(h,c,l,p=500,m=600){const v=Math.max((window.screen.availHeight-m)/2,0).toString(),w=Math.max((window.screen.availWidth-p)/2,0).toString();let P="";const q=Object.assign(Object.assign({},xI),{width:p.toString(),height:m.toString(),top:v,left:w}),oe=(0,B.z$)().toLowerCase();l&&(P=_c(oe)?"_blank":l),wt(oe)&&(c=c||"http://localhost",q.scrollbars="yes");const fe=Object.entries(q).reduce((en,[di,al])=>`${en}${di}=${al},`,"");if(function W(h=(0,B.z$)()){var c;return Le(h)&&!(null===(c=window.navigator)||void 0===c||!c.standalone)}(oe)&&"_self"!==P)return function Rs(h,c){const l=document.createElement("a");l.href=h,l.target=c;const p=document.createEvent("MouseEvent");p.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),l.dispatchEvent(p)}(c||"",P),new Lh(null);const ye=window.open(c||"",P,fe);Z(ye,h,"popup-blocked");try{ye.focus()}catch{}return new Lh(ye)}(c,P,Ts())})()}_openRedirect(c,l,p,m){var v=this;return(0,I.Z)(function*(){return yield v._originValidation(c),function jg(h){on().location.href=h}(yield ra(c,l,p,fn(),m)),new Promise(()=>{})})()}_initialize(c){const l=c._key();if(this.eventManagers[l]){const{manager:m,promise:v}=this.eventManagers[l];return m?Promise.resolve(m):(Ot(v,"If manager is not set, promise should be"),v)}const p=this.initAndGetManager(c);return this.eventManagers[l]={promise:p},p.catch(()=>{delete this.eventManagers[l]}),p}initAndGetManager(c){var l=this;return(0,I.Z)(function*(){const p=yield function uo(h){return xt.apply(this,arguments)}(c),m=new bh(c);return p.register("authEvent",v=>(Z(v?.authEvent,c,"invalid-auth-event"),{status:m.onEvent(v.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),l.eventManagers[c._key()]={manager:m},l.iframes[c._key()]=p,m})()}_isIframeWebStorageSupported(c,l){this.iframes[c._key()].send(Kc,{type:Kc},m=>{var v;const w=null===(v=m?.[0])||void 0===v?void 0:v[Kc];void 0!==w&&l(!!w),mt(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const l=c._key();return this.originValidationPromises[l]||(this.originValidationPromises[l]=function xh(h){return zc.apply(this,arguments)}(c)),this.originValidationPromises[l]}get _shouldInitProactively(){return _e()||Ei()||Le()}};class Iu{constructor(c){this.factorId=c}_process(c,l,p){switch(l.type){case"enroll":return this._finalizeEnroll(c,l.credential,p);case"signin":return this._finalizeSignIn(c,l.credential);default:return $t("unexpected MultiFactorSessionType")}}}class Fh extends Iu{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new Fh(c)}_finalizeEnroll(c,l,p){return function eb(h,c){return U(h,"POST","/v2/accounts/mfaEnrollment:finalize",Y(h,c))}(c,{idToken:l,displayName:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,l){return function cb(h,c){return U(h,"POST","/v2/accounts/mfaSignIn:finalize",Y(h,c))}(c,{mfaPendingCredential:l,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let hb=(()=>{class h{constructor(){}static assertion(l){return Fh._fromCredential(l)}}return h.FACTOR_ID="phone",h})();var FI="@firebase/auth";class Vh{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var l=this;return(0,I.Z)(function*(){return l.assertAuthConfigured(),yield l.auth._initializationPromise,l.auth.currentUser?{accessToken:yield l.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const l=this.auth.onIdTokenChanged(p=>{c(p?.stsTokenManager.accessToken||null)});this.internalListeners.set(c,l),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const l=this.internalListeners.get(c);l&&(this.internalListeners.delete(c),l(),this.updateProactiveRefresh())}assertAuthConfigured(){Z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ps(){return window}(0,B.Pz)("authIdTokenMaxAge"),function UI(h){(0,Ne._registerComponent)(new Yt.wA("auth",(c,{options:l})=>{const p=c.getProvider("app").getImmediate(),m=c.getProvider("heartbeat"),v=c.getProvider("app-check-internal"),{apiKey:w,authDomain:P}=p.options;Z(w&&!w.includes(":"),"invalid-api-key",{appName:p.name});const q={apiKey:w,authDomain:P,clientPlatform:h,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qo(h)},oe=new Qv(p,m,v,q);return function HA(h,c){const l=c?.persistence||[],p=(Array.isArray(l)?l:[l]).map(qe);c?.errorMap&&h._updateErrorMap(c.errorMap),h._initializeWithPersistence(p,c?.popupRedirectResolver)}(oe,l),oe},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,l,p)=>{c.getProvider("auth-internal").initialize()})),(0,Ne._registerComponent)(new Yt.wA("auth-internal",c=>{const l=Lt(c.getProvider("auth").getImmediate());return new Vh(l)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Ne.registerVersion)(FI,"1.5.0",function Eu(h){switch(h){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(h)),(0,Ne.registerVersion)(FI,"1.5.0","esm2017")}("Browser");function Bh(){return Bh=(0,I.Z)(function*(h,c,l){var p;const{BuildInfo:m}=Ps();Ot(c.sessionId,"AuthEvent did not contain a session ID");const v=yield function _m(h){return Xc.apply(this,arguments)}(c.sessionId),w={};return Le()?w.ibi=m.packageName:S()?w.apn=m.packageName:mt(h,"operation-not-supported-in-this-environment"),m.displayName&&(w.appDisplayName=m.displayName),w.sessionId=v,ra(h,l,c.type,void 0,null!==(p=c.eventId)&&void 0!==p?p:void 0,w)}),Bh.apply(this,arguments)}function Du(){return(Du=(0,I.Z)(function*(h){const{BuildInfo:c}=Ps(),l={};Le()?l.iosBundleId=c.packageName:S()?l.androidPackageName=c.packageName:mt(h,"operation-not-supported-in-this-environment"),yield Sh(h,l)})).apply(this,arguments)}function Cu(){return(Cu=(0,I.Z)(function*(h,c,l){const{cordova:p}=Ps();let m=()=>{};try{yield new Promise((v,w)=>{let P=null;function q(){var ye;v();const en=null===(ye=p.plugins.browsertab)||void 0===ye?void 0:ye.close;"function"==typeof en&&en(),"function"==typeof l?.close&&l.close()}function oe(){P||(P=window.setTimeout(()=>{w(At(h,"redirect-cancelled-by-user"))},2e3))}function fe(){"visible"===document?.visibilityState&&oe()}c.addPassiveListener(q),document.addEventListener("resume",oe,!1),S()&&document.addEventListener("visibilitychange",fe,!1),m=()=>{c.removePassiveListener(q),document.removeEventListener("resume",oe,!1),document.removeEventListener("visibilitychange",fe,!1),P&&window.clearTimeout(P)}})}finally{m()}})).apply(this,arguments)}function Xc(){return(Xc=(0,I.Z)(function*(h){const c=function ym(h){if(Ot(/[0-9a-zA-Z]+/.test(h),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(h);const c=new ArrayBuffer(h.length),l=new Uint8Array(c);for(let p=0;p<h.length;p++)l[p]=h.charCodeAt(p);return l}(h),l=yield crypto.subtle.digest("SHA-256",c);return Array.from(new Uint8Array(l)).map(m=>m.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class HI extends bh{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(c=>{this.resolveInialized=c})}addPassiveListener(c){this.passiveListeners.add(c)}removePassiveListener(c){this.passiveListeners.delete(c)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(c){return this.resolveInialized(),this.passiveListeners.forEach(l=>l(c)),super.onEvent(c)}initialized(){var c=this;return(0,I.Z)(function*(){yield c.initPromise})()}}function Im(h){return tl.apply(this,arguments)}function tl(){return(tl=(0,I.Z)(function*(h){const c=yield jh()._get(Un(h));return c&&(yield jh()._remove(Un(h))),c})).apply(this,arguments)}function Au(){const h=[];for(let l=0;l<20;l++){const p=Math.floor(62*Math.random());h.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(p))}return h.join("")}function jh(){return qe(Pi)}function Un(h){return Tn("authEvent",h.config.apiKey,h.name)}function ia(h){if(!h?.includes("?"))return{};const[c,...l]=h.split("?");return(0,B.zd)(l.join("?"))}const nl=class Tm{constructor(){this._redirectPersistence=so,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=qc,this._overrideRedirectResult=Dh}_initialize(c){var l=this;return(0,I.Z)(function*(){const p=c._key();let m=l.eventManagers.get(p);return m||(m=new HI(c),l.eventManagers.set(p,m),l.attachCallbackListeners(c,m)),m})()}_openPopup(c){mt(c,"operation-not-supported-in-this-environment")}_openRedirect(c,l,p,m){var v=this;return(0,I.Z)(function*(){!function $I(h){var c,l,p,m,v,w,P,q,oe,fe;const ye=Ps();Z("function"==typeof(null===(c=ye?.universalLinks)||void 0===c?void 0:c.subscribe),h,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Z(typeof(null===(l=ye?.BuildInfo)||void 0===l?void 0:l.packageName)<"u",h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Z("function"==typeof(null===(v=null===(m=null===(p=ye?.cordova)||void 0===p?void 0:p.plugins)||void 0===m?void 0:m.browsertab)||void 0===v?void 0:v.openUrl),h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Z("function"==typeof(null===(q=null===(P=null===(w=ye?.cordova)||void 0===w?void 0:w.plugins)||void 0===P?void 0:P.browsertab)||void 0===q?void 0:q.isAvailable),h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Z("function"==typeof(null===(fe=null===(oe=ye?.cordova)||void 0===oe?void 0:oe.InAppBrowser)||void 0===fe?void 0:fe.open),h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(c);const w=yield v._initialize(c);yield w.initialized(),w.resetRedirect(),function wI(){$c.clear()}(),yield v._originValidation(c);const P=function el(h,c,l=null){return{type:c,eventId:l,urlResponse:null,sessionId:Au(),postBody:null,tenantId:h.tenantId,error:At(h,"no-auth-event")}}(c,p,m);yield function lo(h,c){return jh()._set(Un(h),c)}(c,P);const q=yield function Mi(h,c,l){return Bh.apply(this,arguments)}(c,P,l),oe=yield function mm(h){const{cordova:c}=Ps();return new Promise(l=>{c.plugins.browsertab.isAvailable(p=>{let m=null;p?c.plugins.browsertab.openUrl(h):m=c.InAppBrowser.open(h,function Ye(h=(0,B.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(h)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(h)}()?"_blank":"_system","location=yes"),l(m)})})}(q);return function Jc(h,c,l){return Cu.apply(this,arguments)}(c,w,oe)})()}_isIframeWebStorageSupported(c,l){throw new Error("Method not implemented.")}_originValidation(c){const l=c._key();return this.originValidationPromises[l]||(this.originValidationPromises[l]=function Yc(h){return Du.apply(this,arguments)}(c)),this.originValidationPromises[l]}attachCallbackListeners(c,l){const{universalLinks:p,handleOpenURL:m,BuildInfo:v}=Ps(),w=setTimeout((0,I.Z)(function*(){yield Im(c),l.onEvent(ho())}),500),P=function(){var fe=(0,I.Z)(function*(ye){clearTimeout(w);const en=yield Im(c);let di=null;en&&ye?.url&&(di=function Em(h,c){var l,p;const m=function wm(h){const c=ia(h),l=c.link?decodeURIComponent(c.link):void 0,p=ia(l).link,m=c.deep_link_id?decodeURIComponent(c.deep_link_id):void 0;return ia(m).link||m||p||l||h}(c);if(m.includes("/__/auth/callback")){const v=ia(m),w=v.firebaseError?function qI(h){try{return JSON.parse(h)}catch{return null}}(decodeURIComponent(v.firebaseError)):null,P=null===(p=null===(l=w?.code)||void 0===l?void 0:l.split("auth/"))||void 0===p?void 0:p[1],q=P?At(P):null;return q?{type:h.type,eventId:h.eventId,tenantId:h.tenantId,error:q,urlResponse:null,sessionId:null,postBody:null}:{type:h.type,eventId:h.eventId,tenantId:h.tenantId,sessionId:h.sessionId,urlResponse:m,postBody:null}}return null}(en,ye.url)),l.onEvent(di||ho())});return function(en){return fe.apply(this,arguments)}}();typeof p<"u"&&"function"==typeof p.subscribe&&p.subscribe(null,P);const q=m,oe=`${v.packageName.toLowerCase()}://`;Ps().handleOpenURL=function(){var fe=(0,I.Z)(function*(ye){if(ye.toLowerCase().startsWith(oe)&&P({url:ye}),"function"==typeof q)try{q(ye)}catch(en){console.error(en)}});return function(ye){return fe.apply(this,arguments)}}()}};function ho(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:At("no-auth-event")}}function Oi(){var h;return(null===(h=self?.location)||void 0===h?void 0:h.protocol)||null}function Cm(h=(0,B.z$)()){return!("file:"!==Oi()&&"ionic:"!==Oi()&&"capacitor:"!==Oi()||!h.toLowerCase().match(/iphone|ipad|ipod|android/))}function GI(){try{const h=self.localStorage,c=Ts();if(h)return h.setItem(c,"1"),h.removeItem(c),!function yb(h=(0,B.z$)()){return function mb(){return(0,B.w1)()&&11===document?.documentMode}()||function _b(h=(0,B.z$)()){return/Edge\/\d+/.test(h)}(h)}()||(0,B.hl)()}catch{return Am()&&(0,B.hl)()}return!1}function Am(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function xs(){return(function pb(){return"http:"===Oi()||"https:"===Oi()}()||(0,B.ru)()||Cm())&&!function gb(){return(0,B.b$)()||(0,B.UG)()}()&&GI()&&!Am()}function bm(){return Cm()&&typeof document<"u"}function an(){return(an=(0,I.Z)(function*(){return!!bm()&&new Promise(h=>{const c=setTimeout(()=>{h(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(c),h(!0)})})})).apply(this,arguments)}const Bn={LOCAL:"local",NONE:"none",SESSION:"session"},bu=Z,Fr="persistence";function rl(h){return ua.apply(this,arguments)}function ua(){return(ua=(0,I.Z)(function*(h){yield h._initializationPromise;const c=Sm(),l=Tn(Fr,h.config.apiKey,h.name);c&&c.setItem(l,h._getPersistence())})).apply(this,arguments)}function Sm(){var h;try{return(null===(h=function ZI(){return typeof window<"u"?window:null}())||void 0===h?void 0:h.sessionStorage)||null}catch{return null}}const vb=Z;class Ns{constructor(){this.browserResolver=qe(co),this.cordovaResolver=qe(nl),this.underlyingResolver=null,this._redirectPersistence=so,this._completeRedirectFn=qc,this._overrideRedirectResult=Dh}_initialize(c){var l=this;return(0,I.Z)(function*(){return yield l.selectUnderlyingResolver(),l.assertedUnderlyingResolver._initialize(c)})()}_openPopup(c,l,p,m){var v=this;return(0,I.Z)(function*(){return yield v.selectUnderlyingResolver(),v.assertedUnderlyingResolver._openPopup(c,l,p,m)})()}_openRedirect(c,l,p,m){var v=this;return(0,I.Z)(function*(){return yield v.selectUnderlyingResolver(),v.assertedUnderlyingResolver._openRedirect(c,l,p,m)})()}_isIframeWebStorageSupported(c,l){this.assertedUnderlyingResolver._isIframeWebStorageSupported(c,l)}_originValidation(c){return this.assertedUnderlyingResolver._originValidation(c)}get _shouldInitProactively(){return bm()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return vb(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var c=this;return(0,I.Z)(function*(){if(c.underlyingResolver)return;const l=yield function WI(){return an.apply(this,arguments)}();c.underlyingResolver=l?c.cordovaResolver:c.browserResolver})()}}function KI(h){return h.unwrap()}function Hh(h){return QI(h)}function QI(h){const{_tokenResponse:c}=h instanceof B.ZR?h.customData:h;if(!c)return null;if(!(h instanceof B.ZR)&&"temporaryProof"in c&&"phoneNumber"in c)return Cn.credentialFromResult(h);const l=c.providerId;if(!l||l===Qe.PASSWORD)return null;let p;switch(l){case Qe.GOOGLE:p=ci;break;case Qe.FACEBOOK:p=Jr;break;case Qe.GITHUB:p=ct;break;case Qe.TWITTER:p=Di;break;default:const{oauthIdToken:m,oauthAccessToken:v,oauthTokenSecret:w,pendingToken:P,nonce:q}=c;return v||w||m||P?P?l.startsWith("saml.")?ys._create(l,P):wi._fromParams({providerId:l,signInMethod:l,pendingToken:P,idToken:m,accessToken:v}):new Yi(l).credential({idToken:m,accessToken:v,rawNonce:q}):null}return h instanceof B.ZR?p.credentialFromError(h):p.credentialFromResult(h)}function rr(h,c){return c.catch(l=>{throw l instanceof B.ZR&&function ca(h,c){var l;const p=null===(l=c.customData)||void 0===l?void 0:l._tokenResponse;if("auth/multi-factor-auth-required"===c?.code)c.resolver=new YI(h,function JA(h,c){var l;const p=(0,B.m9)(h),m=c;return Z(c.customData.operationType,p,"argument-error"),Z(null===(l=m.customData._serverResponse)||void 0===l?void 0:l.mfaPendingCredential,p,"argument-error"),Fg._fromError(p,m)}(h,c));else if(p){const m=QI(c),v=c;m&&(v.credential=m,v.tenantId=p.tenantId||void 0,v.email=p.email||void 0,v.phoneNumber=p.phoneNumber||void 0)}}(h,l),l}).then(l=>{const m=l.user;return{operationType:l.operationType,credential:Hh(l),additionalUserInfo:Ln(l),user:es.getOrCreate(m)}})}function qh(h,c){return zh.apply(this,arguments)}function zh(){return(zh=(0,I.Z)(function*(h,c){const l=yield c;return{verificationId:l.verificationId,confirm:p=>rr(h,l.confirm(p))}})).apply(this,arguments)}class YI{constructor(c,l){this.resolver=l,this.auth=function Vr(h){return h.wrapped()}(c)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(c){return rr(KI(this.auth),this.resolver.resolveSignIn(c))}}class es{constructor(c){this._delegate=c,this.multiFactor=function rb(h){const c=(0,B.m9)(h);return Ug.has(c)||Ug.set(c,Vg._fromUser(c)),Ug.get(c)}(c)}static getOrCreate(c){return es.USER_MAP.has(c)||es.USER_MAP.set(c,new es(c)),es.USER_MAP.get(c)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(c){return this._delegate.getIdTokenResult(c)}getIdToken(c){return this._delegate.getIdToken(c)}linkAndRetrieveDataWithCredential(c){return this.linkWithCredential(c)}linkWithCredential(c){var l=this;return(0,I.Z)(function*(){return rr(l.auth,xg(l._delegate,c))})()}linkWithPhoneNumber(c,l){var p=this;return(0,I.Z)(function*(){return qh(p.auth,function _h(h,c,l){return yh.apply(this,arguments)}(p._delegate,c,l))})()}linkWithPopup(c){var l=this;return(0,I.Z)(function*(){return rr(l.auth,function nm(h,c,l){return wh.apply(this,arguments)}(l._delegate,c,Ns))})()}linkWithRedirect(c){var l=this;return(0,I.Z)(function*(){return yield rl(Lt(l.auth)),om(l._delegate,c,Ns)})()}reauthenticateAndRetrieveDataWithCredential(c){return this.reauthenticateWithCredential(c)}reauthenticateWithCredential(c){var l=this;return(0,I.Z)(function*(){return rr(l.auth,Ng(l._delegate,c))})()}reauthenticateWithPhoneNumber(c,l){return qh(this.auth,function xi(h,c,l){return Uc.apply(this,arguments)}(this._delegate,c,l))}reauthenticateWithPopup(c){return rr(this.auth,function tm(h,c,l){return jc.apply(this,arguments)}(this._delegate,c,Ns))}reauthenticateWithRedirect(c){var l=this;return(0,I.Z)(function*(){return yield rl(Lt(l.auth)),DI(l._delegate,c,Ns)})()}sendEmailVerification(c){return function Ko(h,c){return zt.apply(this,arguments)}(this._delegate,c)}unlink(c){var l=this;return(0,I.Z)(function*(){return yield function oI(h,c){return Ac.apply(this,arguments)}(l._delegate,c),l})()}updateEmail(c){return function Ji(h,c){return Qo((0,B.m9)(h),c,null)}(this._delegate,c)}updatePassword(c){return function cu(h,c){return Qo((0,B.m9)(h),null,c)}(this._delegate,c)}updatePhoneNumber(c){return function vh(h,c){return ta.apply(this,arguments)}(this._delegate,c)}updateProfile(c){return function kg(h,c){return bi.apply(this,arguments)}(this._delegate,c)}verifyBeforeUpdateEmail(c,l){return function uu(h,c,l){return Es.apply(this,arguments)}(this._delegate,c,l)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}es.USER_MAP=new WeakMap;const Ru=Z;let Rm=(()=>{class h{constructor(l,p){if(this.app=l,p.isInitialized())return this._delegate=p.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:m}=l.options;Ru(m,"invalid-api-key",{appName:l.name}),Ru(m,"invalid-api-key",{appName:l.name});const v=typeof window<"u"?Ns:void 0;this._delegate=p.initialize({options:{persistence:sl(m,l.name),popupRedirectResolver:v}}),this._delegate._updateErrorMap(Pn),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?es.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(l){this._delegate.languageCode=l}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(l){this._delegate.tenantId=l}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(l,p){!function mr(h,c,l){const p=Lt(h);Z(p._canInitEmulator,p,"emulator-config-failed"),Z(/^https?:\/\//.test(c),p,"invalid-emulator-scheme");const m=!!l?.disableWarnings,v=Qa(c),{host:w,port:P}=function eI(h){const c=Qa(h),l=/(\/\/)?([^?#/]+)/.exec(h.substr(c.length));if(!l)return{host:"",port:null};const p=l[2].split("@").pop()||"",m=/^(\[[^\]]+\])(:|$)/.exec(p);if(m){const v=m[1];return{host:v,port:qd(p.substr(v.length+1))}}{const[v,w]=p.split(":");return{host:v,port:qd(w)}}}(c);p.config.emulator={url:`${v}//${w}${null===P?"":`:${P}`}/`},p.settings.appVerificationDisabledForTesting=!0,p.emulatorConfig=Object.freeze({host:w,port:P,protocol:v.replace(":",""),options:Object.freeze({disableWarnings:m})}),m||function tI(){function h(){const c=document.createElement("p"),l=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",l.position="fixed",l.width="100%",l.backgroundColor="#ffffff",l.border=".1em solid #000000",l.color="#b50000",l.bottom="0px",l.left="0px",l.margin="0px",l.zIndex="10000",l.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",h):h())}()}(this._delegate,l,p)}applyActionCode(l){return function Mg(h,c){return Go.apply(this,arguments)}(this._delegate,l)}checkActionCode(l){return Og(this._delegate,l)}confirmPasswordReset(l,p){return function Or(h,c,l){return Pc.apply(this,arguments)}(this._delegate,l,p)}createUserWithEmailAndPassword(l,p){var m=this;return(0,I.Z)(function*(){return rr(m._delegate,function Ue(h,c,l){return bt.apply(this,arguments)}(m._delegate,l,p))})()}fetchProvidersForEmail(l){return this.fetchSignInMethodsForEmail(l)}fetchSignInMethodsForEmail(l){return function au(h,c){return xc.apply(this,arguments)}(this._delegate,l)}isSignInWithEmailLink(l){return function Wo(h,c){const l=Ki.parseLink(c);return"EMAIL_SIGNIN"===l?.operation}(0,l)}getRedirectResult(){var l=this;return(0,I.Z)(function*(){Ru(xs(),l._delegate,"operation-not-supported-in-this-environment");const p=yield function Ch(h,c){return _u.apply(this,arguments)}(l._delegate,Ns);return p?rr(l._delegate,Promise.resolve(p)):{credential:null,user:null}})()}addFrameworkForLogging(l){!function sa(h,c){Lt(h)._logFramework(c)}(this._delegate,l)}onAuthStateChanged(l,p,m){const{next:v,error:w,complete:P}=il(l,p,m);return this._delegate.onAuthStateChanged(v,w,P)}onIdTokenChanged(l,p,m){const{next:v,error:w,complete:P}=il(l,p,m);return this._delegate.onIdTokenChanged(v,w,P)}sendSignInLinkToEmail(l,p){return function ou(h,c,l){return Dn.apply(this,arguments)}(this._delegate,l,p)}sendPasswordResetEmail(l,p){return function tr(h,c,l){return Is.apply(this,arguments)}(this._delegate,l,p||void 0)}setPersistence(l){var p=this;return(0,I.Z)(function*(){let m;switch(function aa(h,c){bu(Object.values(Bn).includes(c),h,"invalid-persistence-type"),(0,B.b$)()?bu(c!==Bn.SESSION,h,"unsupported-persistence-type"):(0,B.UG)()?bu(c===Bn.NONE,h,"unsupported-persistence-type"):Am()?bu(c===Bn.NONE||c===Bn.LOCAL&&(0,B.hl)(),h,"unsupported-persistence-type"):bu(c===Bn.NONE||GI(),h,"unsupported-persistence-type")}(p._delegate,l),l){case Bn.SESSION:m=so;break;case Bn.LOCAL:m=(yield qe(ea)._isAvailable())?ea:Pi;break;case Bn.NONE:m=qt;break;default:return mt("argument-error",{appName:p._delegate.name})}return p._delegate.setPersistence(m)})()}signInAndRetrieveDataWithCredential(l){return this.signInWithCredential(l)}signInAnonymously(){return rr(this._delegate,function Rg(h){return Cc.apply(this,arguments)}(this._delegate))}signInWithCredential(l){return rr(this._delegate,bc(this._delegate,l))}signInWithCustomToken(l){return rr(this._delegate,function uI(h,c){return vr.apply(this,arguments)}(this._delegate,l))}signInWithEmailAndPassword(l,p){return rr(this._delegate,function li(h,c,l){return bc((0,B.m9)(h),Kd.credential(c,l)).catch(function(){var p=(0,I.Z)(function*(m){throw"auth/password-does-not-meet-requirements"===m.code&&et(h),m});return function(m){return p.apply(this,arguments)}}())}(this._delegate,l,p))}signInWithEmailLink(l,p){return rr(this._delegate,function sn(h,c,l){return Ci.apply(this,arguments)}(this._delegate,l,p))}signInWithPhoneNumber(l,p){return qh(this._delegate,function Jg(h,c,l){return mh.apply(this,arguments)}(this._delegate,l,p))}signInWithPopup(l){var p=this;return(0,I.Z)(function*(){return Ru(xs(),p._delegate,"operation-not-supported-in-this-environment"),rr(p._delegate,function em(h,c,l){return Eh.apply(this,arguments)}(p._delegate,l,Ns))})()}signInWithRedirect(l){var p=this;return(0,I.Z)(function*(){return Ru(xs(),p._delegate,"operation-not-supported-in-this-environment"),yield rl(p._delegate),TI(p._delegate,l,Ns)})()}updateCurrentUser(l){return this._delegate.updateCurrentUser(l)}verifyPasswordResetCode(l){return function Xt(h,c){return ue.apply(this,arguments)}(this._delegate,l)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return h.Persistence=Bn,h})();function il(h,c,l){let p=h;"function"!=typeof h&&({next:p,error:c,complete:l}=h);const m=p;return{next:w=>m(w&&es.getOrCreate(w)),error:c,complete:l}}function sl(h,c){const l=function Su(h,c){const l=Sm();if(!l)return[];const p=Tn(Fr,h,c);switch(l.getItem(p)){case Bn.NONE:return[qt];case Bn.LOCAL:return[ea,so];case Bn.SESSION:return[so];default:return[]}}(h,c);if(typeof self<"u"&&!l.includes(ea)&&l.push(ea),typeof window<"u")for(const p of[Pi,so])l.includes(p)||l.push(p);return l.includes(qt)||l.push(qt),l}class Gh{constructor(){this.providerId="phone",this._delegate=new Cn(KI(xe.Z.auth()))}static credential(c,l){return Cn.credential(c,l)}verifyPhoneNumber(c,l){return this._delegate.verifyPhoneNumber(c,l)}unwrap(){return this._delegate}}Gh.PHONE_SIGN_IN_METHOD=Cn.PHONE_SIGN_IN_METHOD,Gh.PROVIDER_ID=Cn.PROVIDER_ID;const Pu=Z;class JI{constructor(c,l,p=xe.Z.app()){var m;Pu(null===(m=p.options)||void 0===m?void 0:m.apiKey,"invalid-api-key",{appName:p.name}),this._delegate=new _I(p.auth(),c,l),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function XI(h){h.INTERNAL.registerComponent(new Yt.wA("auth-compat",c=>{const l=c.getProvider("app-compat").getImmediate(),p=c.getProvider("auth");return new Rm(l,p)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Kd,FacebookAuthProvider:Jr,GithubAuthProvider:ct,GoogleAuthProvider:ci,OAuthProvider:Yi,SAMLAuthProvider:iu,PhoneAuthProvider:Gh,PhoneMultiFactorGenerator:hb,RecaptchaVerifier:JI,TwitterAuthProvider:Di,Auth:Rm,AuthCredential:Zi,Error:B.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),h.registerVersion("@firebase/auth-compat","0.5.0")}(xe.Z)},861:(zi,Sn,Ve)=>{function I(B,Ne,dt,jt,Yt,Rn,Qe){try{var Q=B[Rn](Qe),ne=Q.value}catch(Ie){return void dt(Ie)}Q.done?Ne(ne):Promise.resolve(ne).then(jt,Yt)}function xe(B){return function(){var Ne=this,dt=arguments;return new Promise(function(jt,Yt){var Rn=B.apply(Ne,dt);function Qe(ne){I(Rn,jt,Yt,Qe,Q,"next",ne)}function Q(ne){I(Rn,jt,Yt,Qe,Q,"throw",ne)}Qe(void 0)})}}Ve.d(Sn,{Z:()=>xe})},582:(zi,Sn,Ve)=>{function Ne(k,F){var j={};for(var H in k)Object.prototype.hasOwnProperty.call(k,H)&&F.indexOf(H)<0&&(j[H]=k[H]);if(null!=k&&"function"==typeof Object.getOwnPropertySymbols){var Y=0;for(H=Object.getOwnPropertySymbols(k);Y<H.length;Y++)F.indexOf(H[Y])<0&&Object.prototype.propertyIsEnumerable.call(k,H[Y])&&(j[H[Y]]=k[H[Y]])}return j}function Ie(k,F,j,H){return new(j||(j=Promise))(function(U,de){function nt(at){try{Ee(H.next(at))}catch(Ht){de(Ht)}}function ve(at){try{Ee(H.throw(at))}catch(Ht){de(Ht)}}function Ee(at){at.done?U(at.value):function Y(U){return U instanceof j?U:new j(function(de){de(U)})}(at.value).then(nt,ve)}Ee((H=H.apply(k,F||[])).next())})}function Mt(k){return this instanceof Mt?(this.v=k,this):new Mt(k)}function mt(k,F,j){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Y,H=j.apply(k,F||[]),U=[];return Y={},de("next"),de("throw"),de("return"),Y[Symbol.asyncIterator]=function(){return this},Y;function de(Pt){H[Pt]&&(Y[Pt]=function(qn){return new Promise(function(In,er){U.push([Pt,qn,In,er])>1||nt(Pt,qn)})})}function nt(Pt,qn){try{!function ve(Pt){Pt.value instanceof Mt?Promise.resolve(Pt.value.v).then(Ee,at):Ht(U[0][2],Pt)}(H[Pt](qn))}catch(In){Ht(U[0][3],In)}}function Ee(Pt){nt("next",Pt)}function at(Pt){nt("throw",Pt)}function Ht(Pt,qn){Pt(qn),U.shift(),U.length&&nt(U[0][0],U[0][1])}}function dr(k){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var j,F=k[Symbol.asyncIterator];return F?F.call(k):(k=function gt(k){var F="function"==typeof Symbol&&Symbol.iterator,j=F&&k[F],H=0;if(j)return j.call(k);if(k&&"number"==typeof k.length)return{next:function(){return k&&H>=k.length&&(k=void 0),{value:k&&k[H++],done:!k}}};throw new TypeError(F?"Object is not iterable.":"Symbol.iterator is not defined.")}(k),j={},H("next"),H("throw"),H("return"),j[Symbol.asyncIterator]=function(){return this},j);function H(U){j[U]=k[U]&&function(de){return new Promise(function(nt,ve){!function Y(U,de,nt,ve){Promise.resolve(ve).then(function(Ee){U({value:Ee,done:nt})},de)}(nt,ve,(de=k[U](de)).done,de.value)})}}}Ve.d(Sn,{FC:()=>mt,KL:()=>dr,_T:()=>Ne,mG:()=>Ie,qq:()=>Mt}),"function"==typeof SuppressedError&&SuppressedError}},zi=>{zi(zi.s=784)}]);